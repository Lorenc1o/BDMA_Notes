<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>INFOH415 - Advanced Databases</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)"> 
<!-- html --> 
<meta name="src" content="summary.tex"> 
<link rel="stylesheet" type="text/css" href="summary.css"> 
</head><body 
>
   <div class="maketitle">
                                                                                            
                                                                                            
                                                                                            
                                                                                            

<h2 class="titleHead">INFOH415 - Advanced Databases</h2>
 <div class="author" ><span 
class="ecrm-1200">Jose Antonio Lorencio Abril</span></div><br />
<div class="date" ><span 
class="ecrm-1200">Fall 2022</span></div>
   </div>
<div class="center" 
>
<!--l. 107--><p class="noindent" >
<!--l. 108--><p class="noindent" ><img 
src="0_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Ad___x-Universit___libre_de_Bruxelles__logo__svg.png" alt="PIC"  
width="7" height="7" >
</div>
                                                                                            <div class="flushright" 
>
<!--l. 111--><p class="noindent" >
 Professor: Esteban Zimanyi
</div>
                                                                                            <div class="flushright" 
>
<!--l. 115--><p class="noindent" >
 Student e-mail: jose.lorencio.abril@ulb.be
</div>
<!--l. 119--><p class="indent" >
                                                                                            
                                                                                            
<!--l. 126--><p class="noindent" >This
is
a
summary
of
the
course
<span 
class="ecti-1000">Advanced</span>
<span 
class="ecti-1000">Databases</span>
taught
at
the
Université
Libre
de
Bruxelles
by
Professor
Esteban
Zimanyi
in
the
academic
year
22/23.
Most
of
the
content
of
this
document
is
adapted
from
the
course
notes
by
Zimanyi,
<span class="cite">[<a 
href="#XZimanyi2022">1</a>]</span>,
so
I
won&#8217;t
be
citing
it
all
the
time.
Other
references
will
be
provided
when
                                                                                            
                                                                                            
used.
<!--l. 128--><p class="indent" >
                                                                                            
                                                                                            
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   <span class="partToc" >I&#x00A0;&#x00A0;<a 
href="#x1-4000I" id="QQ2-1-4">Active Databases</a></span>
<br />   &#x00A0;<span class="sectionToc" >1 <a 
href="#x1-50001" id="QQ2-1-5">Introduction</a></span>
<br />   &#x00A0;<span class="sectionToc" >2 <a 
href="#x1-60002" id="QQ2-1-6">Representative Systems and Prototypes</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-70002.1" id="QQ2-1-7">Starbust</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-120002.2" id="QQ2-1-14">Oracle</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.3 <a 
href="#x1-150002.3" id="QQ2-1-18">DB2</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.4 <a 
href="#x1-170002.4" id="QQ2-1-21">SQL Server</a></span>
<br />   &#x00A0;<span class="sectionToc" >3 <a 
href="#x1-220003" id="QQ2-1-27">Applications of Active Rules</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-230003.1" id="QQ2-1-28">A summary of Integrity Constraints</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.2 <a 
href="#x1-240003.2" id="QQ2-1-29">Management of Derived Data</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.3 <a 
href="#x1-270003.3" id="QQ2-1-32">Business Rules: Advantages and Difficulties</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4 <a 
href="#x1-300003.4" id="QQ2-1-35">A case study: Energy Management System</a></span>
<br />   <span class="partToc" >II&#x00A0;&#x00A0;<a 
href="#x1-44000II" id="QQ2-1-49">Graph Databases</a></span>
<br />   &#x00A0;<span class="sectionToc" >4 <a 
href="#x1-450004" id="QQ2-1-50">Introduction</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.1 <a 
href="#x1-460004.1" id="QQ2-1-51">CAP theorem</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.2 <a 
href="#x1-470004.2" id="QQ2-1-52">Graph DB model: graphs</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3 <a 
href="#x1-480004.3" id="QQ2-1-53">The Resource Description Framework (RDF) Model</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.4 <a 
href="#x1-490004.4" id="QQ2-1-54">The property graph data model</a></span>
<br />   &#x00A0;<span class="sectionToc" >5 <a 
href="#x1-540005" id="QQ2-1-59">Neo4j</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.1 <a 
href="#x1-550005.1" id="QQ2-1-60">File storage</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.2 <a 
href="#x1-570005.2" id="QQ2-1-62">Cypher</a></span>
<br />   <span class="partToc" >III&#x00A0;&#x00A0;<a 
href="#x1-61000III" id="QQ2-1-66">Temporal Databases</a></span>
<br />   &#x00A0;<span class="sectionToc" >6 <a 
href="#x1-620006" id="QQ2-1-67">Introduction</a></span>
<br />   &#x00A0;<span class="sectionToc" >7 <a 
href="#x1-630007" id="QQ2-1-70">Time Ontology</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >7.1 <a 
href="#x1-640007.1" id="QQ2-1-71">TSQL2: Time ontology</a></span>
<br />   &#x00A0;<span class="sectionToc" >8 <a 
href="#x1-660008" id="QQ2-1-73">Temporal Conceptual Modeling</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >8.1 <a 
href="#x1-670008.1" id="QQ2-1-74">The conceptual manifesto</a></span>
<br />   &#x00A0;<span class="sectionToc" >9 <a 
href="#x1-780009" id="QQ2-1-88">Manipulating Temporal Databases with SQL-92</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.1 <a 
href="#x1-790009.1" id="QQ2-1-89">Temporal statements</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.2 <a 
href="#x1-800009.2" id="QQ2-1-90">Temporal keys</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.3 <a 
href="#x1-820009.3" id="QQ2-1-92">Handling Now</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.4 <a 
href="#x1-830009.4" id="QQ2-1-93">Duplicates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.5 <a 
href="#x1-850009.5" id="QQ2-1-96">Referential integrity</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.6 <a 
href="#x1-900009.6" id="QQ2-1-101">Querying valid-time tables</a></span>
<br />   &#x00A0;<span class="sectionToc" >10 <a 
href="#x1-9600010" id="QQ2-1-108">Temporal Support in current DBMSs and SQL 2011</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >10.1 <a 
href="#x1-9700010.1" id="QQ2-1-109">Oracle</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >10.2 <a 
href="#x1-9800010.2" id="QQ2-1-110">Teradata</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >10.3 <a 
href="#x1-9900010.3" id="QQ2-1-111">DB2</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >10.4 <a 
href="#x1-10000010.4" id="QQ2-1-112">SQL 2011</a></span>
<br />   <span class="partToc" >IV&#x00A0;&#x00A0;<a 
href="#x1-101000IV" id="QQ2-1-113">Spatial Databases</a></span>
<br />   &#x00A0;<span class="sectionToc" >11 <a 
href="#x1-10200011" id="QQ2-1-114">Introduction</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >11.1 <a 
href="#x1-10300011.1" id="QQ2-1-115">GIS architectures</a></span>
<br />   &#x00A0;<span class="sectionToc" >12 <a 
href="#x1-10400012" id="QQ2-1-119">Georeferences and Coordinate Systems</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >12.1 <a 
href="#x1-10500012.1" id="QQ2-1-120">Projected coordinate systems</a></span>
<br />   &#x00A0;<span class="sectionToc" >13 <a 
href="#x1-11100013" id="QQ2-1-132">Conceptual Modelling for Spatial Databases</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >13.1 <a 
href="#x1-11200013.1" id="QQ2-1-133">The Spatiotemporal conceptual manifesto</a></span>
<br />   &#x00A0;<span class="sectionToc" >14 <a 
href="#x1-12600014" id="QQ2-1-148">Logical Modelling for Spatial Databases</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >14.1 <a 
href="#x1-12700014.1" id="QQ2-1-149">Representation models</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >14.2 <a 
href="#x1-12900014.2" id="QQ2-1-151">Digital Elevation Models (DEMs)</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >14.3 <a 
href="#x1-13000014.3" id="QQ2-1-152">Representing the geometry of a collection of objects</a></span>
<br />   &#x00A0;<span class="sectionToc" >15 <a 
href="#x1-13400015" id="QQ2-1-156">SQL/MM</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >15.1 <a 
href="#x1-13500015.1" id="QQ2-1-157">SQL/MM Spatial: Geometry Type Hierarchy</a></span>
<br />   &#x00A0;<span class="sectionToc" >16 <a 
href="#x1-14700016" id="QQ2-1-169">Representative Systems</a></span>
                                                                                            
                                                                                            
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >16.1 <a 
href="#x1-14800016.1" id="QQ2-1-170">Oracle Locator</a></span>
   </div>
<!--l. 132--><p class="indent" >
                                                                                            
                                                                                            
   <h3 class="likesectionHead"><a 
 id="x1-2000"></a>List of Figures</h3>
   <div class="tableofcontents"><span class="lofToc" >1&#x00A0;<a 
href="#x1-62070r1">Merging temporal intervals. Blue is permitted; Green, Red and Orange are
forbidden.</a></span><br /><span class="lofToc" >2&#x00A0;<a 
href="#x1-62103r2">Temporal join: cases.</a></span><br /><span class="lofToc" >3&#x00A0;<a 
href="#x1-67001r3">An example of a temporal model in three different
ways.</a></span><br /><span class="lofToc" >4&#x00A0;<a 
href="#x1-68001r4">The MADS temporal data types.</a></span><br /><span class="lofToc" >5&#x00A0;<a 
href="#x1-76001r5">Allen&#8217;s temporal operators and how to
express them.</a></span><br /><span class="lofToc" >6&#x00A0;<a 
href="#x1-92113r6">Cases for temporal difference.</a></span><br /><span class="lofToc" >7&#x00A0;<a 
href="#x1-103001r7">Ad Hoc GIS.</a></span><br /><span class="lofToc" >8&#x00A0;<a 
href="#x1-103002r8">Loosely coupled
GIS.</a></span><br /><span class="lofToc" >9&#x00A0;<a 
href="#x1-103003r9">Integrated GIS.</a></span><br /><span class="lofToc" >10&#x00A0;<a 
href="#x1-105001r10">The geoid.</a></span><br /><span class="lofToc" >11&#x00A0;<a 
href="#x1-105002r11">An ellipse (left) and how it can approximate
locally a complex shape (right).</a></span><br /><span class="lofToc" >12&#x00A0;<a 
href="#x1-106001r12">The latitude and the longitude.</a></span><br /><span class="lofToc" >13&#x00A0;<a 
href="#x1-107001r13">Shapes of projection
surface.</a></span><br /><span class="lofToc" >14&#x00A0;<a 
href="#x1-108001r14">Angle of projection.</a></span><br /><span class="lofToc" >15&#x00A0;<a 
href="#x1-109001r15">Fit of projection.</a></span><br /><span class="lofToc" >16&#x00A0;<a 
href="#x1-112001r16">MADS Spatial Type Hierarchy.</a></span><br />
   </div>
<!--l. 136--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-3000"></a>List of Tables</h3>
   <div class="tableofcontents"><span class="lotToc" >1&#x00A0;<a 
href="#x1-7021r1">Starbust&#8217;s rule definition syntax.</a></span><br /><span class="lotToc" >2&#x00A0;<a 
href="#x1-11027r2">Starbust&#8217;s rule commands.</a></span><br /><span class="lotToc" >3&#x00A0;<a 
href="#x1-12014r3">Oracle&#8217;s rule
definition syntax.</a></span><br /><span class="lotToc" >4&#x00A0;<a 
href="#x1-15012r4">DB2&#8217;s rule definition syntax.</a></span><br /><span class="lotToc" >5&#x00A0;<a 
href="#x1-17011r5">SQL Server&#8217;s rule definition
syntax.</a></span><br /><span class="lotToc" >6&#x00A0;<a 
href="#x1-83001r6">Temporal duplicates example.</a></span><br />
   </div>
<!--l. 138--><p class="indent" >
<!--l. 138--><p class="noindent" ><span 
class="ecbx-1440">List of Algorithms</span>
<!--l. 140--><p class="indent" >
                                                                                            
                                                                                            
   <h1 class="partHead"><span class="titlemark">Part&#x00A0;I<br /></span><a 
 id="x1-4000I"></a>Active Databases</h1>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-50001"></a>Introduction</h3>
<!--l. 146--><p class="noindent" >Traditionally, DBMS are <span 
class="ecbx-1000">passive</span>, meaning that all actions on data result from explicit invocation in
application programs. In contrast, <span 
class="ecbx-1000">active DMBS </span>can perform actions automatically, in response to monitored
events, such as updates in the database, certain points in time or defined events which are external to the
database.
<!--l. 153--><p class="indent" >   <span 
class="ecbx-1000">Integrity constraints </span>are a well-known mechanism that has been used since the early stages of SQL to
enhance integrity by imposing constraints to the data. These constraints will only allow modifications to
the database that do not violate them. Also, it is common for DBMS to provide mechanisms to store
procedures, in the form of precompiled packets that can be invoked by the user. These are usually caled <span 
class="ecbx-1000">stored</span>
<span 
class="ecbx-1000">procedure</span>.
<!--l. 161--><p class="indent" >   The active database technology make an abstraction of these two features: the <span 
class="ecbx-1000">triggers</span>.
   <div class="tcolorbox tcolorbox" id="tcolobox-1">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 165--><p class="noindent" ><span class="head">
<a 
 id="x1-5001r1"></a>
<span 
class="ecbx-1000">Definition 1.1.</span>   </span>A <span 
class="ecbx-1000">trigger </span>or, more generally, an <span 
class="ecbx-1000">ECA rule</span>, consists of an event, a condition and a set of
actions:
        <ul class="itemize1">
        <li class="itemize">
        <!--l. 169--><p class="noindent" ><span 
class="ecbx-1000">Event</span>: indicates when the trigger must be called.
        </li>
        <li class="itemize">
        <!--l. 170--><p class="noindent" ><span 
class="ecbx-1000">Condition</span>: indicates the checks that must be done after the trigger is called. If the condition is
        fulfilled, then the set of actions is executed. Otherwise, the trigger does not perform any action.
        </li>
        <li class="itemize">
        <!--l. 173--><p class="noindent" ><span 
class="ecbx-1000">Actions</span>: performed when the condition is fullfilled.</li></ul>
</div>
<!--l. 175--><p class="noindent" >
 
</div> 
</div>
   <div class="newtheorem">
<!--l. 178--><p class="noindent" ><span class="head">
<a 
 id="x1-5002r1"></a>
<span 
class="ecbx-1000">Example 1.1.</span>  </span>A conceptual trigger could be like the following:
<div class="center" 
>
<!--l. 180--><p class="noindent" >
<div class="tabular"> <table id="TBL-2" class="tabular" 
 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-1"  
class="td11">   Event    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-2"  
class="td11">  A customer has not paid 3 invoices at the due date.    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-1"  
class="td11"> Condition  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-2"  
class="td11"> If the credit limit of the customer is less than 20000<span 
class="tcrm-1000">&#x20AC;</span>.  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-1"  
class="td11">   Action    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-2"  
class="td11">      Cancel all curernt orders of the customer.          </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-1"  
class="td11">           </td></tr></table></div>
</div>
                                                                                            
                                                                                            
   </div>
<!--l. 195--><p class="indent" >
There are several aspects of the semantics of an applications that can be expressed through triggers:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 199--><p class="noindent" >Static constraints: refer to referential integrity, cardinality of relations or value restrictions.
     </li>
     <li class="itemize">
     <!--l. 201--><p class="noindent" >Control, business rules and workflow management rules: refer to restrictions imposed by the business
     requirements.
     </li>
     <li class="itemize">
     <!--l. 203--><p class="noindent" >Historical data rules: define how historial data has to be treated.
     </li>
     <li class="itemize">
     <!--l. 204--><p class="noindent" >Implementation of generic relationships: with triggers we can define arbitrarily complex relationships.
     </li>
     <li class="itemize">
     <!--l. 206--><p class="noindent" >Derived data rules: refer to the treatment of materialized attributes, materialized views and replicated
     data.
     </li>
     <li class="itemize">
     <!--l. 208--><p class="noindent" >Access control rules: define which users can access which content and with which permissions.
     </li>
     <li class="itemize">
     <!--l. 210--><p class="noindent" >Monitoring rules: assess performance and resource usage.</li></ul>
<!--l. 212--><p class="noindent" >The benefits of active technology are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 214--><p class="noindent" >Simplification of application programs by embedding part of the functionality into the database using
     triggers.
     </li>
     <li class="itemize">
     <!--l. 216--><p class="noindent" >Increased automation by the automatic execution of triggered actions.
     </li>
     <li class="itemize">
     <!--l. 217--><p class="noindent" >Higher reliability of data because the checks can be more elaborate and the actions to take in each case
     are precisely defined.
     </li>
     <li class="itemize">
     <!--l. 219--><p class="noindent" >Increased flexibility with the possibility of increasing code reuse and centralization of the data management.</li></ul>
                                                                                            
                                                                                            
<!--l. 223--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-60002"></a>Representative Systems and Prototypes</h3>
<!--l. 225--><p class="noindent" >Even though this basic model is simple and intuitive, each vendor proposes its own way to implement triggers,
which were not in the SQL-92 standard. We are going to study Starbust triggers, Oracle triggers and DB2
triggers.
<!--l. 230--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-70002.1"></a>Starbust</h4>
<!--l. 232--><p class="noindent" >Starbust is a Relational DBMS prototype developed by IBM. In Starbust, the <span 
class="ecbx-1000">triggers </span>are defined with the following
definition of their components:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 236--><p class="noindent" ><span 
class="ecbx-1000">Event</span>: events can refer to data-manipulation operations in SQL, i.e. INSERT, DELETE or UPDATE.
     </li>
     <li class="itemize">
     <!--l. 238--><p class="noindent" ><span 
class="ecbx-1000">Conditions</span>: are boolean predicates in SQL on the current state of the database after the event has
     occurred.
     </li>
     <li class="itemize">
     <!--l. 240--><p class="noindent" ><span 
class="ecbx-1000">Actions</span>: are SQL statements, rule-manipulation statements or the ROLLBACK operation.</li></ul>
<div class="newtheorem">
<!--l. 243--><p class="noindent" ><span class="head">
<a 
 id="x1-7001r1"></a>
<span 
class="ecbx-1000">Example 2.1.</span>  </span><span 
class="ecti-1000">&#8217;The salary of employees is not larger than the salary of the manager of their department.&#8217;</span>
<!--l. 247--><p class="indent" >   The easiest way to maintain this rule is to rollback any action that violates it. This restriction can be broken
(if we focus on modifications on the employees only) when a new employee is inserted, when the department of
an employee is modified or when the salary of an employee is updated. Thus, a trigger that solves this could
have these actions as events, then it can check whether the condition is fullfilled or not. If it is not, then the
action can be rollback to the previous state, in which the condition was fullfilled.
   <!--l. 256-->
<div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-7002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Mgrsals</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EMP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">department</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7008r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">salary</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">condition</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7009r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Mgr</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">manager</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7010r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7011r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
</div>
<!--l. 269--><p class="indent" >
The syntax of Starbust&#8217;s rule definition is as described in Table <a 
href="#x1-7021r1">1<!--tex4ht:ref: tab:Starbust's-rule-definition --></a>. As we can see, rules have an unique name and each
rule is associated with a single relation. The events are defined to be only database updates, but one rule can have
several events defined on the target relation.
<!--l. 276--><p class="noindent" >The same event can be used in several triggers, so one event can trigger different actions to be executed. For this not to
produce an unwanted outcome, it is possible to establish the order in which different triggers must be executed, by
using the PRECEDES and FOLLOWS declarations. The order defined by this operators is partial (not all triggers are
comparable) and must be acyclic to avoid deadlocks.
   <div class="table">
                                                                                            
                                                                                            
<!--l. 283--><p class="indent" >   <a 
 id="x1-7021r1"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<!--l. 284-->
<div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-7012r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">relation</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7013r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">events</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7014r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">condition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7015r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SQL</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">statements</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7016r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">PRECEDES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7017r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">FOLLOWS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;];</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7018r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7019r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7020r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">[&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">attributes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span></div>
 <div class="caption" 
><span class="id">Table&#x00A0;1: </span><span  
class="content">Starbust&#8217;s rule definition syntax.</span></div><!--tex4ht:label?: x1-7021r1 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   </div>
   <div class="newtheorem">
<!--l. 299--><p class="noindent" ><span class="head">
<a 
 id="x1-7022r2"></a>
<span 
class="ecbx-1000">Example 2.2.</span>  </span><span 
class="ecti-1000">&#8217;If the average salary of employees gets over 100, reduce the salary of all employees by 10%.&#8217;</span>
<!--l. 303--><p class="indent" >   In this case, the condition can be violated when a new employee is inserted, when an employee is deleted or
when the salary is updated. Now, the action is not to rollback the operation, but to reduce the salary of every
employee by 10%.
<!--l. 308--><p class="indent" >   First, let&#8217;s exemplify the cases in which the condition is violated. Imagine the following initial state of the table
Emp:
<div class="center" 
>
<!--l. 310--><p class="noindent" >
<div class="tabular"> <table id="TBL-3" class="tabular" 
 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-1-2"  
class="td11"> Sal  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-1"  
class="td11"> John </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-2-2"  
class="td11"> 50</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-1"  
class="td11">  Mike   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-3-2"  
class="td11"> 100  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-3-4-2"  
class="td11"> 120  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-3-5-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 329--><p class="indent" >   The average salary is 90, so the condition is fullfilled.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 331--><p class="noindent" ><span 
class="ectt-1000">INSERT INTO Emp VALUES(&#8217;James&#8217;, 200)</span>
     <!--l. 333--><p class="noindent" >The average salary would be 117,5 and the condition is not fullfilled.
     </li>
     <li class="itemize">
     <!--l. 334--><p class="noindent" ><span 
class="ectt-1000">DELETE FROM Emp WHERE Name=&#8217;John&#8217;</span>
     <!--l. 336--><p class="noindent" >The average salary would be 110 and the condition is not fullfilled.
     </li>
     <li class="itemize">
     <!--l. 337--><p class="noindent" ><span 
class="ectt-1000">UPDATE Emp SET Sal=110 WHERE Name=&#8217;John&#8217;</span>
     <!--l. 339--><p class="noindent" >The average salary would be 110 and the condition is not fullfilled.
     </li></ul>
<!--l. 342--><p class="noindent" >The trigger could be defined as:
   <!--l. 344-->
<div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-7023r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalaryControl</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7024r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7025r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7026r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AVG</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">100</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7027r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7028r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-7029r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.9*</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 355--><p class="indent" >   Note, nonetheless, that for the first example, we would get the following result:
<div class="center" 
>
<!--l. 357--><p class="noindent" >
<div class="tabular"> <table id="TBL-4" class="tabular" 
 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"></colgroup><colgroup id="TBL-4-2g"><col 
id="TBL-4-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-2"  
class="td11"> Sal  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-1"  
class="td11"> John </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-2"  
class="td11"> 45</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-1"  
class="td11">  Mike   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-2"  
class="td11">  90   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-2"  
class="td11"> 108  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-1"  
class="td11"> James  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-2"  
class="td11"> 180  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 379--><p class="indent" >   Here, the mean is 105.75, still bigger than 100. We will see how to solve this issue later.
   </div>
<!--l. 381--><p class="indent" >
                                                                                            
                                                                                            
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.1   </span> <a 
 id="x1-80002.1.1"></a>Starbust Semantics</h5>
<!--l. 385--><p class="noindent" >At this point, it is interesting to bring some definitions up to scene:
   <div class="tcolorbox tcolorbox" id="tcolobox-2">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 388--><p class="noindent" ><span class="head">
<a 
 id="x1-8001r1"></a>
<span 
class="ecbx-1000">Definition 2.1.</span>   </span>A <span 
class="ecbx-1000">transaction </span>is a sequence of statements that is to be treated as an atomic unit of
work for some aspect of the processing, i.e., a transaction either executes from beginning to end, or it
does not execute at all.
</div>
<!--l. 393--><p class="noindent" >
<div class="newtheorem">
<!--l. 395--><p class="noindent" ><span class="head">
<a 
 id="x1-8002r2"></a>
<span 
class="ecbx-1000">Definition 2.2.</span>   </span>A <span 
class="ecbx-1000">statement </span>is a part of a transaction, which expresses an operation on the database.
</div>
<!--l. 398--><p class="noindent" >
<div class="newtheorem">
<!--l. 400--><p class="noindent" ><span class="head">
<a 
 id="x1-8003r3"></a>
<span 
class="ecbx-1000">Definition 2.3.</span>   </span>En <span 
class="ecbx-1000">event </span>(in a more precise way than before) is the occurrence of executing a statement,
i.e., a request for executing an operation on the database.
</div>
<!--l. 404--><p class="noindent" >
 
</div> 
</div>
<!--l. 407--><p class="indent" >   Thus, rules are triggered by the execution of operations in statements. In Starbust, rules are <span 
class="ecbx-1000">statement-level</span>,
meaning they are executed once per statement, even for statements that trigger events on several tuples. In addition,
the execution mode is <span 
class="ecbx-1000">deffered</span>. This means that all rules triggered during a transaction are placed in what is called
the <span 
class="ecbx-1000">conflict set </span>(i.e. the set of triggered rules). When the transaction finishes, all rules are executed in
triggering order or in the defined order, if there is one. Nonetheless, if the need for a rule executing during a
transaction exists, we can use the PROCESS RULES declaration, which executes all rules in the conflict
set.
<!--l. 419--><p class="indent" >   The algorithm for executing all rules after the transaction finished or PROCESS RULES is called is described in
Algorithm <a 
href="#x1-8016r1">1<!--tex4ht:ref: alg:Rule-Processing --></a>. As we can see, rule processing basically involves 3 stages:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-8005x1">
     <!--l. 423--><p class="noindent" ><span 
class="ecbx-1000">Activation</span>: the event in the rule requests the execution of an operation and this is detected by the
     system.
     </li>
<li 
  class="enumerate" id="x1-8007x2">
                                                                                            
                                                                                            
     <!--l. 425--><p class="noindent" ><span 
class="ecbx-1000">Consideration</span>: the condition of the rule is evaluated.
     </li>
<li 
  class="enumerate" id="x1-8009x3">
     <!--l. 426--><p class="noindent" ><span 
class="ecbx-1000">Execution</span>: if the condition is fullfilled, the action in the rule is executed.</li></ol>
<a 
 id="x1-8010r1"></a>
<!--l. 429--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
   <!--l. 430-->
   <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-8011r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">while</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">is</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">not</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">empty</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-8012r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">R</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">in</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">with</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">highest</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">priority</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-8013r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">delete</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">R</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-8014r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">if</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">R</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">condition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">is</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRUE</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-8015r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">R</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">action</span></span></div>
   
<a 
 id="x1-8016r1"></a>
<a 
 id="x1-8017"></a>
                          <span 
class="ecbx-1000">Algorithm</span><span 
class="ecbx-1000">&#x00A0;1:</span>&#x00A0;processRules(conflict set CS)
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.2   </span> <a 
 id="x1-90002.1.2"></a>Correctness of rules</h5>
   <div class="tcolorbox tcolorbox" id="tcolobox-3">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 446--><p class="noindent" ><span class="head">
<a 
 id="x1-9001r4"></a>
<span 
class="ecbx-1000">Definition 2.4.</span>   </span>The <span 
class="ecbx-1000">repeatability of the execution </span>is the property that ensures that the system
behaves in the same way when it receives the same input transaction in the same database state, i.e.,
the results are deterministic.
</div>
<!--l. 451--><p class="noindent" >
 
</div> 
</div>
<!--l. 454--><p class="noindent" >As we have seen before, rule definitions specify a partial order for execution, but several rules may have highest priority
at the moment of selection. To achieve repeatability, the system maintains a total order, based on the user-defined
partial order and the timestamps of the creation of the rules.
   <div class="tcolorbox tcolorbox" id="tcolobox-4">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 461--><p class="noindent" ><span class="head">
<a 
 id="x1-9002r5"></a>
<span 
class="ecbx-1000">Definition 2.5.</span>   </span>The <span 
class="ecbx-1000">termination of rule execution </span>is reached when an empty conflict set is obtained.
</div>
<!--l. 464--><p class="noindent" >
 
</div> 
</div>
<!--l. 467--><p class="indent" >   Note that the execution of the rules may trigger more rules, this could cause <span 
class="ecbx-1000">nontermination</span>, if two
rules call each other in a cycle. Thus, ensuring termination is one of the main problems of active-rule
design.
   <div class="newtheorem">
<!--l. 471--><p class="noindent" ><span class="head">
<a 
 id="x1-9003r3"></a>
<span 
class="ecbx-1000">Example 2.3.</span>  </span>Return to the previous example. We saw how the first of the examples did not end up fullfilling
the condition, but it is because we did not take into account that the rule would trigger itself because
it updates the Salary of Emp. Thus, the insertion and subsequent execution of the rule triggered gave
us:
<div class="center" 
>
<!--l. 477--><p class="noindent" >
<div class="tabular"> <table id="TBL-5" class="tabular" 
 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-2"  
class="td11"> Sal  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-1"  
class="td11"> John </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-2"  
class="td11"> 45</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-1"  
class="td11">  Mike   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-2"  
class="td11">  90   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-2"  
class="td11"> 108  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-1"  
class="td11"> James  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-2"  
class="td11"> 180  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 499--><p class="indent" >   As we have updated the salaries, the rule is triggered again. The condition would be fullfilled, 105.75&#x003E;100 and the
salaries would be modified again, arriving to the table as:
                                                                                            
                                                                                            
<div class="center" 
>
<!--l. 502--><p class="noindent" >
<div class="tabular"> <table id="TBL-6" class="tabular" 
 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"></colgroup><colgroup id="TBL-6-2g"><col 
id="TBL-6-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-2"  
class="td11">  Sal  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-1"  
class="td11"> John </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-2"  
class="td11"> 41.5</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-1"  
class="td11">  Mike   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-2"  
class="td11">  81   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-2"  
class="td11"> 97.2  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-1"  
class="td11"> James  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-2"  
class="td11"> 162  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 524--><p class="indent" >   As the salaries ahve been updated again, the rule is triggered once more. Now, the mean is 95.425 &#x003C; 100, so the
condition is not met and the actions are not executed. The rule has terminated.
<!--l. 528--><p class="indent" >   In this case, termination is ensured because all values are decreased by 10%. This implies that the mean is also
decreased by 10%. Thus, no matter how high the mean is at the beginning, at some point it will go below 100, because
<span 
class="cmr-10">0</span><span 
class="cmmi-10">.</span><span 
class="cmr-10">9</span><span 
class="cmmi-10">x &#x003C; x,</span><span 
class="cmmi-10">&#x00A0;</span><span 
class="cmsy-10">&#x2200;</span><span 
class="cmmi-10">x &#x003E; </span><span 
class="cmr-10">0</span>.
   </div>
<!--l. 532--><p class="indent" >
   <div class="newtheorem">
<!--l. 533--><p class="noindent" ><span class="head">
<a 
 id="x1-9004r1"></a>
<span 
class="ecti-1000">Remark </span>2.1<span 
class="ecti-1000">.</span>  </span>In general, guaranteeing termination is responsibility of the programmer is not an easy task.
   </div>
<!--l. 536--><p class="indent" >
<div class="tcolorbox tcolorbox" id="tcolobox-5">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 538--><p class="noindent" ><span class="head">
<a 
 id="x1-9005r6"></a>
<span 
class="ecbx-1000">Definition 2.6.</span>   </span>A rule is <span 
class="ecbx-1000">correct </span>(or possesses the correctness property) if it ensures repeatability and
termination, taking into account the rest of factors in the database (other rules, domain of the attributes,
structure of the tables,...).
</div>
<!--l. 543--><p class="noindent" >
 
</div> 
</div>
<!--l. 547--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.3   </span> <a 
 id="x1-100002.1.3"></a>State transitions and net effect</h5>
<!--l. 549--><p class="noindent" >A transaction causes a state transition of the database, in the form of an addition, suppression of modification of one or
more tuples of the database.
<!--l. 553--><p class="indent" >   Before the transaction commits, the system stores two temporary <span 
class="ecbx-1000">transition relations</span>, that contain the tuples
affected by the transition. This tables are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 557--><p class="noindent" >INSERTED: for each event, it stores newly inserted tuples and the new form of tuples that have been
     modified.
     </li>
     <li class="itemize">
     <!--l. 559--><p class="noindent" >DELETED: for each event, it stores deleted tuples and the old form of tuples that have been modified.</li></ul>
                                                                                            
                                                                                            
<div class="tcolorbox tcolorbox" id="tcolobox-6">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 563--><p class="noindent" ><span class="head">
<a 
 id="x1-10001r7"></a>
<span 
class="ecbx-1000">Definition 2.7.</span>   </span>The <span 
class="ecbx-1000">net effect </span>of a transaction on a tuple is the composed effect of the transaction on
the tuple, from the starting state to the end of the transaction.
</div>
<!--l. 567--><p class="noindent" >
 
</div> 
</div>
   <div class="newtheorem">
<!--l. 570--><p class="noindent" ><span class="head">
<a 
 id="x1-10002r4"></a>
<span 
class="ecbx-1000">Example 2.4.</span>  </span>Some simple net effects:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 573--><p class="noindent" >The sequence <span 
class="ectt-1000">INSERT </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">UPDATE </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">... </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">UPDATE </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">DELETE </span>on a newl tuple, has null effect: the
     tuple was not in the database at the beginning, and it is not there at the end.
     </li>
     <li class="itemize">
     <!--l. 577--><p class="noindent" >The sequence <span 
class="ectt-1000">INSERT </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">UPDATE </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">... </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">UPDATE </span>on a new tuple, has the same net effect as inserting
     the tuple with the values given in the last update.
     </li>
     <li class="itemize">
     <!--l. 580--><p class="noindent" >The sequence  <span 
class="ectt-1000">UPDATE </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">... </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">UPDATE </span><span 
class="cmsy-10">&#x2192; </span><span 
class="ectt-1000">DELETE </span>on an existing tuple, has the same net effect as just
     deleting it.</li></ul>
   </div>
<!--l. 584--><p class="indent" >
   <div class="newtheorem">
<!--l. 585--><p class="noindent" ><span class="head">
<a 
 id="x1-10003r2"></a>
<span 
class="ecti-1000">Remark </span>2.2<span 
class="ecti-1000">.</span>  </span>Rules consider the net effect of transactions between two database states, so each tuple appears
at most once in each temporary table.
   </div>
<!--l. 588--><p class="indent" >
   <div class="newtheorem">
<!--l. 589--><p class="noindent" ><span class="head">
<a 
 id="x1-10004r5"></a>
<span 
class="ecbx-1000">Example 2.5.</span>  </span>Let&#8217;s see the INSERTED and DELETED tables of our example. We start with the table
                                                                                            
                                                                                            
<div class="center" 
>
<!--l. 592--><p class="noindent" >
<div class="tabular"> <table id="TBL-7" class="tabular" 
 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"></colgroup><colgroup id="TBL-7-2g"><col 
id="TBL-7-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-2"  
class="td11"> Sal  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-1"  
class="td11"> John </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-2"  
class="td11"> 50</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-1"  
class="td11">  Mike   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-2"  
class="td11"> 100  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-2"  
class="td11"> 120  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 611--><p class="indent" >   And perform <span 
class="ectt-1000">UPDATE Emp SET Sal=110 WHERE Name=&#8217;John&#8217;. </span>If we accessed the temporary tables now, we would
see:
<div class="center" 
>
<!--l. 613--><p class="noindent" >
<div class="tabular"> <table id="TBL-8" class="tabular" 
 
><colgroup id="TBL-8-1g"><col 
id="TBL-8-1"></colgroup><colgroup id="TBL-8-2g"><col 
id="TBL-8-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-8-1-1"  
class="td11">  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">INSERTED</div>   </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-1"  
class="td11"> Name </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-2-2"  
class="td11"> Sal</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-8-3-2"  
class="td11"> 110  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-8-4-1"  
class="td11">       </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-9" class="tabular" 
 
><colgroup id="TBL-9-1g"><col 
id="TBL-9-1"></colgroup><colgroup id="TBL-9-2g"><col 
id="TBL-9-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-9-1-1"  
class="td11">  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">DELETED</div>   </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-1"  
class="td11"> Name </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-2-2"  
class="td11"> Sal</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-9-3-2"  
class="td11"> 50  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-9-4-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 640--><p class="indent" >   Now, the rule is triggered because salary has been updated. The condition is met and the action is launched. If we
accessed the temporary tables now, we would see:
<div class="center" 
>
<!--l. 643--><p class="noindent" >
<div class="tabular"> <table id="TBL-10" class="tabular" 
 
><colgroup id="TBL-10-1g"><col 
id="TBL-10-1"></colgroup><colgroup id="TBL-10-2g"><col 
id="TBL-10-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-10-1-1"  
class="td11">  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">INSERTED</div>   </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-1"  
class="td11"> Name </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-2"  
class="td11"> Sal</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-2"  
class="td11">  99   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-1"  
class="td11">  Mike  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-2"  
class="td11">  90   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-2"  
class="td11"> 108  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-6-1"  
class="td11">       </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-11" class="tabular" 
 
><colgroup id="TBL-11-1g"><col 
id="TBL-11-1"></colgroup><colgroup id="TBL-11-2g"><col 
id="TBL-11-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-11-1-1"  
class="td11">  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">DELETED</div>   </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-2-1"  
class="td11"> Name </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-2-2"  
class="td11"> Sal</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-3-2"  
class="td11">  50   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-4-1"  
class="td11">  Mike  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-4-2"  
class="td11"> 100  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-5-1"  
class="td11"> Sarah  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-11-5-2"  
class="td11"> 120  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-11-6-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 682--><p class="indent" >   Note how the first tuple in INSERTED shows only the net effect on the tuple.
   </div>
<!--l. 684--><p class="indent" >
With this definitions, we can give a more precise definition of rule triggering:
   <div class="tcolorbox tcolorbox" id="tcolobox-7">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 689--><p class="noindent" ><span class="head">
<a 
 id="x1-10005r8"></a>
<span 
class="ecbx-1000">Definition 2.8.</span>   </span>A rule is <span 
class="ecbx-1000">triggered </span>if any of the transition relations corresponding to its triggering
operations is not empty.
</div>
<!--l. 692--><p class="noindent" >
 
</div> 
</div>
<!--l. 695--><p class="indent" >   A great feature of rules is that it is possible to reference the transition tables, which can be very useful in many
occasions.
   <div class="newtheorem">
<!--l. 697--><p class="noindent" ><span class="head">
<a 
 id="x1-10006r6"></a>
                                                                                            
                                                                                            
<span 
class="ecbx-1000">Example 2.6.</span>  </span>Now, imagine we want to add the rule &#8217;<span 
class="ecti-1000">If an employee is inserted with a salary greater than 100, add</span>
<span 
class="ecti-1000">the employee to the table of hifh paid employees&#8217;</span>. This rule could be defined as: <!--l. 701-->
<div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-10007r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaid</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10008r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10009r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10010r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">100)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10011r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10012r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidEmp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10013r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">100)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-10014r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">FOLLOWS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalaryControl</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 713--><p class="indent" >   When we insert (James, 200), the tuple is inserted and the rules SalaryControl and HighPaid are
triggered. Because we have defined HighPaid to follow SalaryControl, the latter would execute earlier. Now,
SalaryControl, as we saw, would trigger more instances of the same rule, which would be all executed before
HighPaid. At the end, as all employees would have been modified, all of them with a salary bigger than 100
would be added to the table HighPaidEmp because of this new rule. In this case, only James fullfills the
condition.
   </div>
<!--l. 721--><p class="indent" >
<!--l. 723--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.4   </span> <a 
 id="x1-110002.1.4"></a>More Starbust commands</h5>
   <div class="table">
                                                                                            
                                                                                            
<!--l. 725--><p class="indent" >   <a 
 id="x1-11027r2"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<!--l. 726-->
<div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-11001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">1)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DEACTIVATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Makes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">not</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">be</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">taken</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">into</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">account</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11003r3"></a><span 
class="ecrm-0500">3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">2)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ACTIVATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Makes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">be</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">taken</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">into</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">account</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11006r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">3)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DROP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deletes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11009r9"></a><span 
class="ecrm-0500">9</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">4)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULESET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Creates</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">i</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">e</span></span><span style="color:#000000"><span 
class="ectt-0800">.,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">set</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">related</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">rules</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11012r12"></a><span 
class="ecrm-0500">12</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">5)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULESET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">ADDRULES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">DELRULES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Allows</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">add</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">or</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">delete</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">rules</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">/</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11015r15"></a><span 
class="ecrm-0500">15</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DROP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULESET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11017r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deletes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">but</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">not</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">rules</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11018r18"></a><span 
class="ecrm-0500">18</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11019r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">7)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PROCESS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULES</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11020r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Processes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">all</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">active</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">rules</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11021r21"></a><span 
class="ecrm-0500">21</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11022r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">8)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PROCESS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULESET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11023r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Process</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ruleset</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">if</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">it</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">is</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">active</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11024r24"></a><span 
class="ecrm-0500">24</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11025r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">9)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PROCESS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-11026r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Process</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">specified</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">rule</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">if</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">it</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">is</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">active</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span></div>
 <div class="caption" 
><span class="id">Table&#x00A0;2: </span><span  
class="content">Starbust&#8217;s rule commands.</span></div><!--tex4ht:label?: x1-11027r2 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   </div>
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-120002.2"></a>Oracle</h4>
<!--l. 761--><p class="noindent" >In Oracle, the term used is TRIGGER. Triggers in Oracle respond to modification operations (INSERT, DELETE,
UPDATE) to a relation, just as in Starburst.
<!--l. 765--><p class="indent" >   The triggers in Oracle can be defined for different granularities:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 767--><p class="noindent" ><span 
class="ecbx-1000">Tuple-level</span>: the rule is triggered once for each tuple concerned by the triggering event.
     </li>
     <li class="itemize">
     <!--l. 769--><p class="noindent" ><span 
class="ecbx-1000">Statement-level</span>: the rule is triggered only once even if several tuples are involved.</li></ul>
<!--l. 772--><p class="noindent" >Also, the execution mode of triggers in Oracle is <span 
class="ecbx-1000">immediate</span>, meaning they are executed just after the event has ben
requested, in contrast to Starburst, in which the execution mode is referred, as we saw. This allows for rules to be
executed before, after or even instead of the operation of the triggering event. In <a 
href="#x1-12014r3">3<!--tex4ht:ref: tab:Oracles's-rule-definition --></a>, the definition syntax of triggers in
Oracle is detailed. Some notes:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 779--><p class="noindent" >The BEFORE or AFTER commands define when the rule should execute in relation to the events that
     trigger it.
     </li>
     <li class="itemize">
     <!--l. 781--><p class="noindent" >If FOR EACH ROW is written, then the trigger is a tuple-level trigger, and it is activated once for each tuple
     concerned.
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 784--><p class="noindent" >This is useful if the code in the actions depends on data provided by the triggering statement or on
         the tuples affected.
         </li>
         <li class="itemize">
         <!--l. 786--><p class="noindent" >The INSERTING, DELETING and UPDATING statements may be used in the action to check
         which triggering event has occurred.
         </li>
         <li class="itemize">
         <!--l. 788--><p class="noindent" >OLD and NEW reference the old value of the tuple (if it is update or delete) and the new value of
         the tuple (if it is update or insert).
         </li>
         <li class="itemize">
         <!--l. 790--><p class="noindent" >The condition consists of a simple predicate on the current tuple.</li></ul>
     </li>
     <li class="itemize">
     <!--l. 792--><p class="noindent" >If FOR EACH ROW is not written, then the trigger is a statement-level trigger, and it is activated once for each
     triggering statement even if several tuples are involved or no tuple is updated.
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 796--><p class="noindent" >In this case, OLD and NEW are meaningless.
                                                                                            
                                                                                            
         </li>
         <li class="itemize">
         <!--l. 797--><p class="noindent" >This is useful if the code of the actions does not depend on the data provided by the triggering
         statement nor the tuples affected.
         </li>
         <li class="itemize">
         <!--l. 799--><p class="noindent" >It does not have a condition part<span class="footnote-mark"><a 
href="summary2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-12001f1"></a>  .
         </li>
         <li class="itemize">
         <!--l. 800--><p class="noindent" >It does not have the possibility to refer to intermediate relations as in Starbust<span class="footnote-mark"><a 
href="summary2.html#fn1x0"><sup class="textsuperscript"><a 
href="#x1-12001f1">1<!--tex4ht:ref: fn:1 --></a></sup></a></span>.</li></ul>
     </li>
     <li class="itemize">
     <!--l. 803--><p class="noindent" >Oracle triggers can execute actions containing arbitrary
     PL/SQL<span class="footnote-mark"><a 
href="summary3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-12002f2"></a>  
     code (not just SQL as in Starburst).</li></ul>
<div class="table">
<!--l. 806--><p class="indent" >   <a 
 id="x1-12014r3"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<!--l. 807-->
<div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-12003r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">}</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">events</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12004r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12005r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCING</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">references</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12006r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12007r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">condition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;)</span></span><span style="color:#000000"><span 
class="ectt-0800">]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12008r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">actions</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12009r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12010r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12011r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">column</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12012r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">references</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OLD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">old</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">tuple</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">new</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">tuple</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12013r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">actions</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">PL</span></span><span style="color:#000000"><span 
class="ectt-0800">/</span></span><span style="color:#000000"><span 
class="ectt-0800">SQL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">block</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span></div>
 <div class="caption" 
><span class="id">Table&#x00A0;3: </span><span  
class="content">Oracle&#8217;s rule definition syntax.</span></div><!--tex4ht:label?: x1-12014r3 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
</div>
   <div class="newtheorem">
<!--l. 824--><p class="noindent" ><span class="head">
<a 
 id="x1-12015r7"></a>
<span 
class="ecbx-1000">Example 2.7.</span>  </span>Row-level AFTER trigger.
<!--l. 827--><p class="indent" >   Imagine we have two tables:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 829--><p class="noindent" ><span 
class="ectt-1000">Inventory(Part, PartOnHand, ReorderPoint, ReorderQty)</span>
     </li>
     <li class="itemize">
     <!--l. 830--><p class="noindent" ><span 
class="ectt-1000">PendingOrders(Part, Qty, Date)</span></li></ul>
<!--l. 832--><p class="noindent" >We want to define a rule that whenever a PartOnHand is modified, and its new value is smaller than the ReorderPoint
(i.e. we have less parts than the threshold to order more parts), we add a new record to PendingOrders
as a new order for this part and the required quantity, if it is not already done. This can be done as
follows:
   <!--l. 838-->
<div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-12016r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Reorder</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12017r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PartOnHand</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inventory</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12018r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROW</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12019r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">New</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PartOnHand</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">New</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ReorderPoint</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12020r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DECLARE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">X</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12021r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12022r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(*)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">X</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12023r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PendingOrders</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12024r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Part</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">New</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Part</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12025r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12026r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">X</span></span><span style="color:#000000"><span 
class="ectt-0800">=0</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12027r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PendingOrders</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">New</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Part</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">New</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ReorderQty</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12028r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ENDIF</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12029r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 856--><p class="indent" >   Let&#8217;s apply the rule to see how it works. Let&#8217;s say our table Inventory is:
<div class="center" 
>
<!--l. 858--><p class="noindent" >
<div class="tabular"> <table id="TBL-12" class="tabular" 
 
><colgroup id="TBL-12-1g"><col 
id="TBL-12-1"></colgroup><colgroup id="TBL-12-2g"><col 
id="TBL-12-2"></colgroup><colgroup id="TBL-12-3g"><col 
id="TBL-12-3"></colgroup><colgroup id="TBL-12-4g"><col 
id="TBL-12-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-1"  
class="td11"> Part  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-2"  
class="td11"> PartOnHand  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-3"  
class="td11"> ReorderPoint  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-1-4"  
class="td11"> ReorderQty  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-1"  
class="td11">   1    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-2"  
class="td11">     200        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-3"  
class="td11">     150        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-2-4"  
class="td11">     100       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-1"  
class="td11">   2    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-2"  
class="td11">     780        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-3"  
class="td11">     500        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-3-4"  
class="td11">     200       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-4-1"  
class="td11">   3    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-4-2"  
class="td11">     450        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-4-3"  
class="td11">     400        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-12-4-4"  
class="td11">     120       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-12-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-12-5-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 885--><p class="indent" >   If we execute the following transaction on October 10, 2000:
   <!--l. 887-->
<div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-12030r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inventory</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12031r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PartOnHand</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PartOnHand</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">70</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12032r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Part</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1;</span></span></div>
<!--l. 894--><p class="indent" >   Then the tuple <span 
class="ectt-1000">(1,100,2000-10-10) </span>would be inserted into PendingOrders.
   </div>
<!--l. 896--><p class="indent" >
The algorithm for executing rules in Oracle is shown in Algorithm <a 
href="#x1-12049r2">2<!--tex4ht:ref: alg:Rule-Processing-1 --></a>. As we can see, statement-level triggers are
executed before/after anything else, and row-level triggers are executed before/after each affected tuple is modified.
Note that the executions needs to take into account the priority among triggers, but only those of the same granularity
(row vs statement) and type (before vs after).
<a 
 id="x1-12033r2"></a>
                                                                                            
                                                                                            
<!--l. 905--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
   <!--l. 906-->
   <div class="lstlisting" id="listing-10"><span class="label"><a 
 id="x1-12034r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">For</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">STATEMENT</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">LEVEL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12035r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12036r3"></a><span 
class="ecrm-0500">3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12037r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">For</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">row</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">affected</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">by</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">triggering</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">statement</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12038r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">For</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">LEVEL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12039r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12040r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">modification</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">row</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12041r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Check</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">row</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">level</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">constraints</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">assertions</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12042r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">For</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">LEVEL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12043r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12044r11"></a><span 
class="ecrm-0500">11</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12045r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Check</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">statement</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">level</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">constraints</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">assertions</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12046r13"></a><span 
class="ecrm-0500">13</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12047r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">For</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">STATEMENT</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">LEVEL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-12048r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Execute</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span></div>
   
<a 
 id="x1-12049r2"></a>
<a 
 id="x1-12050"></a>
                                <span 
class="ecbx-1000">Algorithm</span><span 
class="ecbx-1000">&#x00A0;2:</span>&#x00A0;processRules
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1   </span> <a 
 id="x1-130002.2.1"></a>Oracle semantics</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 931--><p class="noindent" >The action part may activate other triggers. In that case, the execution of the current trigger is suspended
     and the others are considered using the same algorithm. There a maximum number of cascading triggerss,
     set at 32. When this maximum is reached, execution is suspended and an exception is raised.
     </li>
     <li class="itemize">
     <!--l. 936--><p class="noindent" >If  an  exception  is  raised  or  an  error  occurs,  the  changes  made  by  the  triggering  statement  and  the
     actions performed by triggers are rolled back. This means that Oracle supports partial rollback instead of
     transaction rollback.</li></ul>
<!--l. 942--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.2   </span> <a 
 id="x1-140002.2.2"></a>Instead-of triggers</h5>
<!--l. 944--><p class="noindent" >This is another type of Oracle trigger, in which the action is carried out inplace of the statement that produced the
activating event. These triggers are typically used to update views and they need to be carefully used, because changing
one action Y for an action X can sometimes have unexpected behaviors.
   <div class="newtheorem">
<!--l. 949--><p class="noindent" ><span class="head">
<a 
 id="x1-14001r8"></a>
<span 
class="ecbx-1000">Example 2.8.</span>  </span>An Instead-of trigger:
   <!--l. 952-->
<div class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-14002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">manager</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">insert</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">INSTEAD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Managers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCING</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROW</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">mgrno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">empno</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-14008r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">deptno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">deptno</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 963--><p class="indent" >   This trigger automatically updates the manager of a department when a new manager is inserted.
   </div>
<!--l. 965--><p class="indent" >
<!--l. 967--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-150002.3"></a>DB2</h4>
<!--l. 969--><p class="noindent" >In DB2, every trigger monitors a single event, and are activated immediately, BEFORE or AFTER their event. They
can be defined row-level or statement-level, as in Oracle. But in this case state-transition values can be accessed in both
granularities:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 974--><p class="noindent" >OLD and NEW refer to tuple granularity, as in Oracle.
     </li>
     <li class="itemize">
     <!--l. 975--><p class="noindent" >OLD_TABLE and NEW_TABLE refer to table granularity, like the DELETED and INSERTED in
     Starburst.</li></ul>
                                                                                            
                                                                                            
<!--l. 978--><p class="noindent" >DB2&#8217;s triggers cannot execute data definition nor transactional commands. They can raise errors which in turn can cause
statement-level rollbacks.
<!--l. 981--><p class="indent" >   The syntax is as in Table <a 
href="#x1-15012r4">4<!--tex4ht:ref: tab:DB2's-rule-definition-1 --></a>.
   <div class="table">
                                                                                            
                                                                                            
<!--l. 983--><p class="indent" >   <a 
 id="x1-15012r4"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<!--l. 984-->
<div class="lstlisting" id="listing-12"><span class="label"><a 
 id="x1-15001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">}</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCING</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">references</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">STATEMENT</span></span><span style="color:#000000"><span 
class="ectt-0800">}</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">SQL</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">condition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">SQL</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">procedure</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">statements</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15007r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">column</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">names</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">references</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OLD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">old</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">tuple</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">new</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">tuple</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OLD_TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">old</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW_TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">new</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span></div>
 <div class="caption" 
><span class="id">Table&#x00A0;4: </span><span  
class="content">DB2&#8217;s rule definition syntax.</span></div><!--tex4ht:label?: x1-15012r4 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   </div>
<!--l. 1001--><p class="indent" >   The processing is done as in Algorithm <a 
href="#x1-15030r3">3<!--tex4ht:ref: alg:Rule-Processing-2 --></a>. Note that:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1004--><p class="noindent" >Steps 1) and 6) are not required when S if part of an user transaction.
     </li>
     <li class="itemize">
     <!--l. 1005--><p class="noindent" >If an error occurs during the chain processing of S, then the prior DB state is restored.
     </li>
     <li class="itemize">
     <!--l. 1007--><p class="noindent" >IC refers to Integrity Constraints.</li></ul>
<a 
 id="x1-15013r3"></a>
<!--l. 1009--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
   <!--l. 1010-->
   <div class="lstlisting" id="listing-13"><span class="label"><a 
 id="x1-15014r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ACTIVATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">each</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">other</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15015r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">modification</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">statement</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">in</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">action</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">causes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15016r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SUSPEND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">execution</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SAVE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">its</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">data</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">on</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">stack</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15017r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">2)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">COMPUTE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OLD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15018r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">3)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXECUTE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">update</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15019r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">4)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">APPLY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">transition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">values</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DB</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15020r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IC</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">violated</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">by</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">current</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">with</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">action</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aj</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15021r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">COMPUTE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OLD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aj</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15022r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXECUTE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aj</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">update</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15023r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">APPLY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">transition</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">values</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DB</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15024r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PUSH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aj</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">into</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15025r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">queue</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">suspended</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15026r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXECUTE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">relative</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">to</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15027r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ANY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">them</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">contains</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">action</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aj</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">invoking</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">other</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">triggers</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15028r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REPEAT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RECURSIVELY</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-15029r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">POP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">stack</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">the</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">data</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">for</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">continue</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">its</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">evaluation</span></span></div>
   
<a 
 id="x1-15030r3"></a>
<a 
 id="x1-15031"></a>
                                <span 
class="ecbx-1000">Algorithm</span><span 
class="ecbx-1000">&#x00A0;3:</span>&#x00A0;processRules
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.1   </span> <a 
 id="x1-160002.3.1"></a>DB2 semantics</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1036--><p class="noindent" ><span 
class="ecbx-1000">Before-triggers</span>:  these  are  used  to  detect  error  conditions  and  to  condition  input  values.  They  are
     executed  entirely  before  the  associated  event  and  they  cannot  modify  the  DB  (to  avoid  recursively
     activating more triggers).
     </li>
     <li class="itemize">
     <!--l. 1040--><p class="noindent" ><span 
class="ecbx-1000">After-triggers</span>: these are used to embed part of the application logic in the DB. The condition is evaluated
     and the action is possibly executed after the event occurs. The state of the DB prior to the event can be
     reconstructed from transition values.
     </li>
     <li class="itemize">
     <!--l. 1044--><p class="noindent" >Several triggers can monitor the same event.
     </li>
     <li class="itemize">
     <!--l. 1045--><p class="noindent" >In this case, the order is total and entirely based on the creation time of the triggers. Row-level and
     statement-level triggers are intertwined in the total order.
     </li>
     <li class="itemize">
     <!--l. 1048--><p class="noindent" >If the action of a row-level trigger has several statements, they are all executed for one tuple before
     considering the next one.</li></ul>
<div class="newtheorem">
<!--l. 1051--><p class="noindent" ><span class="head">
<a 
 id="x1-16001r9"></a>
<span 
class="ecbx-1000">Example 2.9.</span>  </span>Imagine we have the following two tables:
<div class="center" 
>
<!--l. 1053--><p class="noindent" >
<div class="tabular"> <table id="TBL-13" class="tabular" 
 
><colgroup id="TBL-13-1g"><col 
id="TBL-13-1"></colgroup><colgroup id="TBL-13-2g"><col 
id="TBL-13-2"></colgroup><colgroup id="TBL-13-3g"><col 
id="TBL-13-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-13-1-1"  
class="td11">             <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Part</div>                    </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-1"  
class="td11"> PartNum </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-2"  
class="td11"> Supplier </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-2-3"  
class="td11"> Cost</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-1"  
class="td11">     1       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-2"  
class="td11">  Jones    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-3-3"  
class="td11">  150   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-4-1"  
class="td11">     2       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-4-2"  
class="td11">  Taylor   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-4-3"  
class="td11">  500   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-5-1"  
class="td11">     3       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-5-2"  
class="td11">  HDD    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-5-3"  
class="td11">  400   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-6-1"  
class="td11">     4       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-6-2"  
class="td11">  Jones    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-13-6-3"  
class="td11">  800   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-13-7-1"  
class="td11">          </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-14" class="tabular" 
 
><colgroup id="TBL-14-1g"><col 
id="TBL-14-1"></colgroup><colgroup id="TBL-14-2g"><col 
id="TBL-14-2"></colgroup><colgroup id="TBL-14-3g"><col 
id="TBL-14-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-14-1-1"  
class="td11">          <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Distributor</div>                </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-1"  
class="td11"> Name </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-2"  
class="td11"> City </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-2-3"  
class="td11"> State</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-1"  
class="td11">  Jones  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-2"  
class="td11">  Palo Alto   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-3-3"  
class="td11">  CA   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-4-1"  
class="td11"> Taylor  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-4-2"  
class="td11"> Minneapolis  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-4-3"  
class="td11">  MN   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-5-1"  
class="td11">  HDD   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-5-2"  
class="td11">   Atlanta     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-14-5-3"  
class="td11">  GA   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-14-6-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 1104--><p class="indent" >   And there is a referential integrity constraint that requires Part Suppliers to be also distributors, with HDD as a
default Supplier:
   <!--l. 1107-->
<div class="lstlisting" id="listing-14"><span class="label"><a 
 id="x1-16002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOREIGN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Supplier</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DEFAULT</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
                                                                                            
                                                                                            
<!--l. 1114--><p class="indent" >   Then, the following trigger is a row-level trigger that rollbacks when updating Supplier to NULL:
   <!--l. 1117-->
<div class="lstlisting" id="listing-15"><span class="label"><a 
 id="x1-16005r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OneSupplier</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16006r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">BEFORE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Supplier</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Part</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16007r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCING</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">N</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16008r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EACH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16009r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">N</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Supplier</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">is</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-16010r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SIGNAL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SQLSTATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">70005</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Cannot</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">change</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">supplier</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">to</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">NULL</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
</div>
<!--l. 1126--><p class="indent" >
<!--l. 1128--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.4   </span> <a 
 id="x1-170002.4"></a>SQL Server</h4>
<!--l. 1130--><p class="noindent" >In SQL Server, a single trigger can run multiple actions, and it can be fired by more than
one event. Also, triggers can be attached to tables or views. SQL Server does not support
BEFORE-triggers, but it supports AFTER-triggers (they can be defined using the word AFTER or
FOR<span class="footnote-mark"><a 
href="summary4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-17001f3"></a>  )
and INSTEAD OF-triggers.
<!--l. 1137--><p class="indent" >   The triggers can be fired with INSERT, UPDATE and DELETE statements.
<!--l. 1139--><p class="indent" >   The option WITH ENCRYPTION encrypts the text of the trigger in the syscomment table.
<!--l. 1142--><p class="indent" >   Finally, the option NOT FOR REPLICATION ensures that the trigger is not executed when a replication process
modifies the table to which the trigger is attached.
<!--l. 1146--><p class="indent" >   The syntax is shown in Table <a 
href="#x1-17011r5">5<!--tex4ht:ref: tab:SQLServer's-rule-definition-1 --></a>.
   <div class="table">
                                                                                            
                                                                                            
<!--l. 1148--><p class="indent" >   <a 
 id="x1-17011r5"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<!--l. 1149-->
<div class="lstlisting" id="listing-16"><span class="label"><a 
 id="x1-17002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">table</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ENCRYPTION</span></span><span style="color:#000000"><span 
class="ectt-0800">]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSTEAD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">}</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">list</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">events</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">APPEND</span></span><span style="color:#000000"><span 
class="ectt-0800">]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">[</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REPLICATION</span></span><span style="color:#000000"><span 
class="ectt-0800">]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">Transact</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">SQL</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">statements</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17008r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17009r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-17010r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">trigger</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">event</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">|</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span></div>
 <div class="caption" 
><span class="id">Table&#x00A0;5: </span><span  
class="content">SQL Server&#8217;s rule definition syntax.</span></div><!--tex4ht:label?: x1-17011r5 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
   </div>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1165--><p class="noindent" ><span 
class="ecbx-1000">INSTEAD OF-triggers</span>: are defined on a table or a view. Triggers defined on a view extend the types
     of updates that a view support by default. Only one per triggering action is allowed on a table or view.
     Note that views can be defined on other views, and each of them can have its own INSTEAD OF-triggers.
     </li>
     <li class="itemize">
     <!--l. 1170--><p class="noindent" ><span 
class="ecbx-1000">AFTER-triggers</span>: are defined on a table. Modifications to views in which the table data is modified in
     response, will fire the AFTER-triggers of the table. More than one is allowed on a table. The <span 
class="ecbx-1000">order of</span>
     <span 
class="ecbx-1000">execution </span>can be defined using the <span 
class="ecti-1000">sp_settriggerorder </span>procedure. All other triggers applied to a table
     execute in random order.</li></ul>
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.1   </span> <a 
 id="x1-180002.4.1"></a>SQL Server Semantics</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1180--><p class="noindent" >Both clases of triggers can be applied to a table.
     </li>
     <li class="itemize">
     <!--l. 1181--><p class="noindent" >If both trigger classes and constraints are defined for a table, the INSTEAD OF-trigger fires first. Then,
     constraints are processed and finally AFTER-triggers are fired.
     </li>
     <li class="itemize">
     <!--l. 1184--><p class="noindent" >If constraints are violated, INSTEAD OF-trigger&#8217;s actions are rolled back.
     </li>
     <li class="itemize">
     <!--l. 1186--><p class="noindent" >AFTER-triggers  do  not  execute  if  constraints  are  violated  or  if  some  other  event  causes  the  table
     modification to fail.
     </li>
     <li class="itemize">
     <!--l. 1188--><p class="noindent" >As stored procedures, triggers can be nested up to 32 levels deep and fired recursively.
     </li>
     <li class="itemize">
     <!--l. 1190--><p class="noindent" >Two transition tables are available: INSERTED and DELETED, which are as in Starburst.
     </li>
     <li class="itemize">
     <!--l. 1192--><p class="noindent" >The IF UPDATE(&#x003C;column-name&#x003E; clause determines whether an INSERT or UPDATE event ocurred to
     the column.
     </li>
     <li class="itemize">
     <!--l. 1194--><p class="noindent" >The COLUMNS_UPDATE() clause returns a bit pattern indicating fhich of the tested columns were
     isnerted or updated.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 1196--><p class="noindent" >The  @@ROWCOUNT  function  returns  the  number  of  rows  affected  by  the  previous  Transact-SQL
     statement in the trigger.
     </li>
     <li class="itemize">
     <!--l. 1198--><p class="noindent" >A trigger fires even if no rows are affected by the event. The RETURN command can be used to exit the
     trigger transparently when this happens.
     </li>
     <li class="itemize">
     <!--l. 1200--><p class="noindent" >The RAISERROR command is used to display error messages.
     </li>
     <li class="itemize">
     <!--l. 1201--><p class="noindent" >There are some Transact-SQL statements that are not allowd in triggers:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 1203--><p class="noindent" >ALTER, CREATE, DROP, RESTORE and LOAD DATABASE.
         </li>
         <li class="itemize">
         <!--l. 1204--><p class="noindent" >LOAD and RESTORE LOG.
         </li>
         <li class="itemize">
         <!--l. 1205--><p class="noindent" >DISK RESIZE and DISK INIT.
         </li>
         <li class="itemize">
         <!--l. 1206--><p class="noindent" >RECONFIGURE.</li></ul>
     </li>
     <li class="itemize">
     <!--l. 1208--><p class="noindent" >If in a trigger&#8217;s code it is needed to assign variables, then SET NOCOUNT ON must be included in the trigger
     code, disallowing the messages stating how many tuples were modified in each operation.</li></ul>
<!--l. 1213--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.2   </span> <a 
 id="x1-190002.4.2"></a>Limitations</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1215--><p class="noindent" >The INSTEAD OF DELETE and INSTEAD OF UPDATE triggers cannot be defined on tables that have
     a correspoonding ON DELETE or ON UPDATE cascading referential integrity defined.
     </li>
     <li class="itemize">
     <!--l. 1218--><p class="noindent" >Triggers cannot be created on a temporary or system table, but they can be referenced inside other
     triggers.</li></ul>
                                                                                            
                                                                                            
<!--l. 1222--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.3   </span> <a 
 id="x1-200002.4.3"></a>Nested and Recursive triggers</h5>
<!--l. 1224--><p class="noindent" >SQL Server enables to enable or disable nested and recursive triggers:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1226--><p class="noindent" ><span 
class="ecbx-1000">Nested trigger option</span>: determines whether a trigger can be executed in cascade. There is a limit of 32
     nested trigger operations. It can be set with <span 
class="ecti-1000">sp_configure &#8217;nested triggers&#8217;, 1 | 0</span>.
     </li>
     <li class="itemize">
     <!--l. 1229--><p class="noindent" ><span 
class="ecbx-1000">Recursive trigger option</span>: causes triggers to be re-fired when the trigger modifies the same table as
     it is attached to: the neste trigger option must be set to true. This option can be set with <span 
class="ecti-1000">sp_dboption</span>
     <span 
class="ecti-1000">&#8217;&#x003C;db-name&#x003E;&#8217;, &#8217;recursive triggers&#8217;, &#8217;TRUE&#8217; | &#8217;FALSE&#8217;</span>.
     <!--l. 1234--><p class="noindent" >Note that recursion can be <span 
class="ecbx-1000">direct </span>if a trigger activates another instance of itself or <span 
class="ecbx-1000">indirect </span>if the
     activation sequence is <span 
class="cmmi-10">T</span><sub><span 
class="cmr-7">1</span></sub> <span 
class="cmsy-10">&#x2192; </span><span 
class="cmmi-10">T</span><sub><span 
class="cmr-7">2</span></sub> <span 
class="cmsy-10">&#x2192; </span><span 
class="cmmi-10">T</span><sub><span 
class="cmr-7">1</span></sub>. The recursive trigger option only copes with the direct recursion,
     the indirect kind is dealt with the nested trigger option.</li></ul>
<!--l. 1241--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.4   </span> <a 
 id="x1-210002.4.4"></a>Trigger management</h5>
<!--l. 1243--><p class="noindent" >Trigger management includes the task of altering, renaming, viewing, dropping and disabling triggers:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1246--><p class="noindent" >Triggers can be modified with the ALTER TRIGGER statement, in which the new definition is provided.
     </li>
     <li class="itemize">
     <!--l. 1248--><p class="noindent" >Triggers can be renamed with the <span 
class="ecti-1000">sp_rename </span>system stored procedure as
     <div class="center" 
>
<!--l. 1250--><p class="noindent" >
<!--l. 1251--><p class="noindent" ><span 
class="ecti-1000">sp_rename @objname = &#x003C;old-name&#x003E;, @newname = &#x003C;new-name&#x003E;</span>
</div>
     </li>
     <li class="itemize">
     <!--l. 1253--><p class="noindent" >Triggers can be viewed by querying system tables or by using the <span 
class="ecti-1000">sp_helptrigger </span>and <span 
class="ecti-1000">sp_helptext </span>system stored
     procedures as
     <div class="center" 
>
<!--l. 1255--><p class="noindent" >
<!--l. 1256--><p class="noindent" ><span 
class="ecti-1000">sp_helptrigger @tabname = &#x003C;table-name&#x003E;</span>
</div>
     <div class="center" 
>
<!--l. 1259--><p class="noindent" >
<!--l. 1260--><p class="noindent" ><span 
class="ecti-1000">sp_helptext @objname = &#x003C;trigger-name&#x003E;</span>
</div>
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 1262--><p class="noindent" >Triggers can be deleted with the DROP TRIGGER statement.
     </li>
     <li class="itemize">
     <!--l. 1263--><p class="noindent" >Triggers can be enable and disable using the ENABLE TRIGGER and DISABLE TRIGGER clauses of the
     ALTER TABLE statement.</li></ul>
<div class="newtheorem">
<!--l. 1266--><p class="noindent" ><span class="head">
<a 
 id="x1-21001r10"></a>
<span 
class="ecbx-1000">Example 2.10.</span>  </span>Let&#8217;s work with a database with the following tables:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1269--><p class="noindent" ><span 
class="ectt-1000">Books(</span><span 
class="ectt-1000">TitleID</span><span 
class="ectt-1000">, Title, Publisher, PubDate, Edition, Cost, QtySold)</span>
     </li>
     <li class="itemize">
     <!--l. 1271--><p class="noindent" ><span 
class="ectt-1000">Orders(</span><span 
class="ectt-1000">OrderId</span><span 
class="ectt-1000">, CustomerId, Amount, OrderDate)</span>
     </li>
     <li class="itemize">
     <!--l. 1273--><p class="noindent" ><span 
class="ectt-1000">BookOrders(</span><span 
class="ectt-1000">OrderID,</span> <span 
class="ectt-1000">TitleId</span><span 
class="ectt-1000">, Qty)</span></li></ul>
<!--l. 1276--><p class="noindent" >Here, Books.QtySold is a derived attribute which keeps track of how many copies of the book has been sold. We can make
this updates automatic with the use of the following trigger:
   <!--l. 1280-->
<div class="lstlisting" id="listing-17"><span class="label"><a 
 id="x1-21002r1"></a><span 
class="ecrm-0900">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">update_book_qtysold</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BookOrders</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21003r2"></a><span 
class="ecrm-0900">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21004r3"></a><span 
class="ecrm-0900">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">add</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">if</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">insertion</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21005r4"></a><span 
class="ecrm-0900">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21006r5"></a><span 
class="ecrm-0900">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21007r6"></a><span 
class="ecrm-0900">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Books</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21008r7"></a><span 
class="ecrm-0900">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">QtySold</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">QtySold</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">+</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">sum</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Qty</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21009r8"></a><span 
class="ecrm-0900">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">i</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21010r9"></a><span 
class="ecrm-0900">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">titleId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">i</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">titleId</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21011r10"></a><span 
class="ecrm-0900">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">titleID</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">i</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">titleID</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">i</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21012r11"></a><span 
class="ecrm-0900">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21013r12"></a><span 
class="ecrm-0900">12</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">subtract</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">if</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">deletion</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21014r13"></a><span 
class="ecrm-0900">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21015r14"></a><span 
class="ecrm-0900">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21016r15"></a><span 
class="ecrm-0900">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Books</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21017r16"></a><span 
class="ecrm-0900">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">QtySold</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">QtySold</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">sum</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Qty</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21018r17"></a><span 
class="ecrm-0900">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21019r18"></a><span 
class="ecrm-0900">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">titleId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">titleId</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21020r19"></a><span 
class="ecrm-0900">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">titleID</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">titleID</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">d</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-21021r20"></a><span 
class="ecrm-0900">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1304--><p class="noindent" >When there is an insertion in BookOrders, the trigger fires and adds the corresponding quantity.
     </li>
     <li class="itemize">
     <!--l. 1306--><p class="noindent" >When there is a deletion, the trigger fires and subtracts the corresponding quantity.
     </li>
     <li class="itemize">
     <!--l. 1308--><p class="noindent" >An update creates both tables, so we would add and subtract to cope with the modification.</li></ul>
</div>
<!--l. 1311--><p class="indent" >
                                                                                            
                                                                                            
<!--l. 1313--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-220003"></a>Applications of Active Rules</h3>
<!--l. 1315--><p class="noindent" >Rules provide programmers with an effective tool to support both internal applications and external
applications:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1318--><p class="noindent" ><span 
class="ecbx-1000">Internal applications</span>: rules support function provided by specific subsystems in passive DBSMs, such
     as the management of IC, derived data, replicated data, version maintenance,... Rules can usually be
     declaratively specified, generated by the system and hidden to the user.
     </li>
     <li class="itemize">
     <!--l. 1323--><p class="noindent" ><span 
class="ecbx-1000">External applications</span>: these refer to the application of business rules to the data stored. Rules allow
     to perform computations that would usually need to be expressed in application code. In addition, rules
     provide many times a natural way to model reactive behavior of the data, as rules respond to external
     events and perform action in consequence. This approach becomes specially interested when rules express
     central policies, i.e., knowledge common to applications, centralizing the effort and reducing the cost.</li></ul>
<!--l. 1332--><p class="noindent" >Some examples of applications that can benefit from active technology and business rules are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1335--><p class="noindent" >Monitoring access to a building and reacting to abnormal circumstances.
     </li>
     <li class="itemize">
     <!--l. 1336--><p class="noindent" >Watching evolution of share values on stock market and triggering trading actions.
     </li>
     <li class="itemize">
     <!--l. 1338--><p class="noindent" >Managing inventory to follow stock variations.
     </li>
     <li class="itemize">
     <!--l. 1339--><p class="noindent" >Managing a netwrok to for energy distribution.
     </li>
     <li class="itemize">
     <!--l. 1340--><p class="noindent" >Airway assignment in air traffic control.</li></ul>
<!--l. 1342--><p class="noindent" >As can be seen from these examples, a frequent case of application-specific rules are <span 
class="ecbx-1000">alterters</span>, whose actions signal certain
conditions that occur with ot without changing the database.
<!--l. 1346--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-230003.1"></a>A summary of Integrity Constraints</h4>
<!--l. 1348--><p class="noindent" >The <span 
class="ecbx-1000">integrity </span>of a database refers to the consistency and conformity of the data with the database schema and its
constraints. Thus, an <span 
class="ecbx-1000">integrity constraint </span>is any assertion on the schema which is not defined in the data-structure
aprt of the schema. Constraints declaratively specify conditions to be satisfied by the data at all times, so checking for
integrity violations is done for every update of the state of the database.
<!--l. 1356--><p class="indent" >   Integrity constraints can be <span 
class="ecbx-1000">static </span>if the predicates are evaluated on database states or <span 
class="ecbx-1000">dynamic </span>if the predicates
are evaluated on state transitions. They can also be classified as <span 
class="ecbx-1000">built-in </span>if they are defined by special DDL (Data
Definition Language) constructs (such as keys, nonnull values,...) or <span 
class="ecbx-1000">adhoc</span>, which are arbitrarily complex
domain-dependent constraints.
<!--l. 1363--><p class="indent" >   In practice, integrity maintenance is achieved through:
                                                                                            
                                                                                            
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1365--><p class="noindent" >DBMS checks built-in constraint with automatically generated triggers.
     </li>
     <li class="itemize">
     <!--l. 1366--><p class="noindent" >DBMS supports limited forms of adhoc constraints.
     </li>
     <li class="itemize">
     <!--l. 1367--><p class="noindent" >The remaining constraints are implemented as active rules (triggers).</li></ul>
<!--l. 1369--><p class="noindent" >The process of <span 
class="ecbx-1000">rule generation </span>may be partially automated:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-23002x1">
     <!--l. 1371--><p class="noindent" >The possible causes of violation are the events for the activation of the rule.
     </li>
<li 
  class="enumerate" id="x1-23004x2">
     <!--l. 1373--><p class="noindent" >The declarative formulation of the constraint is the rule condition.
     </li>
<li 
  class="enumerate" id="x1-23006x3">
     <!--l. 1374--><p class="noindent" >To avoid or eliminate the violation, an action is taken. The simplest approach is to rollback the transaction,
     this is done by <span 
class="ecbx-1000">abort rules</span>, in contrast, the richer approach provides a domain-dependent corrective
     action, via <span 
class="ecbx-1000">repair rules</span>.</li></ol>
<!--l. 1379--><p class="noindent" >Thus:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1381--><p class="noindent" ><span 
class="ecbx-1000">Abort rules </span>check that integrity is not violation and prevent the execution of an operation which would
     cause the violation of the integrity by means of the ROLLBACK command.
     </li>
     <li class="itemize">
     <!--l. 1384--><p class="noindent" ><span 
class="ecbx-1000">Repair rules </span>are more sophisticated than abort rules, because they make use of application-domain
     semantics to define a set of actions that restore integrity</li></ul>
<div class="newtheorem">
<!--l. 1388--><p class="noindent" ><span class="head">
<a 
 id="x1-23007r1"></a>
<span 
class="ecbx-1000">Example 3.1.</span>  </span>Let&#8217;s do a referential integrity example in Starburst:
<!--l. 1391--><p class="indent" >   We have relations <span 
class="ectt-1000">Emp(</span><span 
class="ectt-1000">EmpNo</span><span 
class="ectt-1000">,DeptNo) </span>and <span 
class="ectt-1000">Dept(</span><span 
class="ectt-1000">DNo</span><span 
class="ectt-1000">)</span>. We have the regerential integrity condition
   <div class="math-display" >
                                                                                            
                                                                                            
<img 
src="summary0x.png" alt="Emp  [DeptN o] &#x2282; Dept[DN o],
" class="math-display" ></div>
<!--l. 1397--><p class="indent" >   so the possible violations can come from an INSERT into Emp, a DELETE from Dept, and UPDATE of
Emp[DeptNo] and an update of Dept[Dno]. The condition on tuples of Emp for not violating the constraint is:
   <!--l. 1401-->
<div class="lstlisting" id="listing-18"><span class="label"><a 
 id="x1-23008r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 1406--><p class="indent" >   Its denial form, so the constraint is violated is:
   <!--l. 1408-->
<div class="lstlisting" id="listing-19"><span class="label"><a 
 id="x1-23009r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 1413--><p class="indent" >   Thus, we can create abort rules as:
   <!--l. 1415-->
<div class="lstlisting" id="listing-20"><span class="label"><a 
 id="x1-23010r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptEmp1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23011r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23012r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23013r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23014r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23015r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23016r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptEmp2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23017r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23018r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23019r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23020r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1430--><p class="indent" >   Note that one rule is neccessary for each relation.
<!--l. 1432--><p class="indent" >   Note also that the defined rules are inneficient, because the computation of the condition checks the whole database.
Rules can assume that the constraint is verified in the initial state, so it suffices to compute the condition relative to
transition tables.
<!--l. 1437--><p class="indent" >   Now, we are defining a repair rule that:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1439--><p class="noindent" >If an employee is inserted with a wrong value of DeptNo, it is set to NULL.
     </li>
     <li class="itemize">
     <!--l. 1441--><p class="noindent" >If the DeptNo of an employee is updated with a wrong value of DeptNo, it is set to 99.
     </li>
     <li class="itemize">
     <!--l. 1443--><p class="noindent" >If a department is deleted or its DNo is updated, then all employees from this department are deleted.</li></ul>
<!--l. 1446-->
<div class="lstlisting" id="listing-21"><span class="label"><a 
 id="x1-23021r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptEmp1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23022r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23023r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23024r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23025r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23026r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23027r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23028r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23029r9"></a><span 
class="ecrm-0500">9</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23030r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptEmp2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23031r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23032r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23033r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23034r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23035r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">99</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23036r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">EmpNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23037r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23038r18"></a><span 
class="ecrm-0500">18</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23039r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptEmp3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23040r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23041r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23042r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23043r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-23044r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
</div>
<!--l. 1473--><p class="indent" >
<!--l. 1475--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-240003.2"></a>Management of Derived Data</h4>
<!--l. 1477--><p class="noindent" >A <span 
class="ecbx-1000">view </span>can be seen as a query on the DB which returns a relation or a class that can be used as any other relation or
class. A <span 
class="ecbx-1000">derived attribute </span>is an attribute that can be computed from other attributes in the DB. Both a view and a
derived attribute can be expressed with declarative query language or deductive rules. There are two strategies for
derived data:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-24002x1">
     <!--l. 1484--><p class="noindent" ><span 
class="ecbx-1000">Virtually supported</span>: their content is computed on demand.
                                                                                            
                                                                                            
     </li>
<li 
  class="enumerate" id="x1-24004x2">
     <!--l. 1485--><p class="noindent" ><span 
class="ecbx-1000">Materialized</span>: their content is stored in the database, and it must be recomputed whenever the source
     of data is changed.</li></ol>
<!--l. 1489--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.2.1   </span> <a 
 id="x1-250003.2.1"></a>Virtual views with rules</h5>
<!--l. 1491--><p class="noindent" >When an application queries a view, a rule is triggered on the request and the action substitutes and
evaluates the view definition. It requires an event, triggered by queries, and an INSTEAD OF clause in rule
language.
<!--l. 1495--><p class="indent" >   There exist two basic strategies:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1497--><p class="noindent" ><span 
class="ecbx-1000">Refresh</span>: recompute the view from scratch after each update of the source data.
     </li>
     <li class="itemize">
     <!--l. 1499--><p class="noindent" ><span 
class="ecbx-1000">Incremental</span>: compute changes to the view from changes in the source relations, using positive and
     negative deltas (a <span 
class="ecbx-1000">delta </span>shows the changes experienced in the database. INSERTED and DELETED are
     one way to implement deltas).</li></ul>
<!--l. 1504--><p class="noindent" >The rule generation can be automated. Refresh rules are simple, but can be very inefficient. On the other hand, incremental
rules depend on the structure of derivation rules, and can be complex.
   <div class="newtheorem">
<!--l. 1507--><p class="noindent" ><span class="head">
<a 
 id="x1-25001r2"></a>
<span 
class="ecbx-1000">Example 3.2.</span>  </span>Imagine we have the following view definition:
   <!--l. 1510-->
<div class="lstlisting" id="listing-22"><span class="label"><a 
 id="x1-25002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">DEFINE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">50000)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1517--><p class="indent" >   So this view holds are departments in which some employee earns more than 50k<span 
class="tcrm-1000">&#x20AC; </span>a year. This view can change
whenever an employee is inserted or deleted, its department is changed or is salary is changed; and whenever a
department is inserted or deleted, or its Dno is updated.
<!--l. 1522--><p class="indent" >   A refresh rule defined in Starburst to handle this changes is:
   <!--l. 1524-->
<div class="lstlisting" id="listing-23"><span class="label"><a 
 id="x1-25006r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RefreshHighPaidDept1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25007r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25008r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25009r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25010r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25011r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25012r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">50000)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25013r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25014r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RefreshHighPaidDept2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25015r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Dno</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25016r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25017r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25018r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25019r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25020r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">50000)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1543--><p class="indent" >   As we can see, all elements from the view are deleted, and the view is recomputed entirely. The incremental
approach is more complex. As an example, let&#8217;s define the rule for the case of Insert Dept:
   <!--l. 1547-->
<div class="lstlisting" id="listing-24"><span class="label"><a 
 id="x1-25021r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IncHighPaidDept1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25022r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25023r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighPaidDept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25024r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25025r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-25026r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dno</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DeptNo</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Emp</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">50000)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
   </div>
<!--l. 1555--><p class="indent" >
                                                                                            
                                                                                            
<!--l. 1557--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.2.2   </span> <a 
 id="x1-260003.2.2"></a>Replication with rules</h5>
<!--l. 1559--><p class="noindent" >Replication consists on storing several copies of the same information. This is a common practice in distributed
databases. Keeping <span 
class="ecbx-1000">fully synchronized copies </span>is usually very costly and unnecessary, so it is common to use
aynchronous techniques to propagate changes between nodes.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1565--><p class="noindent" ><span 
class="ecbx-1000">Assymmetric replication</span>: in this case there exists a primary copy, in which changes are performed,
     and several secondary copies, which are read only and are updated asynchronously. The <span 
class="ecbx-1000">capture module</span>
     monitors changes made by applications to the primary copy, and the <span 
class="ecbx-1000">application module </span>propagates
     these changes to the secondary copies.
     </li>
     <li class="itemize">
     <!--l. 1571--><p class="noindent" ><span 
class="ecbx-1000">Symmetric replication</span>: all copies accept updates asynchronously and each of them has a capture and an
     application modules. It is needed to be careful, because simultaneous updates may cause loss of consistency.</li></ul>
<div class="newtheorem">
<!--l. 1575--><p class="noindent" ><span class="head">
<a 
 id="x1-26001r3"></a>
<span 
class="ecbx-1000">Example 3.3.</span>  </span>An example of capturing changes into deltas in Starburst:
   <!--l. 1578-->
<div class="lstlisting" id="listing-25"><span class="label"><a 
 id="x1-26002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Capture1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PrimaryCopy</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PosDelta</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26005r4"></a><span 
class="ecrm-0500">4</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Capture2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PrimaryCopy</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26008r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NegDelta</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26009r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26010r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RULE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Capture3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PrimaryCopy</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26011r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">UPDATED</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26012r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PosDelta</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-26013r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NegDelta</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DELETED</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1593--><p class="indent" >   The deltas are applied to the copies with a predefined policy, e.g. once very hour.
</div>
<!--l. 1595--><p class="indent" >
<!--l. 1597--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-270003.3"></a>Business Rules: Advantages and Difficulties</h4>
<!--l. 1599--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.1   </span> <a 
 id="x1-280003.3.1"></a>Advantages</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1601--><p class="noindent" >Active rules can impose a central consistent behavior independent of the transactions that cause their
     execution.
     </li>
     <li class="itemize">
     <!--l. 1603--><p class="noindent" >Active rules enforce data management policies that no transaction can violate.
     </li>
     <li class="itemize">
     <!--l. 1605--><p class="noindent" >Activities redundantly coded in several applications programs with passive DBMSs can be abstracted in
     a single version as a rule in an active DBMS.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 1608--><p class="noindent" >Data management policies can evolve by just modifying the rules on the database, instead of the application
     programs (<span 
class="ecbx-1000">knowledge independence</span>).</li></ul>
<!--l. 1613--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.2   </span> <a 
 id="x1-290003.3.2"></a>Dificulties</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1615--><p class="noindent" >Rule organization and content are often hard to control and to specify declaratively (i.e. the rules are hard
     to code!).
     </li>
     <li class="itemize">
     <!--l. 1617--><p class="noindent" >Understanding active rules can be difficult, because they can react to intricate event sequences and the
     outcome of rule processing can depend on the order of the event ocurrences and the rule scheduling, which
     can be hard to analyze in complex systems.
     </li>
     <li class="itemize">
     <!--l. 1621--><p class="noindent" >There are no easy-to-use nor one-fits-all techniques for designing, debugging, verifying and monitoring
     rules.</li></ul>
<!--l. 1625--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-300003.4"></a>A case study: Energy Management System</h4>
<!--l. 1627--><p class="noindent" >This is an example of an application modeled with active rules, covering the business process:
<div class="center" 
>
<!--l. 1629--><p class="noindent" >
<!--l. 1630--><p class="noindent" ><span 
class="ecti-1000">&#8217;Management of the Italian electrical power distribution network.&#8217;</span>
</div>
<!--l. 1633--><p class="indent" >   The operational network is a forest of trees, connecting power distributors to users. The operating conditions are
monitored constantly with frequent reconfigurations: the structure of the network is dynamic. The topology is modified
less frequently (we can consider it static). The <span 
class="ecbx-1000">objective </span>is to transfer the exact power from distributors to users
through nodes and directed branches connecting pairs of nodes.
<!--l. 1640--><p class="indent" >   In this scenario, active rules are used to respond to input transactions asking for:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1643--><p class="noindent" >Reconfigurations due to new users.
     </li>
     <li class="itemize">
     <!--l. 1644--><p class="noindent" >Changes in their required power.
     </li>
     <li class="itemize">
     <!--l. 1645--><p class="noindent" >Changes in the assignment of wires.</li></ul>
                                                                                            
                                                                                            
<!--l. 1647--><p class="noindent" >The <span 
class="ecbx-1000">schema </span>of the database is:
          <dl class="list1"><dt class="list">
<span 
class="ectt-1000">User(</span><span 
class="ectt-1000">UserId</span><span 
class="ectt-1000">,</span> </dt><dd 
class="list">
          <!--l. 1649--><p class="noindent" ><span 
class="ectt-1000">BranchIn, Power) foreign key (BranchIn) References Branch</span>
          </dd><dt class="list">
<span 
class="ectt-1000">Branch(</span><span 
class="ectt-1000">BranchId</span><span 
class="ectt-1000">,</span> </dt><dd 
class="list">
          <!--l. 1651--><p class="noindent" ><span 
class="ectt-1000">FromNode, ToNode, Power)</span>
          </dd><dt class="list">
<span 
class="ectt-1000">Node(</span><span 
class="ectt-1000">NodeId</span><span 
class="ectt-1000">,</span> </dt><dd 
class="list">
          <!--l. 1653--><p class="noindent" ><span 
class="ectt-1000">BranchIn, Power) foreign key (BranchIn) References Branch</span>
          </dd><dt class="list">
<span 
class="ectt-1000">Distributor(</span><span 
class="ectt-1000">NodeId</span><span 
class="ectt-1000">,</span> </dt><dd 
class="list">
          <!--l. 1655--><p class="noindent" ><span 
class="ectt-1000">Power, MaxPower)</span>
          </dd><dt class="list">
<span 
class="ectt-1000">Wire(</span><span 
class="ectt-1000">WireId</span><span 
class="ectt-1000">,</span> </dt><dd 
class="list">
          <!--l. 1657--><p class="noindent" ><span 
class="ectt-1000">BranchId, WireType, Power) foreign key (BranchId) references Branch foreign key</span>
          <span 
class="ectt-1000">(WirteType) references WireType</span>
          </dd><dt class="list">
WireType(WireTypeId, </dt><dd 
class="list">
          <!--l. 1660--><p class="noindent" >MaxPower)</dd></dl>
<!--l. 1662--><p class="noindent" >The network is composed of sites anc onnections between pairs of sites:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1664--><p class="noindent" >Sites comprise:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 1666--><p class="noindent" >Power stations: distributors where power is generated and fed into the network.
         </li>
         <li class="itemize">
         <!--l. 1668--><p class="noindent" >Intermediate nodes: nodes where power is transferred to be redistributed across the network.
         </li>
         <li class="itemize">
         <!--l. 1670--><p class="noindent" >Final users of electrical power.</li></ul>
     </li>
     <li class="itemize">
     <!--l. 1672--><p class="noindent" >Connections are called branches:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 1674--><p class="noindent" >class Branch describes all connections between pairs of sites.
         </li>
         <li class="itemize">
         <!--l. 1675--><p class="noindent" >Several Wires are placed along the branches.
         </li>
         <li class="itemize">
         <!--l. 1676--><p class="noindent" >Wires are made of a given WireType, each type carrying a maximum power.
                                                                                            
                                                                                            
         </li>
         <li class="itemize">
         <!--l. 1677--><p class="noindent" >Branches can be dinamically added or dropeed to the network.</li></ul>
     </li></ul>
<!--l. 1680--><p class="noindent" >The <span 
class="ecbx-1000">business rules </span>are the following:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 1682--><p class="noindent" >Several user requests are gathered in a transaction.
     </li>
     <li class="itemize">
     <!--l. 1683--><p class="noindent" >If the power requested on wires excees the maximum power of the wire type, rules change or add wires in
     the relevant branches.
     </li>
     <li class="itemize">
     <!--l. 1685--><p class="noindent" >Rules propagate changes up in the tree, adapting the network to new user needs.
     </li>
     <li class="itemize">
     <!--l. 1687--><p class="noindent" >A transaction fails if the maximum power requested from some distributor exceeds the maximum power
     available at the distributor (in that case, the static network needs to be redesigned, but this is out of our
     scope).
     </li>
     <li class="itemize">
     <!--l. 1691--><p class="noindent" >To avoid unnecessary rollbacks, rules propagate reductions of power first, then increases of power. This
     requires setting the order in which the triggers execute<span class="footnote-mark"><a 
href="summary5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-30001f4"></a>  .</li></ul>
<!--l. 1697--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.1   </span> <a 
 id="x1-310003.4.1"></a>Connect a new user</h5>
<!--l. 1699--><p class="noindent" >A new user is connecting to a node with the following procedure:
   <!--l. 1701-->
<div class="lstlisting" id="listing-26"><span class="label"><a 
 id="x1-31001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PROCEDURE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">insertUser</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@Node</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">int</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DECLARE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@User</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXEC</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@User</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">nextUserId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXEC</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">nextBranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXEC</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">nextWireId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromNode</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@User</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Node</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">WT1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">User</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-31011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@User</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1716--><p class="indent" >   The node to which a user is connected is determined by an external application: usually its closest node. &#8217;WT1&#8217; is
the basic wire type. nextUserId, nextBranchId and nextWireId procedures are used to obtain the next identifier of a
user, branch or wire.
<!--l. 1721--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.2   </span> <a 
 id="x1-320003.4.2"></a>Propagation of power reduction from a user</h5>
<!--l. 1723--><p class="noindent" >If a user requires less power, this change needs to be propagated to its input branch:
   <!--l. 1726-->
<div class="lstlisting" id="listing-27"><span class="label"><a 
 id="x1-32001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1_User_Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">User</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">user</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">decreased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Decrease</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-32013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
                                                                                            
                                                                                            
<!--l. 1744--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.3   </span> <a 
 id="x1-330003.4.3"></a>Propagation of power reduction from a node</h5>
<!--l. 1746--><p class="noindent" >If a node require less power, propagate the change to its input branch:
   <!--l. 1748-->
<div class="lstlisting" id="listing-28"><span class="label"><a 
 id="x1-33001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2_Node_Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">decreased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Decrease</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-33013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1766--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.4   </span> <a 
 id="x1-340003.4.4"></a>Propagation of power reduction from a branch to a node</h5>
<!--l. 1768--><p class="noindent" >If a branch connected to a node requires less power, propagate the change to its input node.
   <!--l. 1771-->
<div class="lstlisting" id="listing-29"><span class="label"><a 
 id="x1-34001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T3_Branch_Node</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">decreased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">toNode</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">foreign</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">key</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">so</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">need</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Decrease</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">toNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-34014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1790--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.5   </span> <a 
 id="x1-350003.4.5"></a>Propagation of power reduction from a branch to a distributor</h5>
<!--l. 1792--><p class="noindent" >If a branch connected to a distributor requires less power, propagate the change to the distributor.
   <!--l. 1795-->
<div class="lstlisting" id="listing-30"><span class="label"><a 
 id="x1-35001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T4_Branch_Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">decreased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">toNode</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">foreign</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">key</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">so</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">need</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">distributor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Decrease</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-35014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1814--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.6   </span> <a 
 id="x1-360003.4.6"></a>Propagation of power increase from a user</h5>
<!--l. 1816--><p class="noindent" >If a user requires more power, propagate the change to its input branch.
   <!--l. 1818-->
<div class="lstlisting" id="listing-31"><span class="label"><a 
 id="x1-36001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T5_User_Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">User</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">user</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">increased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Increase</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">UserId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-36013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1836--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.7   </span> <a 
 id="x1-370003.4.7"></a>Propagation of power increase from a node</h5>
<!--l. 1838--><p class="noindent" >If a node require more power, propagate the change to its input branch:
   <!--l. 1840-->
<div class="lstlisting" id="listing-32"><span class="label"><a 
 id="x1-37001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T6_Node_Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">increased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Increase</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-37013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1858--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.8   </span> <a 
 id="x1-380003.4.8"></a>Propagation of power increase from a branch to a node</h5>
<!--l. 1860--><p class="noindent" >If a branch connected to a node requires more power, propagate the change to its input node.
   <!--l. 1863-->
<div class="lstlisting" id="listing-33"><span class="label"><a 
 id="x1-38001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T7_Branch_Node</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">increased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">toNode</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">foreign</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">key</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">so</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">need</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Node</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Increase</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">toNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-38014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
                                                                                            
                                                                                            
<!--l. 1882--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.9   </span> <a 
 id="x1-390003.4.9"></a>Propagation of power increase from a branch to a distributor</h5>
<!--l. 1884--><p class="noindent" >If a branch connected to a distributor requires more power, propagate the change to the distributor.
   <!--l. 1887-->
<div class="lstlisting" id="listing-34"><span class="label"><a 
 id="x1-39001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T8_Branch_Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">branch</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">increased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">toNode</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">foreign</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">key</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">so</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">need</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">distributor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Increase</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToNode</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">node</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">NodeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchIn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-39014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1906--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.10   </span> <a 
 id="x1-400003.4.10"></a>Excess power requested from a distributor</h5>
<!--l. 1908--><p class="noindent" >If the power requested from a distributor exceeds its maximum, rollback the entire transaction.
   <!--l. 1911-->
<div class="lstlisting" id="listing-35"><span class="label"><a 
 id="x1-40001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T9_Distributor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Distributor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">some</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">distributor</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">has</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">increased</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consumption</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">exceeding</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">its</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">maximum</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">capacity</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">13000</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Maximum</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">capacity</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">the</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">distributor</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">exceeded</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-40008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1924--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.11   </span> <a 
 id="x1-410003.4.11"></a>Propagate power change from a branch to its wires</h5>
<!--l. 1926--><p class="noindent" >If the power of a branch is changed, distributes the change equally on its wires.
   <!--l. 1929-->
<div class="lstlisting" id="listing-36"><span class="label"><a 
 id="x1-41001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T10_Branch_Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Divide</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">difference</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">past</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">new</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">among</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">all</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">wires</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">subtract</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">from</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">every</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">note</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">that</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">this</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">works</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">independently</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sign</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">change</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Deleted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">D</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">/</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(*)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Branch</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-41016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1950--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.12   </span> <a 
 id="x1-420003.4.12"></a>Change wire type if power passess threshold</h5>
<!--l. 1952--><p class="noindent" >If the power on a wire goes above the allowed threshold, change the wire type.
   <!--l. 1955-->
<div class="lstlisting" id="listing-37"><span class="label"><a 
 id="x1-42001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T11_Wire_Type</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">on</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">overpass</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">maximum</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">allowed</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">And</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">there</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">a</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">wiretype</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">which</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">can</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">accept</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">higher</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">There</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">no</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">different</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">types</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">with</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">maxPower</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">so</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">take</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">first</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">wireType</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">whose</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">maxPower</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sufficient</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">IN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INSERTED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">make</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">take</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">appropriate</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">WireId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42017r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-42018r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 1978--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.13   </span> <a 
 id="x1-430003.4.13"></a>Add a wire to a branch</h5>
<!--l. 1980--><p class="noindent" >If there is no suitable wire type, add another wire to the branch.
   <!--l. 1982-->
<div class="lstlisting" id="listing-38"><span class="label"><a 
 id="x1-43001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T12_Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">on</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">AFTER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">requested</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">power</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">greater</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">than</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">allowed</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">every</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">wiretype</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DECLARE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@nextWire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">char</span></span><span style="color:#000000"><span 
class="ectt-0800">(3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">real</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">real</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DECLARE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CURSOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Inserted</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OPEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FETCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NEXT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@MaxPower</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WHILE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@@FETCH_STATUS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43017r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43018r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXEC</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@nextWire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">nextWireId</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43019r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@nextWire</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">WT1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">-0.8*</span></span><span style="color:#000000"><span 
class="ectt-0800">@MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43020r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FETCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NEXT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@WireId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@BranchId</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@Power</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@MaxPower</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43021r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43022r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CLOSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43023r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DEALLOCATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">wires_cursor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43024r24"></a><span 
class="ecrm-0500">24</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43025r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Wire</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43026r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.8*</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WT</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">WireTypeId</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43027r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Power</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxPower</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WireType</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-43028r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2014--><p class="indent" >
                                                                                            
                                                                                            
   <h1 class="partHead"><span class="titlemark">Part&#x00A0;II<br /></span><a 
 id="x1-44000II"></a>Graph Databases</h1>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-450004"></a>Introduction</h3>
<!--l. 2020--><p class="noindent" >Relational DBMSs are too rigid for Big Data scenarios, and not the best option for storing unstructured data.
The one-size-fits-all approach is no longer valid in many scenarios and RDBMSs are hard to scale for
billions of rows, because data structures used in RDBMSs are optimized for systems with small amounts of
memory.
<!--l. 2026--><p class="indent" >   <span 
class="ecbx-1000">NoSQL technologies </span>do not use the relational model for storing data nor retrieving it. Also, they don&#8217;t generally
have the concept of schema, so fields can be added to any record as desired, without control. These characteristics
provide ease to run on clusters as well as an increased scaling capability, with horizontal scalability in mind. But these
gains are not free: there is a trade-off in which the traditional concept of consistency gets harmed. For
example, ACID (Atomic, Consistent, Isolated, Durable) transactions are not fully supported most of the
times.
<!--l. 2036--><p class="indent" >   There are several types of NoSQL databases, such as Key-Value stores, Column stores, Document databases,... We
are going to focus on Graph Databases.
<!--l. 2040--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-460004.1"></a>CAP theorem</h4>
   <div class="tcolorbox tcolorbox" id="tcolobox-8">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 2043--><p class="noindent" ><span class="head">
<a 
 id="x1-46001r1"></a>
<span 
class="ecbx-1000">Definition 4.1.</span>   </span>The <span 
class="ecbx-1000">consistency </span>of a database is fullfilled when all updates happen equally for all
users of the database.
<!--l. 2047--><p class="noindent" >The <span 
class="ecbx-1000">availability </span>guarantees that every request receives a response, whether it succeeded or failed.
<!--l. 2050--><p class="noindent" >The <span 
class="ecbx-1000">partition tolerance </span>means that the system is able to operate despite arbitrary message lost or
failure of part of the system.
</div>
<!--l. 2052--><p class="noindent" >
 
</div> 
</div>
<!--l. 2055--><p class="noindent" >A database has, ideally, this three properties fullfilled. But the CAP theorem ensures that this is impossible:
   <div class="tcolorbox tcolorbox" id="tcolobox-9">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 2059--><p class="noindent" ><span class="head">
<a 
 id="x1-46002r1"></a>
<span 
class="ecbx-1000">Theorem 4.1.</span>   </span><span 
class="ecbi-1000">CAP Theorem</span>
<!--l. 2062--><p class="noindent" ><span 
class="ecti-1000">A distributed data system cannot guarantee consistency (C), availability (A) and partition tolerance (P),</span>
<span 
class="ecti-1000">but only any combination of two of them.</span>
</div>
<!--l. 2065--><p class="noindent" >
 
</div> 
</div>
   <div class="newtheorem">
<!--l. 2068--><p class="noindent" ><span class="head">
<a 
 id="x1-46003r1"></a>
                                                                                            
                                                                                            
<span 
class="ecti-1000">Remark </span>4.1<span 
class="ecti-1000">.</span>  </span>If the system needs to be distributed, then partition tolerance is a must. So, in practice, there is
a decision to choose between fullfilling consistency or availability for distributed systems.
   </div>
<!--l. 2072--><p class="indent" >
   <div class="newtheorem">
<!--l. 2074--><p class="noindent" ><span class="head">
<a 
 id="x1-46004r2"></a>
<span 
class="ecti-1000">Remark </span>4.2<span 
class="ecti-1000">.</span>  </span>Nonetheless, even the perfect form of the three properties cannot be guaranteed at once, it is
possible to provide fairly good levels of the one that is not optimal.
   </div>
<!--l. 2078--><p class="indent" >
<div class="tcolorbox tcolorbox" id="tcolobox-10">    
<div class="tcolorbox-title">
   </div> 
<div class="tcolorbox-content"><div class="newtheorem">
<!--l. 2080--><p class="noindent" ><span class="head">
<a 
 id="x1-46005r2"></a>
<span 
class="ecbx-1000">Definition 4.2.</span>   </span>The <span 
class="ecbx-1000">eventual consistency assumption</span>: in the absence of new writes, consistency
will be acheived eventually, and all replicas that are responsible for a data item will agree on the same
version and return the last updated value.
</div>
<!--l. 2085--><p class="noindent" >
 
</div> 
</div>
<!--l. 2088--><p class="indent" >   With fewer replicas in the system, R/W operations complete more quickly, improving latency.
<!--l. 2091--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-470004.2"></a>Graph DB model: graphs</h4>
<!--l. 2093--><p class="noindent" >In graph databases, the <span 
class="ecbx-1000">data and/or the schema </span>are represented by graphs, or by data structures that generalize the
notion of graph: hypergraphs.
<!--l. 2097--><p class="indent" >   The <span 
class="ecbx-1000">integrity constraints </span>enforce data consistency. Constraints can be grouped in: schema-instance consistency,
identity and referencial integrity, and functional and inclusion dependencies.
<!--l. 2101--><p class="indent" >   The <span 
class="ecbx-1000">data manipulation </span>is expressed by graph transfromations, or by operations whose main primitives are on
graph features, like paths, neighborhoods, subgraphs, connectivity and graph statistics.
<!--l. 2105--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3   </span> <a 
 id="x1-480004.3"></a>The Resource Description Framework (RDF) Model</h4>
<!--l. 2107--><p class="noindent" >RDF allows to express facts, such as <span 
class="ecti-1000">&#8217;Ana is the mother of Julia.</span>&#8217;, but we&#8217;d like to be able to express more generic
knowledge, like <span 
class="ecti-1000">&#8217;If somebody has a daughter, then that person is a parent.&#8217;</span>. This kind of knowledge is called <span 
class="ecbx-1000">schema</span>
<span 
class="ecbx-1000">knowledge</span>. The RDF schema allows us to do some schema knowledge modeling, and the Ontology Web Language
(OWL) gives even more expressivity.
<!--l. 2114--><p class="indent" >   A <span 
class="ecbx-1000">class </span>is a set of things or resources. In RDF, everything is a <span 
class="ecbx-1000">resource</span>, that belongs to a class (or
several classes). The classes can be arranged in <span 
class="ecbx-1000">hierarchies</span>. Every resource is a member of the class
<span 
class="ecss-1000">rdfs:Class</span>.
   <div class="newtheorem">
<!--l. 2118--><p class="noindent" ><span class="head">
<a 
 id="x1-48001r1"></a>
                                                                                            
                                                                                            
<span 
class="ecbx-1000">Example 4.1.</span>  </span>A hierarchy of classes in RDF:
<!--l. 2121--><p class="indent" >   <img 
src="1_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_rdf_0.png" alt="PIC"  
width="43" height="43" >
   </div>
<!--l. 2122--><p class="indent" >
The different resources are labelled with:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2125--><p class="noindent" ><span 
class="ectt-1000">rdfs:Resource</span>: class of all resources.
     </li>
     <li class="itemize">
     <!--l. 2126--><p class="noindent" ><span 
class="ectt-1000">rdf:Property</span>: class of all properties.
     </li>
     <li class="itemize">
     <!--l. 2127--><p class="noindent" ><span 
class="ectt-1000">rdfs:XMLLiteral</span>: class of XML resources.
     </li>
     <li class="itemize">
     <!--l. 2128--><p class="noindent" ><span 
class="ectt-1000">rdfs:Literal</span>: each datatype is a subclass.
     </li>
     <li class="itemize">
     <!--l. 2129--><p class="noindent" ><span 
class="ectt-1000">rdfs:Bag, rdf:Alt, rdf:Seq, rdfs:Container, rdf:List, rdf:nil,</span>
     <span 
class="ectt-1000">rdfs:ContainerMembershipProperty.</span>
     </li>
     <li class="itemize">
     <!--l. 2131--><p class="noindent" ><span 
class="ectt-1000">rdfs:Datatype</span>: class of all datatypes.
     </li>
     <li class="itemize">
     <!--l. 2132--><p class="noindent" ><span 
class="ectt-1000">rdfs:Statement</span>.</li></ul>
<!--l. 2134--><p class="noindent" >In RDF, there exists implicit knowledge, which can be inferred using <span 
class="ecbx-1000">deduction</span>. This knowledge doesn&#8217;t need to
be stated explicitly: which statements are logical consequences from others is governed by the formal
semantics.
   <div class="newtheorem">
<!--l. 2138--><p class="noindent" ><span class="head">
<a 
 id="x1-48002r2"></a>
<span 
class="ecbx-1000">Example 4.2.</span>  </span>If a RDF document contains <span 
class="ecti-1000">&#8217;u rdf:type ex:Textbook&#8217; </span>and <span 
class="ecti-1000">&#8217;ex:Textbook rdfs:subClassOf ex:Book&#8217;</span>,
then it is deduced that <span 
class="ecti-1000">&#8217;u rdf:type ex:Book&#8217;</span>.
   </div>
<!--l. 2142--><p class="indent" >
As can be seen, RDF are usually stored in <span 
class="ecbx-1000">triple stores </span>or <span 
class="ecbx-1000">quad stores</span>, which are a relational DB. This means that it
is usually not implemented natively as a graph database, which makes it harder to do inference. It is more usually used
as a metadata storage.
                                                                                            
                                                                                            
<!--l. 2148--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.4   </span> <a 
 id="x1-490004.4"></a>The property graph data model</h4>
<!--l. 2150--><p class="noindent" >This model is simpler: in this case, the model is a graph, where nodes and edges are annotated with properties. It is
schema-less, meaning there is not an underlying schema to which the data has to adhere. Inference is not
performed.
<!--l. 2155--><p class="indent" >   There are several types of relationships supported by graph databases:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2157--><p class="noindent" ><span 
class="ecbx-1000">Attributes</span>: properties that can be uni- or multi- valued.
     </li>
     <li class="itemize">
     <!--l. 2158--><p class="noindent" ><span 
class="ecbx-1000">Entities</span>: groups of real-world objects.
     </li>
     <li class="itemize">
     <!--l. 2159--><p class="noindent" ><span 
class="ecbx-1000">Neighborhood relations</span>: structures to represents neighborhoods of an entity.
     </li>
     <li class="itemize">
     <!--l. 2161--><p class="noindent" ><span 
class="ecbx-1000">Standard abstractions</span>: part-of, composed-by, n-ary associations.
     </li>
     <li class="itemize">
     <!--l. 2162--><p class="noindent" ><span 
class="ecbx-1000">Derivation and inheritance</span>: subclasses and superclasses, relations of instantiations.
     </li>
     <li class="itemize">
     <!--l. 2164--><p class="noindent" ><span 
class="ecbx-1000">Nested relations</span>: recursively specified relations.</li></ul>
<!--l. 2166--><p class="noindent" >The abstract data type used is a <span 
class="ecbx-1000">graph with properties</span>, which is a 4-tuple <span 
class="cmmi-10">G </span><span 
class="cmr-10">= </span><img 
src="summary1x.png" alt="(V,E,&#x03A3;,L )"  class="left" align="middle"> such that:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2169--><p class="noindent" ><span 
class="cmmi-10">V </span>is a finite set of nodes.
     </li>
     <li class="itemize">
     <!--l. 2170--><p class="noindent" ><span 
class="cmr-10">&#x03A3; </span>is a set of labels.
     </li>
     <li class="itemize">
     <!--l. 2171--><p class="noindent" ><span 
class="cmmi-10">E </span><span 
class="cmsy-10">&#x2282; </span><span 
class="cmmi-10">V </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="cmmi-10">V </span>is a set of edges representing labelled binary relationships between elements in <span 
class="cmmi-10">V </span>.
     </li>
     <li class="itemize">
     <!--l. 2173--><p class="noindent" ><span 
class="cmmi-10">L </span>is a function, <span 
class="cmmi-10">L </span><span 
class="cmr-10">: </span><span 
class="cmmi-10">V </span><span 
class="cmsy-10">&#x00D7;</span><span 
class="cmmi-10">V </span><span 
class="cmsy-10">&#x2192; </span><span 
class="cmr-10">2</span><sup><span 
class="cmr-7">&#x03A3;</span></sup>, meaning that each edge can by annotated with zero or more labels from
     <span 
class="cmr-10">&#x03A3;</span>.</li></ul>
<!--l. 2176--><p class="noindent" >The basic operations defined over a graph are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2178--><p class="noindent" ><span 
class="cmmi-10">AddNode</span><img 
src="summary2x.png" alt="(G,x)"  class="left" align="middle">: adds node <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">G</span>.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2179--><p class="noindent" ><span 
class="cmmi-10">DeleteNode</span><img 
src="summary3x.png" alt="(G, x)"  class="left" align="middle">: deletes <span 
class="cmmi-10">x </span>from <span 
class="cmmi-10">G</span>.
     </li>
     <li class="itemize">
     <!--l. 2180--><p class="noindent" ><span 
class="cmmi-10">Adjacent</span><img 
src="summary4x.png" alt="(G,x,y)"  class="left" align="middle">: tests if there is an edge from <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">y </span>in <span 
class="cmmi-10">G</span>, i.e., if <img 
src="summary5x.png" alt="(x,y)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2208; </span><span 
class="cmmi-10">E</span>.
     </li>
     <li class="itemize">
     <!--l. 2182--><p class="noindent" ><span 
class="cmmi-10">Neighbors</span><img 
src="summary6x.png" alt="(G,x)"  class="left" align="middle">: returns all nodes <span 
class="cmmi-10">y </span>such that <img 
src="summary7x.png" alt="(x,y)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2208; </span><span 
class="cmmi-10">E</span>.
     </li>
     <li class="itemize">
     <!--l. 2183--><p class="noindent" ><span 
class="cmmi-10">AdjacentEdges</span><img 
src="summary8x.png" alt="(G,x,y)"  class="left" align="middle">: returns the set of lables of edges going from <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">y</span>.
     </li>
     <li class="itemize">
     <!--l. 2185--><p class="noindent" ><span 
class="cmmi-10">Add</span><img 
src="summary9x.png" alt="(G, x,y,l)"  class="left" align="middle">: adds an edge between <span 
class="cmmi-10">x </span>and <span 
class="cmmi-10">y </span>with label <span 
class="cmmi-10">l</span>.
     </li>
     <li class="itemize">
     <!--l. 2187--><p class="noindent" ><span 
class="cmmi-10">Delete</span><img 
src="summary10x.png" alt="(G,x,y,l)"  class="left" align="middle">: deletes and edge between <span 
class="cmmi-10">x </span>and <span 
class="cmmi-10">y </span>with label <span 
class="cmmi-10">l</span>.
     </li>
     <li class="itemize">
     <!--l. 2189--><p class="noindent" ><span 
class="cmmi-10">Reach</span><img 
src="summary11x.png" alt="(G, x,y)"  class="left" align="middle">: tests if there is a path from <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">y</span>. A <span 
class="ecbx-1000">path </span>between <span 
class="cmmi-10">x </span>and <span 
class="cmmi-10">y </span>is a subset of nodes <span 
class="cmmi-10">z</span><sub><span 
class="cmr-7">1</span></sub><span 
class="cmmi-10">,...,z</span><sub><span 
class="cmmi-7">n</span></sub>
     such that <img 
src="summary12x.png" alt="(x,z1)"  class="left" align="middle"><span 
class="cmmi-10">,</span><img 
src="summary13x.png" alt="(zn,y)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2208; </span><span 
class="cmmi-10">E </span>and <img 
src="summary14x.png" alt="(zi,zi+1)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2208; </span><span 
class="cmmi-10">E </span>for all <span 
class="cmmi-10">i </span><span 
class="cmr-10">= 1</span><span 
class="cmmi-10">,...,n </span><span 
class="cmsy-10">- </span><span 
class="cmr-10">1</span>. The <span 
class="ecbx-1000">length </span>of the path is how
     many edges there are from <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">y</span>.
     </li>
     <li class="itemize">
     <!--l. 2194--><p class="noindent" ><span 
class="cmmi-10">Path</span><img 
src="summary15x.png" alt="(G, x,y)"  class="left" align="middle">: return a shorthest path from <span 
class="cmmi-10">x </span>to <span 
class="cmmi-10">y</span>.
     </li>
     <li class="itemize">
     <!--l. 2195--><p class="noindent" ><span 
class="cmr-10">2 </span><span 
class="cmsy-10">- </span><span 
class="cmmi-10">hop</span><img 
src="summary16x.png" alt="(G, x)"  class="left" align="middle">: return the set of nodes that can be reached from <span 
class="cmmi-10">x </span>using paths of length 2.
     </li>
     <li class="itemize">
     <!--l. 2197--><p class="noindent" ><span 
class="cmmi-10">n </span><span 
class="cmsy-10">- </span><span 
class="cmmi-10">hop</span><img 
src="summary17x.png" alt="(G,x)"  class="left" align="middle">: returns the set of ndoes that can be reached from <span 
class="cmmi-10">x </span>using paths of length <span 
class="cmmi-10">n</span>.</li></ul>
<!--l. 2200--><p class="noindent" >The notion of graph can be generalized by that of <span 
class="ecbx-1000">hypergraph</span>, which is a pair <span 
class="cmmi-10">H </span><span 
class="cmr-10">= </span><img 
src="summary18x.png" alt="(V,E)"  class="left" align="middle">, where <span 
class="cmmi-10">V </span>is a set of nodes, and
<span 
class="cmmi-10">E </span><span 
class="cmsy-10">&#x2282; </span><span 
class="cmr-10">2</span><sup><span 
class="cmmi-7">V</span> </sup> is a set of non-empty subsets of <span 
class="cmmi-10">V </span>, called <span 
class="ecbx-1000">hyperedges</span>. If <span 
class="cmmi-10">V </span><span 
class="cmr-10">= </span><img 
src="summary19x.png" alt="{v1,...,vn}"  class="left" align="middle"> and <span 
class="cmmi-10">E </span><span 
class="cmr-10">= </span><img 
src="summary20x.png" alt="{e1,...,em }"  class="left" align="middle">, we can define
the <span 
class="ecbx-1000">incidence matrix </span>of <span 
class="cmmi-10">H </span>as the matrix <span 
class="cmmi-10">A </span><span 
class="cmr-10">= </span><img 
src="summary21x.png" alt="(aij)"  class="left" align="middle"><sub><span 
class="cmmi-7">n</span><span 
class="cmsy-7">&#x00D7;</span><span 
class="cmmi-7">m</span></sub> where
   <div class="math-display" >
<img 
src="summary22x.png" alt="     {
      1  if vi &#x2208; ej
aij =  0  otherwise
" class="math-display" ></div>
                                                                                            
                                                                                            
<!--l. 2213--><p class="indent" >   In this case, this is an <span 
class="ecbx-1000">undirected hypergraph</span>. A <span 
class="ecbx-1000">directed hypergraph </span>is defined similarly by <span 
class="cmmi-10">H </span><span 
class="cmr-10">= </span><img 
src="summary23x.png" alt="(V,E )"  class="left" align="middle">
where in this case <span 
class="cmmi-10">E </span><span 
class="cmsy-10">&#x2282; </span><span 
class="cmr-10">2</span><sup><span 
class="cmmi-7">V</span> </sup> <span 
class="cmsy-10">&#x00D7; </span><span 
class="cmr-10">2</span><sup><span 
class="cmmi-7">V</span> </sup>, meaning that the nodes in the left set are connected to the nodes of the right
one.
<!--l. 2218--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.1   </span> <a 
 id="x1-500004.4.1"></a>Implementation: adjacency list</h5>
<!--l. 2220--><p class="noindent" >In an adjacency list, we maintain an array with as many cells as there are nodes in the graph, and:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2223--><p class="noindent" >For each node, maintain a list of neighbors.
     </li>
     <li class="itemize">
     <!--l. 2224--><p class="noindent" >If the graph is directed, the list is only containing outgoing nodes.</li></ul>
<!--l. 2226--><p class="noindent" >This way it is very cheap to obtain neighbors of a node, but it is not suitable for checking if there is an edge between two
nodes.
   <div class="newtheorem">
<!--l. 2228--><p class="noindent" ><span class="head">
<a 
 id="x1-50001r3"></a>
<span 
class="ecbx-1000">Example 4.3.</span>  </span>This graph
<div class="center" 
>
<!--l. 2230--><p class="noindent" >
<!--l. 2231--><p class="noindent" ><img 
src="2_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_graph_0.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 2234--><p class="indent" >   Is modelled with the following adjacency list:
<div class="center" 
>
<!--l. 2235--><p class="noindent" >
<div class="tabular"> <table id="TBL-15" class="tabular" 
 
><colgroup id="TBL-15-1g"><col 
id="TBL-15-1"></colgroup><colgroup id="TBL-15-2g"><col 
id="TBL-15-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-1"  
class="td11"> v1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-1-2"  
class="td11">                     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-1"  
class="td11"> v2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-2-2"  
class="td11"> {(v1,{L2}),(v3,{L4})}  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-1"  
class="td11"> v3  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-3-2"  
class="td11">                     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-1"  
class="td11"> v4  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-15-4-2"  
class="td11">     {(v1,{L1})}         </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-15-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-15-5-1"  
class="td11">     </td></tr></table></div>
</div>
   </div>
<!--l. 2252--><p class="indent" >
<!--l. 2254--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.2   </span> <a 
 id="x1-510004.4.2"></a>Implementation: incidence list</h5>
<!--l. 2256--><p class="noindent" >In this case, we maintain two arrays, one with as many cells as nodes, and another one with as many different edges
there are in the graph:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2259--><p class="noindent" >Vertices and edges are stored as records of objects.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2260--><p class="noindent" >Each vertex stores incident edges, labeled as source if the edge goes out, or destination if it goes in.
     </li>
     <li class="itemize">
     <!--l. 2262--><p class="noindent" >Each edge stores incident nodes.</li></ul>
<div class="newtheorem">
<!--l. 2264--><p class="noindent" ><span class="head">
<a 
 id="x1-51001r4"></a>
<span 
class="ecbx-1000">Example 4.4.</span>  </span>Now, the graph of the previous example is modeled as:
<div class="center" 
>
<!--l. 2266--><p class="noindent" >
<div class="tabular"> <table id="TBL-16" class="tabular" 
 
><colgroup id="TBL-16-1g"><col 
id="TBL-16-1"></colgroup><colgroup id="TBL-16-2g"><col 
id="TBL-16-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-1-1"  
class="td11"> v1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-1-2"  
class="td11">   {(dest,L2),(dest,L1)}     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-2-1"  
class="td11"> v2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-2-2"  
class="td11"> {(source,L2),(source,L3)}  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-3-1"  
class="td11"> v3  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-3-2"  
class="td11">       {(dest,L3)}           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-4-1"  
class="td11"> v4  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-16-4-2"  
class="td11">      {(source,L1)}          </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-16-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-16-5-1"  
class="td11">     </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-17" class="tabular" 
 
><colgroup id="TBL-17-1g"><col 
id="TBL-17-1"></colgroup><colgroup id="TBL-17-2g"><col 
id="TBL-17-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-1-1"  
class="td11"> L1  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-17-1-2"  
class="td11"> (V4,V1)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-2-1"  
class="td11"> L2  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-17-2-2"  
class="td11"> (V2,V1)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-3-1"  
class="td11"> L3  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-17-3-2"  
class="td11"> (V2,V3)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-17-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-17-4-1"  
class="td11">     </td></tr></table></div>
</div>
</div>
<!--l. 2296--><p class="indent" >
Some properties:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2299--><p class="noindent" >Storage is <span 
class="cmmi-10">O</span><img 
src="summary24x.png" alt="(|V|+ |E|+ |L|)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2300--><p class="noindent" ><span 
class="cmmi-10">Adjacent</span><img 
src="summary25x.png" alt="(G,x,y)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary26x.png" alt="(|E |)"  class="left" align="middle">, we have to check at most all edges.
     </li>
     <li class="itemize">
     <!--l. 2302--><p class="noindent" ><span 
class="cmmi-10">Neighbors</span><img 
src="summary27x.png" alt="(G,x)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary28x.png" alt="(|E|)"  class="left" align="middle">, we go to node <span 
class="cmmi-10">x </span>and for each edge marked as source, we visit it and return
     the correspondant destination. At most <span 
class="cmmi-10">E </span>checks.
     </li>
     <li class="itemize">
     <!--l. 2305--><p class="noindent" ><span 
class="cmmi-10">AdjacentEdges</span><img 
src="summary29x.png" alt="(G,x,y)"  class="left" align="middle"> is again <span 
class="cmmi-10">O</span><img 
src="summary30x.png" alt="(|E|)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2306--><p class="noindent" ><span 
class="cmmi-10">Add</span><img 
src="summary31x.png" alt="(G, x,y,l)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary32x.png" alt="(|E|)"  class="left" align="middle">, as well as delete <span 
class="cmmi-10">Delete</span><img 
src="summary33x.png" alt="(G, x,y,l)"  class="left" align="middle">.</li></ul>
                                                                                            
                                                                                            
<!--l. 2310--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.3   </span> <a 
 id="x1-520004.4.3"></a>Implementation: adjacency matrix</h5>
<!--l. 2312--><p class="noindent" >In this case, we maintain a matrix of size <span 
class="cmmi-10">n </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="cmmi-10">n</span>, where <span 
class="cmmi-10">n </span>is the number of nodes:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2315--><p class="noindent" >It is a bidimensional graph representation.
     </li>
     <li class="itemize">
     <!--l. 2316--><p class="noindent" >Rows represents source nodes.
     </li>
     <li class="itemize">
     <!--l. 2317--><p class="noindent" >Columnds represent destination nodes.
     </li>
     <li class="itemize">
     <!--l. 2318--><p class="noindent" >Each non-null entry represents that there is an edge from the source node to the destination node.</li></ul>
<div class="newtheorem">
<!--l. 2321--><p class="noindent" ><span class="head">
<a 
 id="x1-52001r5"></a>
<span 
class="ecbx-1000">Example 4.5.</span>  </span>In this case, the example is modelled as
<div class="center" 
>
<!--l. 2323--><p class="noindent" >
<div class="tabular"> <table id="TBL-18" class="tabular" 
 
><colgroup id="TBL-18-1g"><col 
id="TBL-18-1"></colgroup><colgroup id="TBL-18-2g"><col 
id="TBL-18-2"></colgroup><colgroup id="TBL-18-3g"><col 
id="TBL-18-3"></colgroup><colgroup id="TBL-18-4g"><col 
id="TBL-18-4"></colgroup><colgroup id="TBL-18-5g"><col 
id="TBL-18-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-2"  
class="td11">  <span 
class="ecbx-1000">v1   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-3"  
class="td11"> <span 
class="ecbx-1000">v2  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-4"  
class="td11">  <span 
class="ecbx-1000">v3   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-1-5"  
class="td11"> <span 
class="ecbx-1000">v4  </span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-1"  
class="td11"> <span 
class="ecbx-1000">v1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-2"  
class="td11"> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-3"  
class="td11"> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-4"  
class="td11"> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-2-5"  
class="td11"></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-1"  
class="td11"> <span 
class="ecbx-1000">v2  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-2"  
class="td11"> {L2}  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-4"  
class="td11"> {L3}  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-3-5"  
class="td11">     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-4-1"  
class="td11"> <span 
class="ecbx-1000">v3  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-4-2"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-4-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-4-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-4-5"  
class="td11">     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-5-1"  
class="td11"> <span 
class="ecbx-1000">v4  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-5-2"  
class="td11"> {L1}  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-5-3"  
class="td11">     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-5-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-18-5-5"  
class="td11">     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-18-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-18-6-1"  
class="td11">     </td></tr></table></div>
</div>
</div>
<!--l. 2359--><p class="indent" >
Properties:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2362--><p class="noindent" >The storage is <span 
class="cmmi-10">O</span><img 
src="summary34x.png" alt="(|V|&#x00D7; |V |)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2363--><p class="noindent" ><span 
class="cmmi-10">Adjacent</span><img 
src="summary35x.png" alt="(G,x,y)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary36x.png" alt="(1)"  class="left" align="middle">, we have to check cell <img 
src="summary37x.png" alt="(x,y)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2365--><p class="noindent" >Compute the out-degree of a node is <span 
class="cmmi-10">O</span><img 
src="summary38x.png" alt="(|V |)"  class="left" align="middle">, we have to sum its row.
     </li>
     <li class="itemize">
     <!--l. 2367--><p class="noindent" >For the in-degree it is also <span 
class="cmmi-10">O</span><img 
src="summary39x.png" alt="(|V|)"  class="left" align="middle">, we have to sum its column.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2369--><p class="noindent" >Adding an edge between two nodes is <span 
class="cmmi-10">O</span><img 
src="summary40x.png" alt="(1)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2370--><p class="noindent" >Compute all paths of length 4 between any pair of nodes is <span 
class="cmmi-10">O</span><img 
src="summary41x.png" alt="(   )
 |V |4"  class="left" align="middle">.</li></ul>
<!--l. 2373--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.4   </span> <a 
 id="x1-530004.4.4"></a>Implementation: incidence matrix</h5>
<!--l. 2375--><p class="noindent" >In this case, we store a matrix of size <span 
class="cmmi-10">n </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="cmmi-10">m</span>, where <span 
class="cmmi-10">n </span>is the number of nodes and <span 
class="cmmi-10">m </span>is the number of
edges:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2378--><p class="noindent" >It is also a bidimensional graph representation.
     </li>
     <li class="itemize">
     <!--l. 2379--><p class="noindent" >Rows represent nodes.
     </li>
     <li class="itemize">
     <!--l. 2380--><p class="noindent" >Columns represent edges.
     </li>
     <li class="itemize">
     <!--l. 2381--><p class="noindent" >A non-null entry represents that the node is incident to the edge, and in which mode (source or destination).</li></ul>
<div class="newtheorem">
<!--l. 2384--><p class="noindent" ><span class="head">
<a 
 id="x1-53001r6"></a>
<span 
class="ecbx-1000">Example 4.6.</span>  </span>The example is represented now as
<div class="center" 
>
<!--l. 2386--><p class="noindent" >
<div class="tabular"> <table id="TBL-19" class="tabular" 
 
><colgroup id="TBL-19-1g"><col 
id="TBL-19-1"></colgroup><colgroup id="TBL-19-2g"><col 
id="TBL-19-2"></colgroup><colgroup id="TBL-19-3g"><col 
id="TBL-19-3"></colgroup><colgroup id="TBL-19-4g"><col 
id="TBL-19-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-1"  
class="td11">    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-2"  
class="td11">   <span 
class="ecbx-1000">L1   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-3"  
class="td11">   <span 
class="ecbx-1000">L2   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-1-4"  
class="td11">   <span 
class="ecbx-1000">L3   </span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-1"  
class="td11"> <span 
class="ecbx-1000">v1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-2"  
class="td11"> dest </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-3"  
class="td11"> dest </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-2-4"  
class="td11"></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-1"  
class="td11"> <span 
class="ecbx-1000">v2  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-2"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-3"  
class="td11"> source  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-3-4"  
class="td11"> source  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-1"  
class="td11"> <span 
class="ecbx-1000">v3  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-2"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-3"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-4-4"  
class="td11">  dest   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-5-1"  
class="td11"> <span 
class="ecbx-1000">v4  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-5-2"  
class="td11"> source  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-5-3"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-19-5-4"  
class="td11">       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-19-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-19-6-1"  
class="td11">     </td></tr></table></div>
</div>
</div>
<!--l. 2417--><p class="indent" >
Properties:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2420--><p class="noindent" >The storage is <span 
class="cmmi-10">O</span><img 
src="summary42x.png" alt="(|V|&#x00D7; |E |)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2421--><p class="noindent" ><span 
class="cmmi-10">Adjacent</span><img 
src="summary43x.png" alt="(G,x,y)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary44x.png" alt="(|E |)"  class="left" align="middle">
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2422--><p class="noindent" >Neighbors<img 
src="summary45x.png" alt="(G, x)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary46x.png" alt="(|V |&#x00D7; |E |)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2423--><p class="noindent" ><span 
class="cmmi-10">AdjacentEdges</span><img 
src="summary47x.png" alt="(G,x,y)"  class="left" align="middle"> is <span 
class="cmmi-10">O</span><img 
src="summary48x.png" alt="(|E|)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 2424--><p class="noindent" >Adding or deleting an edge between two nodes is <span 
class="cmmi-10">O</span><img 
src="summary49x.png" alt="(|V |)"  class="left" align="middle">.</li></ul>
<!--l. 2427--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-540005"></a>Neo4j</h3>
<!--l. 2429--><p class="noindent" >Neo4j is an open source graph DB system implemented in Java which uses a labelled attributed multigraph as data
model. Nodes and edges can have properties, and there are no restrictions on the amount of edges between nodes. Loops
are allowes and there are different types of traversal strategies defined.
<!--l. 2435--><p class="indent" >   It provides APIs for Java and Python and it is embeddable or server-full. It provides full ACID transactions.
<!--l. 2438--><p class="indent" >   Neo4j provides a native graph processing and storage, characterized by <span 
class="ecbx-1000">index-free adjacency</span>, meaning that each
node keeps direct reference to adjacent nodes, acting as a local index and making query time independent from graph
size for many kinds of queries.
<!--l. 2443--><p class="indent" >   Another good property is that the joins are precomputed in the form of stored relationships.
<!--l. 2446--><p class="indent" >   It uses a high level query language called <span 
class="ecbx-1000">Cypher</span>.
<!--l. 2448--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.1   </span> <a 
 id="x1-550005.1"></a>File storage</h4>
<!--l. 2450--><p class="noindent" >Graphs are stored in files. There are three different objects:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2452--><p class="noindent" ><span 
class="ecbx-1000">Nodes</span>: they have a fixed length of 9 B, to make search performant: finding a node is <span 
class="cmmi-10">O</span><img 
src="summary50x.png" alt="(1)"  class="left" align="middle">.
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 2455--><p class="noindent" >Its first byte is an <span 
class="ecbx-1000">in-use </span>flag.
         </li>
         <li class="itemize">
         <!--l. 2456--><p class="noindent" >Then there are 4 B indicating the address of its first relationship.
         </li>
         <li class="itemize">
         <!--l. 2457--><p class="noindent" >The final 4 B indicate the address of its first property.</li></ul>
     <div class="center" 
>
<!--l. 2459--><p class="noindent" >
<div class="tabular"> <table id="TBL-20" class="tabular" 
 
><colgroup id="TBL-20-1g"><col 
id="TBL-20-1"></colgroup><colgroup id="TBL-20-2g"><col 
id="TBL-20-2"></colgroup><colgroup id="TBL-20-3g"><col 
id="TBL-20-3"></colgroup><colgroup id="TBL-20-4g"><col 
id="TBL-20-4"></colgroup><colgroup id="TBL-20-5g"><col 
id="TBL-20-5"></colgroup><colgroup id="TBL-20-6g"><col 
id="TBL-20-6"></colgroup><colgroup id="TBL-20-7g"><col 
id="TBL-20-7"></colgroup><colgroup id="TBL-20-8g"><col 
id="TBL-20-8"></colgroup><colgroup id="TBL-20-9g"><col 
id="TBL-20-9"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-20-1-1"  
class="td11"></td>                        <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Node</div>                                     </tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-2-1"  
class="td11"> inUse </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-20-2-2"  
class="td11"></td> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">nextRel</div> <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-20-2-6"  
class="td11"></td> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">nextProp</div>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-1"  
class="td11">   B    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-2"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-3"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-4"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-5"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-6"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-7"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-8"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-20-3-9"  
class="td11"> B  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-20-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-20-4-1"  
class="td11">       </td>
</tr></table></div>
</div>
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2481--><p class="noindent" ><span 
class="ecbx-1000">Relationships</span>: they have a fixed length of 33 B.
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 2483--><p class="noindent" >Its first byte is an in-use flag.
         </li>
         <li class="itemize">
         <!--l. 2484--><p class="noindent" >It is organized as double linked list.
         </li>
         <li class="itemize">
         <!--l. 2485--><p class="noindent" >Each record contians the IDs of the two nodes in the relationship (4B each).
         </li>
         <li class="itemize">
         <!--l. 2487--><p class="noindent" >There is a pointer to the relationship type (4 B).
         </li>
         <li class="itemize">
         <!--l. 2488--><p class="noindent" >For each node, there is a pointer to the previous and next relationship records (4 B x 2 each).
         </li>
         <li class="itemize">
         <!--l. 2490--><p class="noindent" >Finally, a pointer to the next property (4 B).</li></ul>
     <div class="center" 
>
<!--l. 2492--><p class="noindent" >
<div class="tabular"> <table id="TBL-21" class="tabular" 
 
><colgroup id="TBL-21-1g"><col 
id="TBL-21-1"></colgroup><colgroup id="TBL-21-2g"><col 
id="TBL-21-2"></colgroup><colgroup id="TBL-21-3g"><col 
id="TBL-21-3"></colgroup><colgroup id="TBL-21-4g"><col 
id="TBL-21-4"></colgroup><colgroup id="TBL-21-5g"><col 
id="TBL-21-5"></colgroup><colgroup id="TBL-21-6g"><col 
id="TBL-21-6"></colgroup><colgroup id="TBL-21-7g"><col 
id="TBL-21-7"></colgroup><colgroup id="TBL-21-8g"><col 
id="TBL-21-8"></colgroup><colgroup id="TBL-21-9g"><col 
id="TBL-21-9"></colgroup><colgroup id="TBL-21-10g"><col 
id="TBL-21-10"></colgroup><colgroup id="TBL-21-11g"><col 
id="TBL-21-11"></colgroup><colgroup id="TBL-21-12g"><col 
id="TBL-21-12"></colgroup><colgroup id="TBL-21-13g"><col 
id="TBL-21-13"></colgroup><colgroup id="TBL-21-14g"><col 
id="TBL-21-14"></colgroup><colgroup id="TBL-21-15g"><col 
id="TBL-21-15"></colgroup><colgroup id="TBL-21-16g"><col 
id="TBL-21-16"></colgroup><colgroup id="TBL-21-17g"><col 
id="TBL-21-17"></colgroup><colgroup id="TBL-21-18g"><col 
id="TBL-21-18"></colgroup><colgroup id="TBL-21-19g"><col 
id="TBL-21-19"></colgroup><colgroup id="TBL-21-20g"><col 
id="TBL-21-20"></colgroup><colgroup id="TBL-21-21g"><col 
id="TBL-21-21"></colgroup><colgroup id="TBL-21-22g"><col 
id="TBL-21-22"></colgroup><colgroup id="TBL-21-23g"><col 
id="TBL-21-23"></colgroup><colgroup id="TBL-21-24g"><col 
id="TBL-21-24"></colgroup><colgroup id="TBL-21-25g"><col 
id="TBL-21-25"></colgroup><colgroup id="TBL-21-26g"><col 
id="TBL-21-26"></colgroup><colgroup id="TBL-21-27g"><col 
id="TBL-21-27"></colgroup><colgroup id="TBL-21-28g"><col 
id="TBL-21-28"></colgroup><colgroup id="TBL-21-29g"><col 
id="TBL-21-29"></colgroup><colgroup id="TBL-21-30g"><col 
id="TBL-21-30"></colgroup><colgroup id="TBL-21-31g"><col 
id="TBL-21-31"></colgroup><colgroup id="TBL-21-32g"><col 
id="TBL-21-32"></colgroup><colgroup id="TBL-21-33g"><col 
id="TBL-21-33"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-1-1"  
class="td11"></td>                                                                                        <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Relationship</div>                                                                                                                                           
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-2-1"  
class="td11"> inUse  </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-2"  
class="td11"></td>      <div class="multicolumn"  style="white-space:nowrap; text-align:center;">firstNode</div>          <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-6"  
class="td11"></td>     <div class="multicolumn"  style="white-space:nowrap; text-align:center;">secondNode</div>        <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-10"  
class="td11"></td>       <div class="multicolumn"  style="white-space:nowrap; text-align:center;">relType</div>           <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-14"  
class="td11"></td>     <div class="multicolumn"  style="white-space:nowrap; text-align:center;">firstPrevRel</div>        <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-18"  
class="td11"></td>     <div class="multicolumn"  style="white-space:nowrap; text-align:center;">firstNextRel</div>        <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-22"  
class="td11"></td>      <div class="multicolumn"  style="white-space:nowrap; text-align:center;">secPrevRel</div>         <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-26"  
class="td11"></td>      <div class="multicolumn"  style="white-space:nowrap; text-align:center;">secNextRel</div>         <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-21-2-30"  
class="td11"></td>      <div class="multicolumn"  style="white-space:nowrap; text-align:center;">nextProp</div>          
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-1"  
class="td11">   B    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-2"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-3"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-4"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-5"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-6"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-7"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-8"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-9"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-10"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-11"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-12"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-13"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-14"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-15"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-16"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-17"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-18"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-19"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-20"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-21"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-22"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-23"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-24"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-25"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-26"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-27"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-28"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-29"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-30"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-31"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-32"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-21-3-33"  
class="td11"> B  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-21-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-21-4-1"  
class="td11">       </td>
</tr></table>
</div>
</div>
     </li>
     <li class="itemize">
     <!--l. 2544--><p class="noindent" ><span 
class="ecbx-1000">Properties</span>: they have a fixed length of 32 B divided in blocks og 8 B.
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 2547--><p class="noindent" >It includes the ID of the next property in the properties chain, which is thus a single linked list.
         </li>
         <li class="itemize">
         <!--l. 2549--><p class="noindent" >Each property record holds the property type, a pointer to the property index file, holding the
         property name and a value or a pointer to a dynamic structure for long strings or arrays.</li></ul>
     <div class="center" 
>
<!--l. 2553--><p class="noindent" >
<div class="tabular"> <table id="TBL-22" class="tabular" 
 
><colgroup id="TBL-22-1g"><col 
id="TBL-22-1"></colgroup><colgroup id="TBL-22-2g"><col 
id="TBL-22-2"></colgroup><colgroup id="TBL-22-3g"><col 
id="TBL-22-3"></colgroup><colgroup id="TBL-22-4g"><col 
id="TBL-22-4"></colgroup><colgroup id="TBL-22-5g"><col 
id="TBL-22-5"></colgroup><colgroup id="TBL-22-6g"><col 
id="TBL-22-6"></colgroup><colgroup id="TBL-22-7g"><col 
id="TBL-22-7"></colgroup><colgroup id="TBL-22-8g"><col 
id="TBL-22-8"></colgroup><colgroup id="TBL-22-9g"><col 
id="TBL-22-9"></colgroup><colgroup id="TBL-22-10g"><col 
id="TBL-22-10"></colgroup><colgroup id="TBL-22-11g"><col 
id="TBL-22-11"></colgroup><colgroup id="TBL-22-12g"><col 
id="TBL-22-12"></colgroup><colgroup id="TBL-22-13g"><col 
id="TBL-22-13"></colgroup><colgroup id="TBL-22-14g"><col 
id="TBL-22-14"></colgroup><colgroup id="TBL-22-15g"><col 
id="TBL-22-15"></colgroup><colgroup id="TBL-22-16g"><col 
id="TBL-22-16"></colgroup><colgroup id="TBL-22-17g"><col 
id="TBL-22-17"></colgroup><colgroup id="TBL-22-18g"><col 
id="TBL-22-18"></colgroup><colgroup id="TBL-22-19g"><col 
id="TBL-22-19"></colgroup><colgroup id="TBL-22-20g"><col 
id="TBL-22-20"></colgroup><colgroup id="TBL-22-21g"><col 
id="TBL-22-21"></colgroup><colgroup id="TBL-22-22g"><col 
id="TBL-22-22"></colgroup><colgroup id="TBL-22-23g"><col 
id="TBL-22-23"></colgroup><colgroup id="TBL-22-24g"><col 
id="TBL-22-24"></colgroup><colgroup id="TBL-22-25g"><col 
id="TBL-22-25"></colgroup><colgroup id="TBL-22-26g"><col 
id="TBL-22-26"></colgroup><colgroup id="TBL-22-27g"><col 
id="TBL-22-27"></colgroup><colgroup id="TBL-22-28g"><col 
id="TBL-22-28"></colgroup><colgroup id="TBL-22-29g"><col 
id="TBL-22-29"></colgroup><colgroup id="TBL-22-30g"><col 
id="TBL-22-30"></colgroup><colgroup id="TBL-22-31g"><col 
id="TBL-22-31"></colgroup><colgroup id="TBL-22-32g"><col 
id="TBL-22-32"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-22-1-1"  
class="td11"></td>                                                                                     <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Property</div>                                                                                                                                      
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-2-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-22-2-1"  
class="td11"></td>                 <div class="multicolumn"  style="white-space:nowrap; text-align:center;">propType</div>                            <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-22-2-9"  
class="td11"></td>                 <div class="multicolumn"  style="white-space:nowrap; text-align:center;">propIdxFile</div>                          <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-22-2-17"  
class="td11"></td>                   <div class="multicolumn"  style="white-space:nowrap; text-align:center;">value</div>                               <td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-22-2-25"  
class="td11"></td>                  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">nextProp</div>                            
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-1"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-2"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-3"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-4"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-5"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-6"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-7"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-8"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-9"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-10"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-11"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-12"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-13"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-14"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-15"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-16"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-17"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-18"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-19"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-20"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-21"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-22"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-23"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-24"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-25"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-26"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-27"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-28"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-29"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-30"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-31"  
class="td11"> B  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-22-3-32"  
class="td11"> B  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-22-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-22-4-1"  
class="td11">    </td>
</tr></table>
</div>
</div>
                                                                                            
                                                                                            
     </li></ul>
<!--l. 2600--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">5.1.1   </span> <a 
 id="x1-560005.1.1"></a>Caching</h5>
<!--l. 2602--><p class="noindent" >Neo4j uses a cache to divide each store into regions, called <span 
class="ecbx-1000">pages</span>. The cache stores a fixed number of pages per file,
which are replaces using a Least Frequently Used strategy.
<!--l. 2606--><p class="indent" >   The cache is optimized for reading, and stores object representationsof nodes, relationships, and properties, for fast
path traversal. In this case, node objects contain properties and references to relationships, while relationships contain
only their properties. This is the opposite of what happens in disk storage, where most informaiton is in the relationship
records.
<!--l. 2613--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-570005.2"></a>Cypher</h4>
<!--l. 2615--><p class="noindent" >Cypher is the high level query language used by Neo4j for creating nodes, updating/deleting information and querying
graphs in a graph database.
<!--l. 2619--><p class="indent" >   Its functioning is different from that of the relational model. In the relational model, we first create the
structure of the database, and then we store tuples, which must be conformant to the structure. The
foreign keys are defined at the structural level. In Neo4j, nodes and edges are directly created, with their
properties, labels and types as structural information, but no schema is explicitly defined. The topology of the
graph can be thought as analogous to the foreign key in the relational model, but defined at the instance
level.
<!--l. 2628--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">5.2.1   </span> <a 
 id="x1-580005.2.1"></a>Nodes</h5>
<!--l. 2630--><p class="noindent" >A node is of the form
   <div class="math-display" >
<img 
src="summary51x.png" alt="(v : l1 : ...: ln{P1 : v1,...,Pk : vk})
" class="math-display" ></div>
<!--l. 2634--><p class="indent" >   where <span 
class="cmmi-10">v </span>is the node variable, which identifies the node in an expression, <span 
class="cmr-10">: </span><span 
class="cmmi-10">l</span><sub><span 
class="cmr-7">1</span></sub> <span 
class="cmr-10">: </span><span 
class="cmmi-10">... </span><span 
class="cmr-10">: </span><span 
class="cmmi-10">l</span><sub><span 
class="cmmi-7">n</span></sub> is a list of <span 
class="cmmi-10">n </span>labels associated
with the node, and <img 
src="summary52x.png" alt="{P1 : v1,...,Pk : vk}"  class="left" align="middle"> is a list of <span 
class="cmmi-10">k </span>properties associated with the node, and their respective assigned
values. <span 
class="cmmi-10">P</span><sub><span 
class="cmmi-7">i</span></sub> is the name of the property, <span 
class="cmmi-10">v</span><sub><span 
class="cmmi-7">i</span></sub> is the value.
<!--l. 2641--><p class="indent" >   To create an empty node:
   <!--l. 2643-->
<div class="lstlisting" id="listing-39"><span class="label"><a 
 id="x1-58001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2649--><p class="indent" >   The ID is assigned internally, with a different number each time. It can be reused by the system but should not be
used in applications: it should be considered an internal value to the system. RETURN is used to display the
node:
<div class="center" 
>
<!--l. 2653--><p class="noindent" >
<!--l. 2654--><p class="noindent" ><img 
src="3_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado3.png" alt="PIC"  
width="43" height="43" >
</div>
                                                                                            
                                                                                            
<!--l. 2657--><p class="indent" >   To create a node with two labels:
   <!--l. 2659-->
<div class="lstlisting" id="listing-40"><span class="label"><a 
 id="x1-58003r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">l1</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">l2</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58004r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<div class="center" 
>
<!--l. 2665--><p class="noindent" >
<!--l. 2666--><p class="noindent" ><img 
src="4_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado4.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 2669--><p class="indent" >   To create a node with one label and 3 properties:
   <!--l. 2671-->
<div class="lstlisting" id="listing-41"><span class="label"><a 
 id="x1-58005r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">l1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">v1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">v2</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">:[</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">v3_1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">v3_2</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">]})</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58006r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">v</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<div class="center" 
>
<!--l. 2677--><p class="noindent" >
<!--l. 2678--><p class="noindent" ><img 
src="5_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado5.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 2681--><p class="indent" >   A <span 
class="ecbx-1000">query </span>in Cypher is basically a pattern, which will be fullfilled solving the associated pattern-matching
problem.
<!--l. 2684--><p class="indent" >   If we want to add a new label to all nodes previously created:
   <!--l. 2686-->
<div class="lstlisting" id="listing-42"><span class="label"><a 
 id="x1-58007r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58008r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">newL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58009r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<div class="center" 
>
<!--l. 2693--><p class="noindent" >
<!--l. 2694--><p class="noindent" ><img 
src="6_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado6.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 2697--><p class="indent" >   To delete a label from those nodes with a certain label:
   <!--l. 2699-->
<div class="lstlisting" id="listing-43"><span class="label"><a 
 id="x1-58010r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">matchL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58011r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">REMOVE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">delL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58012r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2706--><p class="indent" >   A similar thing can be done with properties, which are referred to as node.propertyName:
   <!--l. 2709-->
<div class="lstlisting" id="listing-44"><span class="label"><a 
 id="x1-58013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">matchL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">REMOVE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">propName1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">propName2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-58015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2717--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">5.2.2   </span> <a 
 id="x1-590005.2.2"></a>Edges</h5>
<!--l. 2719--><p class="noindent" >An edge has the form
                                                                                            
                                                                                            
   <div class="math-display" >
<img 
src="summary53x.png" alt="(n) - [e : Type {P : v ,...,P : v }]- &#x003E; (v)
                1  1     k  k
" class="math-display" ></div>
<!--l. 2723--><p class="indent" >   where <span 
class="cmmi-10">n </span>is the source node and <span 
class="cmmi-10">v </span>is the destination node. The edge is defined inside the brackets <img 
src="summary54x.png" alt="[]"  class="left" align="middle">. It can also be
defined of the form <img 
src="summary55x.png" alt="(n)"  class="left" align="middle"> <span 
class="cmmi-10">&#x003C; </span><span 
class="cmsy-10">-</span><img 
src="summary56x.png" alt="[]"  class="left" align="middle"> <span 
class="cmsy-10">-</span><img 
src="summary57x.png" alt="(v)"  class="left" align="middle">. <span 
class="cmmi-10">e </span>identifies the edge and <span 
class="cmmi-10">Type </span>is a mandatory field prefixed by :. Finally, we have
again a list of <span 
class="cmmi-10">k </span>properties and their values.
<!--l. 2729--><p class="indent" >   Imagine we have 3 employees and want to create the relationship that one of them is the manager of the other two
and a date as property. We can do that with:
   <!--l. 2733-->
<div class="lstlisting" id="listing-45"><span class="label"><a 
 id="x1-59001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">n1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">})</span></span><span style="color:#000000"><span 
class="ectt-0800">,(</span></span><span style="color:#000000"><span 
class="ectt-0800">n2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">m</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">})</span></span><span style="color:#000000"><span 
class="ectt-0800">,(</span></span><span style="color:#000000"><span 
class="ectt-0800">n3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">2</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">})</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-59002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">n1</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;-[</span></span><span style="color:#000000"><span 
class="ectt-0800">e1</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">manager_of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">From</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Dec22</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">}]-(</span></span><span style="color:#000000"><span 
class="ectt-0800">n2</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">-[</span></span><span style="color:#000000"><span 
class="ectt-0800">e2</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">manager_of</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">{</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">From</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Jan23</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">}]-&#x003E;(</span></span><span style="color:#000000"><span 
class="ectt-0800">n3</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-59003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">e1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">e2</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2741--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">5.2.3   </span> <a 
 id="x1-600005.2.3"></a>Queries</h5>
<!--l. 2743--><p class="noindent" >As we have said, Cypher is a high level query language based on pattern matching. It queries graphs expressing
informational or topological conditions.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2747--><p class="noindent" >MATCH: expresses a pattern that Neo4j tries to match.
     </li>
     <li class="itemize">
     <!--l. 2748--><p class="noindent" >OPTIONAL MATCH: is like an outer join, i.e., if it does not find a match, puts null.
     </li>
     <li class="itemize">
     <!--l. 2750--><p class="noindent" >WHERE: it must go together with a MATCH or OPTIONAL MATCH expression. No order can be
     assumed for the evaluation of the conditions in the clause, Neo4j will decide.
     </li>
     <li class="itemize">
     <!--l. 2753--><p class="noindent" >RETURN: the evaluation produces subgraphs, and any portion of the match can be returned.
     </li>
     <li class="itemize">
     <!--l. 2755--><p class="noindent" >RETURN DISTINCT: eliminates duplicates.
     </li>
     <li class="itemize">
     <!--l. 2756--><p class="noindent" >ORDER BY: orders the results with some condition.
     </li>
     <li class="itemize">
     <!--l. 2757--><p class="noindent" >LIMIT: returns only part of the result. Unless ORDER BY is used, no assumptions can be made about
     the discarded results.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2759--><p class="noindent" >SKIP: skips the first results. Unless ORDER BY is used, no assumptions can be made about the discarded
     results.</li></ul>
<!--l. 2762--><p class="noindent" >In addition:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-60002x1">
     <!--l. 2764--><p class="noindent" >If we don&#8217;t need to make reference to a node, we can use () with no variable inside.
     </li>
<li 
  class="enumerate" id="x1-60004x2">
     <!--l. 2766--><p class="noindent" >If we don&#8217;t need to refer to an edge, we can omit it, like (n1)- -&#x003E;(n2).
     </li>
<li 
  class="enumerate" id="x1-60006x3">
     <!--l. 2767--><p class="noindent" >If we don&#8217;t need to consider the direction of the edge, we can use - -.
     </li>
<li 
  class="enumerate" id="x1-60008x4">
     <!--l. 2769--><p class="noindent" >If a pattern matches more than one label, we can write the OR condition as | inside the pattern. For
     example, (n :l1|:l2) matches nodes with label l1 or label l2.
     </li>
<li 
  class="enumerate" id="x1-60010x5">
     <!--l. 2772--><p class="noindent" >To express a path of any length, use [*]. For a fixed length m use [*m].
     </li>
<li 
  class="enumerate" id="x1-60012x6">
     <!--l. 2774--><p class="noindent" >To indicate boundaries to the length of a path, minimum n and maximum m, use [*n..m]. To only limit
     one end use [*n..], [*..m].</li></ol>
<div class="newtheorem">
<!--l. 2777--><p class="noindent" ><span class="head">
<a 
 id="x1-60013r1"></a>
<span 
class="ecbx-1000">Example 5.1.</span>  </span>A page X gets a score computed as the sum of all votes given by the pages that references it.
If a page Z references a page X, Z gives X a normalized vote computed as the inverse of the number of pages
references by Z. To prevent votes of self-referencing pages, if Z references X and X references Z, Z gives 0 votes
to X.
<!--l. 2784--><p class="indent" >   We are asked to compute the page rank for each web page. One possible solution is:
   <!--l. 2787-->
<div class="lstlisting" id="listing-46"><span class="label"><a 
 id="x1-60014r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">r</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60015r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1/</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">count</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">r</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">vote</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60016r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">x</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60017r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">((</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">p</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60018r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SUM</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">vote</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Rank</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60019r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ORDER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">url</span></span></div>
<!--l. 2796--><p class="indent" >   The first MATCH-WITH computes, for each node, the inverse of the number of outgoing edges, and passes this
number on to the next clause. Now, for each of these p nodes, we look for paths of length 1 where no reciprocity
exists.
<!--l. 2801--><p class="indent" >   Another solution uses COLLECT:
   <!--l. 2803-->
                                                                                            
                                                                                            
<div class="lstlisting" id="listing-47"><span class="label"><a 
 id="x1-60020r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">r</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60021r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1/</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">count</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">r</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">vote</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60022r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MATCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">x</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60023r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">((</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x003E;(</span></span><span style="color:#009900"><span 
class="ectt-0800">p</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60024r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">url</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">COLLECT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">url</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SUM</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">vote</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">rank</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-60025r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ORDER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">url</span></span></div>
<!--l. 2812--><p class="indent" >   In this case, we are using the COLLECT to get the urls that points to x, but x does not point to them, in addition
to just computing the value.
</div>
<!--l. 2815--><p class="indent" >
                                                                                            
                                                                                            
   <h1 class="partHead"><span class="titlemark">Part&#x00A0;III<br /></span><a 
 id="x1-61000III"></a>Temporal Databases</h1>
   <h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-620006"></a>Introduction</h3>
<!--l. 2822--><p class="noindent" >There are many applications in which temporal aspects need to be taken into account. Some examples are in the
academic, accounting, insurance, law, medicine,... These applications would greatly benefit from a built-in temporal
support in the DBMS, which would make application development more efficient with a potential increase in
performance. In this sense, a <span 
class="ecbx-1000">temporal DBMS </span>is a DBMS that provides mechanisms to store and manipulate
time-varying information.
   <div class="newtheorem">
<!--l. 2829--><p class="noindent" ><span class="head">
<a 
 id="x1-62001r1"></a>
<span 
class="ecbx-1000">Example 6.1.</span>  </span>A  case  study:  imagine  we  have  a  database  for  managing  personel,  with  the  relation
<span 
class="ectt-1000">Employee(Name, Salary, Title, BirthDate)</span>. It is easy to know the salary of the employee, or its birthdate:
   <!--l. 2834-->
<div class="lstlisting" id="listing-48"><span class="label"><a 
 id="x1-62002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62006r5"></a><span 
class="ecrm-0500">5</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Birthdate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62008r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Birthdate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62009r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62010r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 2846--><p class="indent" >   But it is often the case that we don&#8217;t only want to store the current state of things, but also a history. For instance,
it can be interesting to store the employment history by extending the relation <span 
class="ectt-1000">Employee(Name, Salary, Title,</span>
<span 
class="ectt-1000">BirthDate, FromDate, ToDate). A dataset sample for this could be the following:</span>
<div class="center" 
>
<!--l. 2851--><p class="noindent" >
<div class="tabular"> <table id="TBL-23" class="tabular" 
 
><colgroup id="TBL-23-1g"><col 
id="TBL-23-1"></colgroup><colgroup id="TBL-23-2g"><col 
id="TBL-23-2"></colgroup><colgroup id="TBL-23-3g"><col 
id="TBL-23-3"></colgroup><colgroup id="TBL-23-4g"><col 
id="TBL-23-4"></colgroup><colgroup id="TBL-23-5g"><col 
id="TBL-23-5"></colgroup><colgroup id="TBL-23-6g"><col 
id="TBL-23-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-2"  
class="td11"> Salary  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-3"  
class="td11">   Title     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-4"  
class="td11"> BirthDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-5"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-1-6"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-2"  
class="td11">  60K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-3"  
class="td11"> Assistant  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-4"  
class="td11">  9/9/60    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-5"  
class="td11">  1/1/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-2-6"  
class="td11">  1/6/95   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-3"  
class="td11"> Assistant  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-4"  
class="td11">  9/9/60    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-5"  
class="td11">  1/6/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-3-6"  
class="td11"> 1/10/95  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-3"  
class="td11"> Lecturer  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-4"  
class="td11">  9/9/60    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-5"  
class="td11">  1/10/95   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-4-6"  
class="td11">  1/2/96   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-3"  
class="td11"> Professor  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-4"  
class="td11">  9/9/60    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-5"  
class="td11">  1/2/96    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-23-5-6"  
class="td11">  1/1/97   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-23-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-23-6-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 2893--><p class="indent" >   For the underlying system, the date columns FromDate and ToDate are no different from the BirthDate column, but
it is obvious for us that the meaning is different: FromDate and ToDate need to be understood together as a period of
time.
<!--l. 2898--><p class="indent" >   Now, to know the employee&#8217;s current salary, the query gets more complex:
   <!--l. 2900-->
<div class="lstlisting" id="listing-49"><span class="label"><a 
 id="x1-62011r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62012r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62013r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">The</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">intervals</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">[)</span></span></div>
<!--l. 2906--><p class="indent" >   Another interesting query that we can think of now is determining the salary history, i.e., all different salaries earned
by the employee and in which period of time the employee was earning that salary. For our example, the result would
be:
<div class="center" 
>
<!--l. 2910--><p class="noindent" >
<div class="tabular"> <table id="TBL-24" class="tabular" 
 
><colgroup id="TBL-24-1g"><col 
id="TBL-24-1"></colgroup><colgroup id="TBL-24-2g"><col 
id="TBL-24-2"></colgroup><colgroup id="TBL-24-3g"><col 
id="TBL-24-3"></colgroup><colgroup id="TBL-24-4g"><col 
id="TBL-24-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-2"  
class="td11"> Salary  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-1-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-2"  
class="td11">  60K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-3"  
class="td11">  1/1/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-2-4"  
class="td11"> 1/6/95  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-1"  
class="td11">  John   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-3"  
class="td11">  1/6/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-24-3-4"  
class="td11"> 1/1/97  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-24-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-24-4-1"  
class="td11">        </td></tr></table></div>
</div>
<!--l. 2932--><p class="indent" >   But how can we achieve this?
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 2934--><p class="noindent" >One possibility is to print all the history, and let the user merge the pertinent periods.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 2936--><p class="noindent" >Another one is to use SQL as a means to perform this operation: we have to find those intervals that
     overlap or are adjacent and that should be merged.</li></ul>
<div class="center" 
>
<!--l. 2940--><p class="noindent" >
<!--l. 2941--><p class="noindent" ><img 
src="7_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_0.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 2944--><p class="indent" >   One way to do this in SQL is performing a loop that merges them in pairs, until there is nothing else to
merge:
   <!--l. 2947-->
<div class="lstlisting" id="listing-50"><span class="label"><a 
 id="x1-62014r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62015r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62016r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62017r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62018r5"></a><span 
class="ecrm-0500">5</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62019r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">repeat</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62020r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62021r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62022r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62023r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">have</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62024r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62025r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">does</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">end</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">begins</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62026r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62027r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62028r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62029r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62030r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62031r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62032r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62033r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">until</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">no</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">tuples</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">updated</span></span></div>
<!--l. 2970--><p class="indent" >   This loop is executed <span 
class="cmmi-10">logN </span>times in the worst case, where <span 
class="cmmi-10">N </span>is the number of tuples in a chain of overlapping
tuples. After the loop, we have to deleted extraneous, non-maximal intervals:
   <!--l. 2974-->
<div class="lstlisting" id="listing-51"><span class="label"><a 
 id="x1-62034r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62035r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62036r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62037r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62038r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62039r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62040r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">contained</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">(]</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62041r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62042r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">contained</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">[)</span></span></div>
<!--l. 2986--><p class="indent" >   The same thing can be achieved by unifying everything using a single SQL expression as
   <!--l. 2989-->
<div class="lstlisting" id="listing-52"><span class="label"><a 
 id="x1-62043r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62044r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62045r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62046r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62047r5"></a><span 
class="ecrm-0500">5</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62048r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62049r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62050r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">salary</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62051r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62052r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62053r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62054r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62055r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">happens</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">entirely</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62056r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62057r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62058r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">as</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62059r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62060r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T1</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">which</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62061r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62062r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62063r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Temp</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62064r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62065r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62066r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62067r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62068r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">L</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62069r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 3019--><p class="indent" >   This is a complex query, and the logic is that if we want to merge the periods, we want to get a From and a To such
that every period contained between From and To touches or intersect another period, and no period from outside From
and To touches or interesects any of the periods inside:
<table 
class="align-star">
<tr><td 
class="align-odd"><img 
src="summary58x.png" alt="(f.From, t.To)"  class="left" align="middle"><span 
class="cmmi-10">&#x00A0;such</span><span 
class="cmmi-10">&#x00A0;that</span><span 
class="cmmi-10">&#x00A0;</span></td><td 
class="align-even"><span 
class="cmsy-10">&#x2200;</span><span 
class="cmmi-10">x </span><span 
class="cmr-10">: </span><img 
src="summary59x.png" alt="(x.F rom &#x003E; f.f rom  &#x2227;x.To &#x003C; t.To)"  class="left" align="middle"> <img 
src="summary60x.png" alt="=&#x21D2;"  class="Longrightarrow" ><span 
class="cmsy-10">&#x2203;</span><span 
class="cmmi-10">y </span><span 
class="cmr-10">: </span><img 
src="summary61x.png" alt="(y.F rom  &#x003C; x.F rom &#x2227;x.F rom  &#x2264; y.To)"  class="left" align="middle"></td><td 
class="align-label"></td><td 
class="align-label">
</td></tr><tr><td 
class="align-odd"></td>                        <td 
class="align-even"><span 
class="cmsy-10">&#x2227;</span></td>                                                                         <td 
class="align-label"></td><td 
class="align-label">
</td></tr><tr><td 
class="align-odd"></td>                        <td 
class="align-even"><span 
class="msbm-10">&#x2204;</span><span 
class="cmmi-10">x </span><span 
class="cmr-10">: </span><img 
src="summary62x.png" alt="(x.F rom &#x003C; f.F rom &#x2227; x.T o &#x2265; f.From )"  class="left" align="middle"> <span 
class="cmsy-10">&#x2228;</span><img 
src="summary63x.png" alt="(x.F rom  &#x003C; t.To &#x2227;x.To &#x2265; t.To)"  class="left" align="middle"></td>         <td 
class="align-label"></td><td 
class="align-label"></td></tr></table>
<!--l. 3029--><p class="indent" >   Now, the <span 
class="cmsy-10">&#x2200; </span>cannot be used in SQL, but we can use the fact that <span 
class="cmsy-10">&#x2200;</span><span 
class="cmmi-10">x </span><span 
class="cmr-10">: </span><span 
class="cmmi-10">P</span><img 
src="summary64x.png" alt="(x)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2261;¬¬</span><img 
src="summary65x.png" alt="(&#x2200;x : P (x))"  class="left" align="middle"> <span 
class="cmsy-10">&#x2261;¬</span><img 
src="summary66x.png" alt="(&#x2203;x : ¬P (x))"  class="left" align="middle"> <span 
class="cmsy-10">&#x2261; </span><span 
class="msbm-10">&#x2204;</span><span 
class="cmmi-10">x </span><span 
class="cmr-10">: </span><span 
class="cmsy-10">¬</span><span 
class="cmmi-10">P</span><img 
src="summary67x.png" alt="    (x)"  class="left" align="middle">,
noting also that <span 
class="cmsy-10">¬</span><img 
src="summary68x.png" alt="(A  =&#x21D2;  B )"  class="left" align="middle"> <span 
class="cmsy-10">&#x2261; </span><span 
class="cmmi-10">A</span><span 
class="cmsy-10">&#x2227;¬</span><span 
class="cmmi-10">B</span>, and that is the query that we have shown above. An intuitive visualization is
the diagram in Figure <a 
href="#x1-62070r1">1<!--tex4ht:ref: fig:Merging-temporal-intervals. --></a>.
<!--l. 3035--><p class="indent" >   <hr class="figure"><div class="figure" 
><a 
 id="x1-62070r1"></a>  <img 
src="8_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_1.png" alt="PIC"  
width="43" height="43" >
                                                                                            
                                                                                            
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">Merging temporal intervals. Blue is permitted; Green, Red and Orange are forbidden.</span></div><!--tex4ht:label?: x1-62070r1 -->
<!--l. 3042--><p class="indent" >   </div><hr class="endfigure">
<!--l. 3044--><p class="indent" >   Another possibility to achieve this temporal features is to make the attributes salary and title temporal, instead of
the whole table. For this, we can split the information of the table into three tables:
<!--l. 3048--><p class="indent" >   <span 
class="ectt-1000">Employee(Name, BirthDate)</span>
<!--l. 3050--><p class="indent" >   <span 
class="ectt-1000">EmployeeSal(Name, Salary, FromDate, ToDate)</span>
<!--l. 3052--><p class="indent" >   <span 
class="ectt-1000">EmployeeTitle(Name, Title, FromDate, ToDate)</span>
<!--l. 3054--><p class="indent" >   Now, getting the salary history is easier, because we only need to query the table <span 
class="ectt-1000">EmployeeSal:</span>
   <!--l. 3057-->
<div class="lstlisting" id="listing-53"><span class="label"><a 
 id="x1-62071r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62072r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62073r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
<!--l. 3063--><p class="indent" >   But, what if we want to obtain the history of the combinations of <img 
src="summary69x.png" alt="(salary,title)"  class="left" align="middle">? We have to perform a <span 
class="ecbx-1000">temporal</span>
<span 
class="ecbx-1000">join</span>. Say we have the following tables:
<div class="center" 
>
<!--l. 3066--><p class="noindent" >
<div class="tabular"> <table id="TBL-25" class="tabular" 
 
><colgroup id="TBL-25-1g"><col 
id="TBL-25-1"></colgroup><colgroup id="TBL-25-2g"><col 
id="TBL-25-2"></colgroup><colgroup id="TBL-25-3g"><col 
id="TBL-25-3"></colgroup><colgroup id="TBL-25-4g"><col 
id="TBL-25-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-25-1-1"  
class="td11"></td>              <div class="multicolumn"  style="white-space:nowrap; text-align:center;">EmployeeSal</div>                      
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-2"  
class="td11"> Salary  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-2"  
class="td11">  60K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-3"  
class="td11">  1/1/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-3-4"  
class="td11"> 1/6/95  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-4-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-4-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-4-3"  
class="td11">  1/6/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-25-4-4"  
class="td11"> 1/1/97  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-25-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-25-5-1"  
class="td11">       </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-26" class="tabular" 
 
><colgroup id="TBL-26-1g"><col 
id="TBL-26-1"></colgroup><colgroup id="TBL-26-2g"><col 
id="TBL-26-2"></colgroup><colgroup id="TBL-26-3g"><col 
id="TBL-26-3"></colgroup><colgroup id="TBL-26-4g"><col 
id="TBL-26-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-26-1-1"  
class="td11"></td>               <div class="multicolumn"  style="white-space:nowrap; text-align:center;">EmployeeTitle</div>                        
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-2"  
class="td11">   Title     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-2"  
class="td11"> Assistant  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-3"  
class="td11">  1/1/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-3-4"  
class="td11"> 1/10/95  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-4-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-4-2"  
class="td11"> Lecturer  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-4-3"  
class="td11">  1/10/95   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-4-4"  
class="td11">  1/2/96   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-5-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-5-2"  
class="td11"> Professor  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-5-3"  
class="td11">  1/2/96    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-26-5-4"  
class="td11">  1/1/97   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-26-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-26-6-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 3116--><p class="indent" >   In this case, the answer to our temporal join would be:
<div class="center" 
>
<!--l. 3117--><p class="noindent" >
<div class="tabular"> <table id="TBL-27" class="tabular" 
 
><colgroup id="TBL-27-1g"><col 
id="TBL-27-1"></colgroup><colgroup id="TBL-27-2g"><col 
id="TBL-27-2"></colgroup><colgroup id="TBL-27-3g"><col 
id="TBL-27-3"></colgroup><colgroup id="TBL-27-4g"><col 
id="TBL-27-4"></colgroup><colgroup id="TBL-27-5g"><col 
id="TBL-27-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-27-1-1"  
class="td11"></td>             <div class="multicolumn"  style="white-space:nowrap; text-align:center;">EmployeeSal<img 
src="summary70x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" >EmployeeTitle</div>                     
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-1"  
class="td11"> Name  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-2"  
class="td11"> Salary  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-3"  
class="td11">   Title     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-4"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-2-5"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-2"  
class="td11">  60K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-3"  
class="td11"> Assistant  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-4"  
class="td11">  1/1/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-3-5"  
class="td11">  1/6/95   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-3"  
class="td11"> Assistant  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-4"  
class="td11">  1/6/95    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-4-5"  
class="td11"> 1/10/95  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-5-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-5-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-5-3"  
class="td11"> Lecturer  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-5-4"  
class="td11">  1/10/95   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-5-5"  
class="td11">  1/2/96   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-6-1"  
class="td11">  John  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-6-2"  
class="td11">  70K   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-6-3"  
class="td11"> Professor  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-6-4"  
class="td11">  1/2/96    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-27-6-5"  
class="td11">  1/1/97   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-27-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-27-7-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 3156--><p class="indent" >   For these, again, we could print the two tables and let the user make the suitable combinations, but it feels better to
solve the problem using SQL. The query can be done as:
   <!--l. 3160-->
<div class="lstlisting" id="listing-54"><span class="label"><a 
 id="x1-62074r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Title</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">toDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62075r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62076r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">name</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62077r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62078r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">CASE</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">S</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">contained</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62079r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62080r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62081r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62082r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Title</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62083r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62084r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">name</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62085r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62086r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">CASE</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">S</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">inside</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">after</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62087r14"></a><span 
class="ecrm-0500">14</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62088r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62089r16"></a><span 
class="ecrm-0500">16</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62090r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Title</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62091r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62092r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">name</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62093r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62094r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">CASE</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">inside</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">S</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">after</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62095r22"></a><span 
class="ecrm-0500">22</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62096r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62097r24"></a><span 
class="ecrm-0500">24</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62098r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Title</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">toDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62099r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62100r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">name</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62101r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62102r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">CASE</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">4:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">T</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">contained</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">S</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span></div>
<!--l. 3192--><p class="indent" >   The four cases are depicted in Figure <a 
href="#x1-62103r2">2<!--tex4ht:ref: fig:Temporal-join:-cases. --></a>.
<!--l. 3194--><p class="indent" >   <hr class="figure"><div class="figure" 
><a 
 id="x1-62103r2"></a>  <img 
src="9_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_2.png" alt="PIC"  
width="43" height="43" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">Temporal join: cases.</span></div><!--tex4ht:label?: x1-62103r2 -->
<!--l. 3199--><p class="indent" >   </div><hr class="endfigure">
<!--l. 3201--><p class="indent" >   If we are using a system with embedded temporal capabilities, i.e., implementing TSQL2 (temporal SQL), we can let
the system do it and just perform a join as we do it usually:
   <!--l. 3205-->
<div class="lstlisting" id="listing-55"><span class="label"><a 
 id="x1-62104r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Title</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-62105r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeSal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">EmployeeTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span></div>
                                                                                            
                                                                                            
   </div>
<!--l. 3209--><p class="indent" >
<!--l. 3211--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">7   </span> <a 
 id="x1-630007"></a>Time Ontology</h3>
<!--l. 3213--><p class="noindent" >Time can be modelled in several ways, depending on the use case:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3215--><p class="noindent" ><span 
class="ecbx-1000">Linear</span>: there is a total order in the instants.
     </li>
     <li class="itemize">
     <!--l. 3216--><p class="noindent" ><span 
class="ecbx-1000">Hypothetical</span>: the time is linear to the past, but from the current moment on, there several possible
     timelines.
     </li>
     <li class="itemize">
     <!--l. 3218--><p class="noindent" ><span 
class="ecbx-1000">Directed Acyclic Graph (DAG)</span>: hypothetical approach in which some possible futures can merge.
     </li>
     <li class="itemize">
     <!--l. 3220--><p class="noindent" ><span 
class="ecbx-1000">Periodic/cyclic time</span>: such as weeks, months... useful for recurrent processes.</li></ul>
<!--l. 3223--><p class="noindent" >We are going to assume a linear time structure.
<!--l. 3225--><p class="indent" >   Regarding the limits of the timeline, we can classify it:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3227--><p class="noindent" >Unbounded: it is infinite to the past and to the future.
     </li>
     <li class="itemize">
     <!--l. 3228--><p class="noindent" >Time origin exists: it is bounded on the left, and infinite to the future.
     </li>
     <li class="itemize">
     <!--l. 3230--><p class="noindent" >Bounded time: it is bounded on both ends.</li></ul>
<!--l. 3232--><p class="noindent" >Also, the bounds can be unspecified or specified.
<!--l. 3234--><p class="indent" >   We also need to consider the density of the time measures (i.e. what is an instant?). In this sense, we can classify the
timeline as:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3237--><p class="noindent" >Discrete:  the  timeline  is  isomorphic  to  the  integers.  This  means  it  is  composed  of  a  sequence  of
     non-descomposable time periods, of some fixed minimal duration, named <span 
class="ecbx-1000">chronons </span>and between a pair
     of chronons there is a finite number of chronons.
     </li>
     <li class="itemize">
     <!--l. 3241--><p class="noindent" >Dense: in this case, it is isomorphic to the ration numbers, with an infinite number of instants between
     each pair of chronons.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 3243--><p class="noindent" >Continuous: the timeline is isomorphic to the real numbers, and again there is an infinite amount of
     instants between each pair of chronons.</li></ul>
<!--l. 3246--><p class="noindent" >Usually, a distance between chronons can be defined.
<!--l. 3248--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.1   </span> <a 
 id="x1-640007.1"></a>TSQL2: Time ontology</h4>
<!--l. 3250--><p class="noindent" >TSQL2 uses a linear time structure, bounded on both ends. The timeline is composed of chronons, which is the smallest
possible granularity. Consecutive chronons can be grouped together into <span 
class="ecbx-1000">granules</span>, giving multiple granularities and
enable to convert from one another. The density is not defined and it is not possible to make questions in different
granularities. The implementation is basically as discrete and the distance between two chronons is the amount of
chronons in-between.
   <div class="tcolorbox tcolorbox" id="tcolobox-11">    
<div class="tcolorbox-title">
                                                                                            
                                                                                            
   </div> 
<div class="tcolorbox-content"><!--l. 3259--><p class="noindent" ><span 
class="ecbx-1000">Temporal Types</span>
       <ul class="itemize1">
       <li class="itemize">
       <!--l. 3261--><p class="noindent" ><span 
class="ecbx-1000">Instant</span>: a chronon in the time line.
              <ul class="itemize2">
              <li class="itemize">
              <!--l. 3263--><p class="noindent" ><span 
class="ecbx-1000">Event</span>: an instantaneous fact, something ocurring at an instant.
              </li>
              <li class="itemize">
              <!--l. 3264--><p class="noindent" ><span 
class="ecbx-1000">Event ocurrence time</span>: valid-time instant at which the event occurs in the real world.</li></ul>
        </li>
        <li class="itemize">
        <!--l. 3267--><p class="noindent" ><span 
class="ecbx-1000">Instant set</span>
       </li>
       <li class="itemize">
       <!--l. 3268--><p class="noindent" ><span 
class="ecbx-1000">Time period</span>: the time between two instants (sometimes called interval, but this conflicts with the SQL
        type INTERVAL)
        </li>
        <li class="itemize">
        <!--l. 3270--><p class="noindent" ><span 
class="ecbx-1000">Time interval</span>: a directed duration of time
        </li>
        <li class="itemize">
        <!--l. 3271--><p class="noindent" ><span 
class="ecbx-1000">Duration</span>: an amount of time with a known length, but no specific starting or ending instants.
              <ul class="itemize2">
              <li class="itemize">
              <!--l. 3274--><p class="noindent" ><span 
class="ecbx-1000">Positive interval</span>: forward motion time.
              </li>
              <li class="itemize">
              <!--l. 3275--><p class="noindent" ><span 
class="ecbx-1000">Negative interval</span>: backward motion time.</li></ul>
        </li>
        <li class="itemize">
        <!--l. 3277--><p class="noindent" ><span 
class="ecbx-1000">Temporal element</span>: finite union of periods.</li></ul>
 
</div> 
</div>
<!--l. 3281--><p class="indent" >   This way, in SQL92 we have the following Temporal Types:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3283--><p class="noindent" >DATE (YYYY-MM-DD)
     </li>
     <li class="itemize">
     <!--l. 3284--><p class="noindent" >TIME (HH:MM:SS)
     </li>
     <li class="itemize">
     <!--l. 3285--><p class="noindent" >DATETIME (YYYY-MM-DD HH:MM:SS)
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 3286--><p class="noindent" >INTERVAL (no default granularity)</li></ul>
<!--l. 3288--><p class="noindent" >And in TSQL2 we have:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3290--><p class="noindent" >PERIOD: DATETIME - DATETIME</li></ul>
<!--l. 3293--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">7.1.1   </span> <a 
 id="x1-650007.1.1"></a>Time and facts</h5>
<!--l. 3295--><p class="noindent" >The <span 
class="ecbx-1000">valid time of a fact </span>is the time in which the fact is true in the modelled reality, which is independant of its
recording in the database and can be past, present or future.
<!--l. 3299--><p class="indent" >   The <span 
class="ecbx-1000">transaction time of a fact </span>is when the fact is current in the database and may be retrieved.
<!--l. 3302--><p class="indent" >   These two dimensions are orthogonal.
<!--l. 3304--><p class="indent" >   There are four types of tables:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3306--><p class="noindent" ><span 
class="ecbx-1000">Snapshot</span>: these are usual SQL table, in which there is no temporality involved. What there is in the table
     is the current truth. They can be modified through time, but we only have access to the current
     truth.
     <div class="center" 
>
<!--l. 3310--><p class="noindent" >
<!--l. 3311--><p class="noindent" ><img 
src="10_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_4.png" alt="PIC"  
width="43" height="43" >
</div>
     </li>
     <li class="itemize">
     <!--l. 3313--><p class="noindent" ><span 
class="ecbx-1000">Transaction Time</span>: these tables are a set of snapshots tables, in which the past states can be queried for
     information, but they cannot be modified. When the current truth is modified, a snapshot is taken to preserved
     the history of changes.
     <div class="center" 
>
<!--l. 3317--><p class="noindent" >
<!--l. 3318--><p class="noindent" ><img 
src="11_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_3.png" alt="PIC"  
width="43" height="43" >
</div>
     </li>
     <li class="itemize">
     <!--l. 3320--><p class="noindent" ><span 
class="ecbx-1000">Valid time</span>: these are like transaction tables, but in which modification is permitted everywhere.
     <div class="center" 
>
<!--l. 3322--><p class="noindent" >
<!--l. 3323--><p class="noindent" ><img 
src="12_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_5.png" alt="PIC"  
width="43" height="43" >
</div>
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 3325--><p class="noindent" ><span 
class="ecbx-1000">Bitemporal</span>: in this case, we have valid time tables that can be taken snapshots to preserve full
     states.
     <div class="center" 
>
<!--l. 3327--><p class="noindent" >
<!--l. 3328--><p class="noindent" ><img 
src="13_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_6.png" alt="PIC"  
width="43" height="43" >
</div>
     </li></ul>
<!--l. 3332--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">8   </span> <a 
 id="x1-660008"></a>Temporal Conceptual Modeling</h3>
<!--l. 3334--><p class="noindent" >Conceptual modeling is important because it focuses on the application, rather than the implementation. Thus, it is
technology independent, which enhances the portability and the durability of the solution. It is also user oriented and
uses a formal, unambiguous specification, allowing for visual interfaces and teh exchange and integration of
information.
<!--l. 3341--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.1   </span> <a 
 id="x1-670008.1"></a>The conceptual manifesto</h4>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3343--><p class="noindent" >Semantically powerful data structures.
     </li>
     <li class="itemize">
     <!--l. 3344--><p class="noindent" >Simple data model, with few clean concepts and standard well-known semantics.
     </li>
     <li class="itemize">
     <!--l. 3346--><p class="noindent" >No aritifical time objects.
     </li>
     <li class="itemize">
     <!--l. 3347--><p class="noindent" >Time orthogonal to data structures.
     </li>
     <li class="itemize">
     <!--l. 3348--><p class="noindent" >Various granularities.
     </li>
     <li class="itemize">
     <!--l. 3349--><p class="noindent" >Clean, visual notations.
     </li>
     <li class="itemize">
     <!--l. 3350--><p class="noindent" >Intuitive icons/symbols.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 3351--><p class="noindent" >Explicit temporal relationships and integrity constraints.
     </li>
     <li class="itemize">
     <!--l. 3352--><p class="noindent" >Support of valid time and transaction time.
     </li>
     <li class="itemize">
     <!--l. 3353--><p class="noindent" >Past to future.
     </li>
     <li class="itemize">
     <!--l. 3354--><p class="noindent" >Co-existence of temporal and tradicional data.
     </li>
     <li class="itemize">
     <!--l. 3355--><p class="noindent" >Query languages.
     </li>
     <li class="itemize">
     <!--l. 3356--><p class="noindent" >Complete and precise definition of the model.</li></ul>
<!--l. 3358--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-67001r3"></a><img 
src="14_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado7.png" alt="PIC"  
width="50" height="50" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;3: </span><span  
class="content">An example of a temporal model in three different ways.</span></div><!--tex4ht:label?: x1-67001r3 -->
<!--l. 3364--><p class="noindent" ></div><hr class="endfigure">
<!--l. 3366--><p class="indent" >   In Figure <a 
href="#x1-67001r3">3<!--tex4ht:ref: fig:An-example-of --></a>, we can see three different ways to model a schema. Note how they are different, because the temporal
attributes are dealt with differently in each of the models.
<!--l. 3370--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.1   </span> <a 
 id="x1-680008.1.1"></a>MADS temporal data types</h5>
<!--l. 3372--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-68001r4"></a>
                                                                                            
                                                                                            
<!--l. 3374--><p class="noindent" ><img 
src="15_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado8.png" alt="PIC"  
width="43" height="43" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;4: </span><span  
class="content">The MADS temporal data types.</span></div><!--tex4ht:label?: x1-68001r4 -->
                                                                                            
                                                                                            
<!--l. 3377--><p class="noindent" ></div><hr class="endfigure">
<!--l. 3379--><p class="indent" >   Time, SimpleTime and ComplexTime are abstract classes.
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.2   </span> <a 
 id="x1-690008.1.2"></a>Temporal objects</h5>
<!--l. 3383--><p class="noindent" >A temporal object is marked with the symbol <img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
>, and it indicates that the object has a set of periods of validity
associated.
<!--l. 3387--><p class="indent" >   For example, if we have the relation <span 
class="ectt-1000">Employee</span><img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
><span 
class="ectt-1000">(name, birthDate, address, salary, projects (1..n))</span>,
then, an instance of the relation can be:
<div class="center" 
>
<!--l. 3390--><p class="noindent" >
<div class="tabular"> <table id="TBL-28" class="tabular" 
 
><colgroup id="TBL-28-1g"><col 
id="TBL-28-1"></colgroup><colgroup id="TBL-28-2g"><col 
id="TBL-28-2"></colgroup><colgroup id="TBL-28-3g"><col 
id="TBL-28-3"></colgroup><colgroup id="TBL-28-4g"><col 
id="TBL-28-4"></colgroup><colgroup id="TBL-28-5g"><col 
id="TBL-28-5"></colgroup><colgroup id="TBL-28-6g"><col 
id="TBL-28-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-28-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-1"  
class="td11"> <div class="multirow"><!-- rows=2 -->
Peter</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-2"  
class="td11"> <div class="multirow"><!-- rows=2 -->
8/9/64</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-3"  
class="td11"> <div class="multirow"><!-- rows=2 -->
Rue de la Paix</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-4"  
class="td11"> <div class="multirow"><!-- rows=2 -->
5000</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-5"  
class="td11"> <div class="multirow"><!-- rows=2 -->
{MADS, HELIOS}</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-1-6"  
class="td11"> <span id="textcolor1">[7/94-6/96] [7/97-6/98] Active</span>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-28-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td></td><td></td><td></td><td></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-28-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-2"  
class="td11">        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-3"  
class="td11">               </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-5"  
class="td11">                  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-28-3-6"  
class="td11">    <span id="textcolor2">[7/96-7/97] Suspended</span>       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-28-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-28-4-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 3405--><p class="indent" >   The red colored text are the life cycle information of the record.
<!--l. 3407--><p class="indent" >   The life cycle of an object can be <span 
class="ecbx-1000">continuous </span>if there are no gaps between its creation and its deletion, or
<span 
class="ecbx-1000">discontinuous </span>if such gaps exist.
<!--l. 3411--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.3   </span> <a 
 id="x1-700008.1.3"></a>Non-temporal objects</h5>
<!--l. 3413--><p class="noindent" >Non-temporal objects can be modeled with the absence of a lifecycle, or with a default life cycle which encodes that it is
always active. A usual option is to put it as <img 
src="summary71x.png" alt="[0,&#x221E; ]"  class="left" align="middle">.
<!--l. 3417--><p class="indent" >   The <span 
class="ecbx-1000">TSQL2 policy </span>is that temporal operators are not allowed on non-temporal relations. So if we need to perform
some kind of temporal operation in non-temporal relations, such as a join with a temporal relation, then we need to use
the default life cycle.
   <div class="newtheorem">
<!--l. 3421--><p class="noindent" ><span class="head">
<a 
 id="x1-70001r1"></a>
<span 
class="ecbx-1000">Example 8.1.</span>  </span>An example is the following query:
   <!--l. 3424-->
<div class="lstlisting" id="listing-56"><span class="label"><a 
 id="x1-70002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">PID</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-70003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Department</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-70004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">dept</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Department</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-70005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">VALID</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OVERLAPS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">[1/1/96-31/12/96]</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-70006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept</span></span></div>
   </div>
<!--l. 3431--><p class="indent" >
<!--l. 3433--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.4   </span> <a 
 id="x1-710008.1.4"></a>Temporal attributes</h5>
<!--l. 3435--><p class="noindent" >A temporal attribute is marked with the symbol <img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
>, and it indicates that the attribute itself has a lifecycle
associated.
<!--l. 3438--><p class="indent" >   For example, if we have the relation <span 
class="ectt-1000">Employee(name, birthDate, address, salary</span><img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
><span 
class="ectt-1000">, projects (1..n))</span>,
then, an instance of the relation can be:
<div class="center" 
>
<!--l. 3441--><p class="noindent" >
                                                                                            
                                                                                            
<div class="tabular"> <table id="TBL-29" class="tabular" 
 
><colgroup id="TBL-29-1g"><col 
id="TBL-29-1"></colgroup><colgroup id="TBL-29-2g"><col 
id="TBL-29-2"></colgroup><colgroup id="TBL-29-3g"><col 
id="TBL-29-3"></colgroup><colgroup id="TBL-29-4g"><col 
id="TBL-29-4"></colgroup><colgroup id="TBL-29-5g"><col 
id="TBL-29-5"></colgroup><colgroup id="TBL-29-6g"><col 
id="TBL-29-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-1"  
class="td11"> <div class="multirow"><!-- rows=2 -->
Peter</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-2"  
class="td11"> <div class="multirow"><!-- rows=2 -->
8/9/64</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-3"  
class="td11"> <div class="multirow"><!-- rows=2 -->
Rue de la Paix</div>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-4"  
class="td11"> 4000  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-5"  
class="td11"> <span id="textcolor3">[7/94-6/96] </span>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-1-6"  
class="td11"> <div class="multirow"><!-- rows=2 -->
{MADS, HELIOS}</div>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-29-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td></td><td></td><td><hr></td><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-3-1"  
class="td11">
</td></tr><tr 
class="cline"><td></td><td></td><td></td><td></td><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-1"  
class="td11">       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-2"  
class="td11">        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-3"  
class="td11">               </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-4"  
class="td11"> 5000  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-5"  
class="td11"> <span id="textcolor4">[6/96-Now] </span>  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-29-4-6"  
class="td11">                  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-29-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-29-5-1"  
class="td11">       </td></tr></table></div>
</div>
<!--l. 3457--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-720008.1.4"></a>Temporal complex attributes</h5>
<!--l. 3459--><p class="noindent" >It is also possible to have temporal complex attributes, meaning attributes with subattributes. The temporality can be
in either the full attribute, in which case a lifecyle will be attached to the whole attribute, or to a subattribute, in which
case the lifecycle will be attached to only the subattribute.
<!--l. 3465--><p class="indent" >   For example, can have the relation <span 
class="ectt-1000">Laboratory(name, projects (1..n) </span><img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
>  <span 
class="ectt-1000">{name, manager, budget}) </span>and
the relation <span 
class="ectt-1000">Laboratory(name, projects (1..n) {name, manager </span><img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
><span 
class="ectt-1000">, budget}).</span>
<!--l. 3471--><p class="indent" >   An example of the first relation is:
<div class="center" 
>
<!--l. 3472--><p class="noindent" >
<div class="tabular"> <table id="TBL-30" class="tabular" 
 
><colgroup id="TBL-30-1g"><col 
id="TBL-30-1"></colgroup><colgroup id="TBL-30-2g"><col 
id="TBL-30-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-30-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-30-1-1"  
class="td11">                           <div class="multicolumn"  style="white-space:nowrap; text-align:center;">LBD</div>                                          
</td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-30-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-30-2-1"  
class="td11">          {(MADS,Chris,1500)}                </td><td  style="white-space:nowrap; text-align:center;" id="TBL-30-2-2"  
class="td11"> <span id="textcolor5">[1/1/95-31/12/95]</span>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-30-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-30-3-1"  
class="td11"> {(MADS,Chris,1500),(Helios,Martin,2000)}  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-30-3-2"  
class="td11">  <span id="textcolor6">[31/12/95-Now]</span>   </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-30-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-30-4-1"  
class="td11">                                      </td></tr></table></div>
</div>
<!--l. 3486--><p class="indent" >   An example of the second relation is:
<div class="center" 
>
<!--l. 3487--><p class="noindent" >
<div class="tabular"> <table id="TBL-31" class="tabular" 
 
><colgroup id="TBL-31-1g"><col 
id="TBL-31-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-31-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-31-1-1"  
class="td11">                                                                                                        LBD                                                                                                                                                                    </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-31-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-31-2-1"  
class="td11"> {(MADS,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-32" class="tabular" 
 
><colgroup id="TBL-32-1g"><col 
id="TBL-32-1"></colgroup><colgroup id="TBL-32-2g"><col 
id="TBL-32-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-32-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-1"  
class="td11">Stef</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-1-2"  
class="td11"><span id="textcolor7">1/1/95-31/12/95</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-32-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-1"  
class="td11">Chris</td><td  style="white-space:nowrap; text-align:center;" id="TBL-32-2-2"  
class="td11"> <span id="textcolor8">31/12/95-Now</span>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-32-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-32-3-1"  
class="td11">    </td></tr></table>                                                                                      </div>,1500),(Helios,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-33" class="tabular" 
 
><colgroup id="TBL-33-1g"><col 
id="TBL-33-1"></colgroup><colgroup id="TBL-33-2g"><col 
id="TBL-33-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-33-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-33-1-1"  
class="td11">John</td><td  style="white-space:nowrap; text-align:center;" id="TBL-33-1-2"  
class="td11"><span id="textcolor9">31/12/95-Now</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-33-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-33-2-1"  
class="td11"> </td></tr></table>                                                                        </div>,2000)}  </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-31-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-31-3-1"  
class="td11">                                                                                                                                                                                                                    </td></tr></table>
</div>
</div>
<!--l. 3512--><p class="indent" >   In this second case, if we update manager, we add one new element to the manager history. If we update the project
name, we would simply change it, because project is not temporal.
<!--l. 3516--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.5   </span> <a 
 id="x1-730008.1.5"></a>Attribute timestamping properties</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3518--><p class="noindent" >Attribute types / timestamping: none, irregular, regular, instants, durations,...
     </li>
     <li class="itemize">
     <!--l. 3520--><p class="noindent" >Cardinalities: snapshot and DBlifespan.
     </li>
     <li class="itemize">
     <!--l. 3521--><p class="noindent" >Identifiers: snapshot or DBlifespan.</li></ul>
<!--l. 3523--><p class="noindent" >MADS has no implicit constraint, even if they make sense, such as:
                                                                                            
                                                                                            
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3525--><p class="noindent" >The validity period of an attribute must be within the lifecycle of the object it belongs to.
     </li>
     <li class="itemize">
     <!--l. 3527--><p class="noindent" >The validity period of a complex attribute is the union of the validity periods of its components.</li></ul>
<!--l. 3531--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.6   </span> <a 
 id="x1-740008.1.6"></a>Temporal generalization</h5>
<!--l. 3533--><p class="noindent" >The life cycles are inherited from parent classes, and more temporal attributes can be added. For example:
<div class="center" 
>
<!--l. 3535--><p class="noindent" >
<!--l. 3536--><p class="noindent" ><img 
src="17_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_7.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 3539--><p class="indent" >   In this case, Employee is temporal, even though its parent is not. Employee inherits the temporal attribute
address.
<!--l. 3542--><p class="indent" >   Another example:
<div class="center" 
>
<!--l. 3543--><p class="noindent" >
<!--l. 3544--><p class="noindent" ><img 
src="18_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_8.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 3547--><p class="indent" >   In this case, both Temporary and Permanent are temporal objects.
<!--l. 3549--><p class="indent" >   In the case in which the child is also declared as temporal, it is called <span 
class="ecbx-1000">dynamic temporal generalization </span>and in
that case the objects maintains two lifecycles: the one inherited from its parent, and the one defined on itself. For
example:
<div class="center" 
>
<!--l. 3553--><p class="noindent" >
<!--l. 3554--><p class="noindent" ><img 
src="19_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_temporal_9.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 3557--><p class="indent" >   In this case, Permanent employees have two lifecycles: their lifecycle as a permanent and the inherited lifecycle as an
employee. The redefined life cycle has to be including the one inherited.
<!--l. 3561--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.7   </span> <a 
 id="x1-750008.1.7"></a>Temporal relationships</h5>
<!--l. 3563--><p class="noindent" >A temporal relationship is also marked with the symbol <img 
src="16_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado9.png" alt="PIC"  
>, meaning that the relation between the objects possesses a
lifecycle.
<!--l. 3566--><p class="indent" >   Some usual constraints used in temporal relationships:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3568--><p class="noindent" >The <span 
class="ecbx-1000">validity period of a relationship </span>must be within the intersection of the life cycles of the objects
     it links.
     </li>
     <li class="itemize">
     <!--l. 3570--><p class="noindent" >A temporal relationship can only link temporal objects.</li></ul>
                                                                                            
                                                                                            
<!--l. 3572--><p class="noindent" >Again, MADS does not impose any constraints.
   <div class="newtheorem">
<!--l. 3573--><p class="noindent" ><span class="head">
<a 
 id="x1-75001r2"></a>
<span 
class="ecbx-1000">Example 8.2.</span>  </span>Let&#8217;s see some temporal relationships.
<div class="center" 
>
<!--l. 3575--><p class="noindent" >
<!--l. 3576--><p class="noindent" ><img 
src="20_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_A___d_Databases_LectureNotes_source_temporal_10.png" alt="PIC"  
width="43" height="43" >
</div>
<!--l. 3579--><p class="indent" >   In this case, a possible data can be:
<div class="center" 
>
<!--l. 3580--><p class="noindent" >
<div class="tabular"> <table id="TBL-34" class="tabular" 
 
><colgroup id="TBL-34-1g"><col 
id="TBL-34-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-34-1-1"  
class="td11">                                            Employee                                                                     </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-34-2-1"  
class="td11"> e1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-35" class="tabular" 
 
><colgroup id="TBL-35-1g"><col 
id="TBL-35-1"></colgroup><colgroup id="TBL-35-2g"><col 
id="TBL-35-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-1-1"  
class="td11">   John     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[7/8/77-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-3-1"  
class="td11">   4/7/55     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-3-2"  
class="td11">           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-35-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-4-1"  
class="td11"></td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-5-1"  
class="td11">Bd Haussman</td><td  style="white-space:nowrap; text-align:center;" id="TBL-35-5-2"  
class="td11">           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-35-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-35-6-1"  
class="td11">            </td></tr></table>                                                                               </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-34-3-1"  
class="td11"> e2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-36" class="tabular" 
 
><colgroup id="TBL-36-1g"><col 
id="TBL-36-1"></colgroup><colgroup id="TBL-36-2g"><col 
id="TBL-36-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-1-1"  
class="td11">      Peter         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-36-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/2/78-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-3-1"  
class="td11">     8/10/60        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-36-3-2"  
class="td11">           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-36-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-4-1"  
class="td11"></td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-5-1"  
class="td11">Bd Général Jacques</td><td  style="white-space:nowrap; text-align:center;" id="TBL-36-5-2"  
class="td11">           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-36-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-36-6-1"  
class="td11">                 </td></tr></table>                                                                         </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-34-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-34-4-1"  
class="td11">                                                                                                </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-37" class="tabular" 
 
><colgroup id="TBL-37-1g"><col 
id="TBL-37-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-37-1-1"  
class="td11">                                                       WorksOn                                                                                       </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-37-2-1"  
class="td11"> w1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-38" class="tabular" 
 
><colgroup id="TBL-38-1g"><col 
id="TBL-38-1"></colgroup><colgroup id="TBL-38-2g"><col 
id="TBL-38-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-38-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-38-1-1"  
class="td11">(e1,p2,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-39" class="tabular" 
 
><colgroup id="TBL-39-1g"><col 
id="TBL-39-1"></colgroup><colgroup id="TBL-39-2g"><col 
id="TBL-39-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-39-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-39-1-2"  
class="td11">[7/8/77-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-39-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-39-2-1"  
class="td11">   </td></tr></table>                                                                                        </div>)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-38-1-2"  
class="td11">[7/8/77-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-38-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-38-2-1"  
class="td11">                                                                                                   </td></tr></table>             </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-37-3-1"  
class="td11"> w2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-40" class="tabular" 
 
><colgroup id="TBL-40-1g"><col 
id="TBL-40-1"></colgroup><colgroup id="TBL-40-2g"><col 
id="TBL-40-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-40-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-1"  
class="td11">(e1,p1,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-41" class="tabular" 
 
><colgroup id="TBL-41-1g"><col 
id="TBL-41-1"></colgroup><colgroup id="TBL-41-2g"><col 
id="TBL-41-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-41-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-41-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-41-1-2"  
class="td11">[7/8/77-1/2/78]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-41-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-41-2-1"  
class="td11"> 25 </td><td  style="white-space:nowrap; text-align:center;" id="TBL-41-2-2"  
class="td11"> [1/2/78-Now]  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-41-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-41-3-1"  
class="td11">   </td></tr></table>                                                                                        </div>)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-40-1-2"  
class="td11">[7/8/77-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-40-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-40-2-1"  
class="td11">                                                                                                   </td></tr></table>             </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-37-4-1"  
class="td11"> w2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-42" class="tabular" 
 
><colgroup id="TBL-42-1g"><col 
id="TBL-42-1"></colgroup><colgroup id="TBL-42-2g"><col 
id="TBL-42-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-42-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-42-1-1"  
class="td11">(e2,p1,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-43" class="tabular" 
 
><colgroup id="TBL-43-1g"><col 
id="TBL-43-1"></colgroup><colgroup id="TBL-43-2g"><col 
id="TBL-43-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-43-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-43-1-2"  
class="td11">[1/2/78-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-43-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-43-2-1"  
class="td11">   </td></tr></table>                                                                                        </div>)</td><td  style="white-space:nowrap; text-align:center;" id="TBL-42-1-2"  
class="td11">[1/2/78-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-42-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-42-2-1"  
class="td11">                                                                                                   </td></tr></table>             </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-37-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-37-5-1"  
class="td11">                                                                                                                       </td></tr></table></div>
</div>
<div class="center" 
>
<!--l. 3664--><p class="noindent" >
<div class="tabular"> <table id="TBL-44" class="tabular" 
 
><colgroup id="TBL-44-1g"><col 
id="TBL-44-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-44-1-1"  
class="td11">                                             Project                                                                       </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-44-2-1"  
class="td11"> p1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-45" class="tabular" 
 
><colgroup id="TBL-45-1g"><col 
id="TBL-45-1"></colgroup><colgroup id="TBL-45-2g"><col 
id="TBL-45-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-1-1"  
class="td11"> MADS </td><td  style="white-space:nowrap; text-align:center;" id="TBL-45-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/5/76-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-3-1"  
class="td11">Christine</td><td  style="white-space:nowrap; text-align:center;" id="TBL-45-3-2"  
class="td11">           </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-4-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-5-1"  
class="td11">  5000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-45-5-2"  
class="td11">           </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-45-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-45-6-1"  
class="td11"> </td></tr></table>                                                                     </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-44-3-1"  
class="td11"> p2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-46" class="tabular" 
 
><colgroup id="TBL-46-1g"><col 
id="TBL-46-1"></colgroup><colgroup id="TBL-46-2g"><col 
id="TBL-46-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-1-1"  
class="td11">HELIOS</td><td  style="white-space:nowrap; text-align:center;" id="TBL-46-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/2/78-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-3-1"  
class="td11">  Yves   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-46-3-2"  
class="td11">           </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-4-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-5-1"  
class="td11">  6000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-46-5-2"  
class="td11">           </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-46-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-46-6-1"  
class="td11"> </td></tr></table>                                                                     </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-44-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-44-4-1"  
class="td11">                                                                                                </td></tr></table></div>
</div>
<!--l. 3697--><p class="indent" >   Another example, which is slightly different is the following:
<div class="center" 
>
<!--l. 3698--><p class="noindent" >
<!--l. 3699--><p class="noindent" ><img 
src="21_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_A___d_Databases_LectureNotes_source_temporal_11.png" alt="PIC"  
width="43" height="43" >
</div>
                                                                                            
                                                                                            
<!--l. 3702--><p class="indent" >   In this case, the data can be:
   <div class="tabular"> <table id="TBL-47" class="tabular" 
 
><colgroup id="TBL-47-1g"><col 
id="TBL-47-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-1-1"  
class="td11">                                            Employee                                                                     </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-2-1"  
class="td11"> e1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-48" class="tabular" 
 
><colgroup id="TBL-48-1g"><col 
id="TBL-48-1"></colgroup><colgroup id="TBL-48-2g"><col 
id="TBL-48-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-1-1"  
class="td11">   John     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[7/8/77-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-1"  
class="td11">   4/7/55     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-3-2"  
class="td11">           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-48-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-4-1"  
class="td11"></td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-1"  
class="td11">Bd Haussman</td><td  style="white-space:nowrap; text-align:center;" id="TBL-48-5-2"  
class="td11">           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-48-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-48-6-1"  
class="td11">            </td> </tr></table>                                                                               </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-3-1"  
class="td11"> e2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-49" class="tabular" 
 
><colgroup id="TBL-49-1g"><col 
id="TBL-49-1"></colgroup><colgroup id="TBL-49-2g"><col 
id="TBL-49-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-1"  
class="td11">      Peter         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/2/78-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-1"  
class="td11">     8/10/60        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-3-2"  
class="td11">           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-49-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-4-1"  
class="td11"></td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-1"  
class="td11">Bd Général Jacques</td><td  style="white-space:nowrap; text-align:center;" id="TBL-49-5-2"  
class="td11">           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-49-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-49-6-1"  
class="td11">                 </td> </tr></table>                                                                         </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-47-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-47-4-1"  
class="td11">                                                                                                </td> </tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-50" class="tabular" 
 
><colgroup id="TBL-50-1g"><col 
id="TBL-50-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-1-1"  
class="td11">                                                 WorksOn                                                                             </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-2-1"  
class="td11"> w1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-51" class="tabular" 
 
><colgroup id="TBL-51-1g"><col 
id="TBL-51-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-51-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-51-1-1"  
class="td11">(e1,p2,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-52" class="tabular" 
 
><colgroup id="TBL-52-1g"><col 
id="TBL-52-1"></colgroup><colgroup id="TBL-52-2g"><col 
id="TBL-52-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-52-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-52-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-52-1-2"  
class="td11">[7/8/77-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-52-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-52-2-1"  
class="td11">   </td> </tr></table>                                                                                        </div>)</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-51-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-51-2-1"  
class="td11">                                                                                                   </td> </tr></table></div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-3-1"  
class="td11"> w2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-53" class="tabular" 
 
><colgroup id="TBL-53-1g"><col 
id="TBL-53-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-53-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-53-1-1"  
class="td11">(e1,p1,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-54" class="tabular" 
 
><colgroup id="TBL-54-1g"><col 
id="TBL-54-1"></colgroup><colgroup id="TBL-54-2g"><col 
id="TBL-54-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-54-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-54-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-54-1-2"  
class="td11">[7/8/77-1/2/78]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-54-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-54-2-1"  
class="td11"> 25 </td><td  style="white-space:nowrap; text-align:center;" id="TBL-54-2-2"  
class="td11"> [1/2/78-Now]  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-54-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-54-3-1"  
class="td11">   </td> </tr></table>                                                                                        </div>)</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-53-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-53-2-1"  
class="td11">                                                                                                   </td> </tr></table></div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-4-1"  
class="td11"> w2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-55" class="tabular" 
 
><colgroup id="TBL-55-1g"><col 
id="TBL-55-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-55-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-55-1-1"  
class="td11">(e2,p1,<!--tex4ht:inline--><div class="tabular"> <table id="TBL-56" class="tabular" 
 
><colgroup id="TBL-56-1g"><col 
id="TBL-56-1"></colgroup><colgroup id="TBL-56-2g"><col 
id="TBL-56-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-56-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-56-1-1"  
class="td11">20</td><td  style="white-space:nowrap; text-align:center;" id="TBL-56-1-2"  
class="td11">[1/2/78-Now]</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-56-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-56-2-1"  
class="td11">   </td> </tr></table>                                                                                        </div>)</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-55-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-55-2-1"  
class="td11">                                                                                                   </td> </tr></table></div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-50-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-50-5-1"  
class="td11">                                                                                                          </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-57" class="tabular" 
 
><colgroup id="TBL-57-1g"><col 
id="TBL-57-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-57-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-57-1-1"  
class="td11">                                             Project                                                                       </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-57-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-57-2-1"  
class="td11"> p1<!--tex4ht:inline--><div class="tabular"> <table id="TBL-58" class="tabular" 
 
><colgroup id="TBL-58-1g"><col 
id="TBL-58-1"></colgroup><colgroup id="TBL-58-2g"><col 
id="TBL-58-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-1-1"  
class="td11"> MADS </td><td  style="white-space:nowrap; text-align:center;" id="TBL-58-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/5/76-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-3-1"  
class="td11">Christine</td><td  style="white-space:nowrap; text-align:center;" id="TBL-58-3-2"  
class="td11">           </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-4-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-5-1"  
class="td11">  5000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-58-5-2"  
class="td11">           </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-58-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-58-6-1"  
class="td11"> </td> </tr></table>                                                                     </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-57-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-57-3-1"  
class="td11"> p2<!--tex4ht:inline--><div class="tabular"> <table id="TBL-59" class="tabular" 
 
><colgroup id="TBL-59-1g"><col 
id="TBL-59-1"></colgroup><colgroup id="TBL-59-2g"><col 
id="TBL-59-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-1-1"  
class="td11">HELIOS</td><td  style="white-space:nowrap; text-align:center;" id="TBL-59-1-2"  
class="td11"><div class="multirow"><!-- rows=2 -->
[1/2/78-Now]</div></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-2-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-3-1"  
class="td11">  Yves   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-59-3-2"  
class="td11">           </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-4-1"  
class="td11">
</td></tr><tr 
class="cline"><td><hr></td><td></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-5-1"  
class="td11">  6000   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-59-5-2"  
class="td11">           </td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-59-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-59-6-1"  
class="td11"> </td> </tr></table>                                                                     </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-57-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-57-4-1"  
class="td11">                                                                                                </td></tr></table></div>
<!--l. 3813--><p class="indent" >   Now, only currently valid tuples are kept in the relationship. But for these, the history of hours/week is
maintained.
   </div>
<!--l. 3815--><p class="indent" >
<!--l. 3817--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.8   </span> <a 
 id="x1-760008.1.8"></a>Synchronization relationships</h5>
<!--l. 3819--><p class="noindent" >They describe temporal constraints between the life cycles of two objects and they are expressed with Allen&#8217;s operator
extended for temporal elements:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3823--><p class="noindent" ><span 
class="cmmi-10">before</span><img 
src="summary72x.png" alt="(i1,i2)"  class="left" align="middle">: interval <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>ends before <span 
class="cmmi-10">i</span><span 
class="cmr-10">2 </span>starts.
     </li>
     <li class="itemize">
     <!--l. 3824--><p class="noindent" ><span 
class="cmmi-10">meets</span><img 
src="summary73x.png" alt="(i1,i2)"  class="left" align="middle">: interval <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>ends just when <span 
class="cmmi-10">i</span><span 
class="cmr-10">2 </span>starts.
     </li>
     <li class="itemize">
     <!--l. 3825--><p class="noindent" ><span 
class="cmmi-10">overlaps</span><img 
src="summary74x.png" alt="(i1,i2)"  class="left" align="middle">: intervals <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>and <span 
class="cmmi-10">i</span><span 
class="cmr-10">2 </span>overlaps at some point.
     </li>
     <li class="itemize">
     <!--l. 3827--><p class="noindent" ><span 
class="cmmi-10">during</span><img 
src="summary75x.png" alt="(i1,i2)"  class="left" align="middle">: interval <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>is contained inside interval <span 
class="cmmi-10">i</span><span 
class="cmr-10">2</span>.
     </li>
     <li class="itemize">
     <!--l. 3829--><p class="noindent" ><span 
class="cmmi-10">starts</span><img 
src="summary76x.png" alt="(i1,i2)"  class="left" align="middle">: intervals <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>and <span 
class="cmmi-10">i</span><span 
class="cmr-10">2 </span>start at the same time.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 3831--><p class="noindent" ><span 
class="cmmi-10">finishes</span><img 
src="summary77x.png" alt="(i1,i2)"  class="left" align="middle">: intervals <span 
class="cmmi-10">i</span><span 
class="cmr-10">1 </span>and <span 
class="cmmi-10">i</span><span 
class="cmr-10">2 </span>finish at the same time.</li></ul>
<!--l. 3834--><p class="noindent" >They can be visually seen in Figure
<!--l. 3836--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-76001r5"></a>
                                                                                            
                                                                                            
<!--l. 3838--><p class="noindent" ><img 
src="22_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado10.png" alt="PIC"  
><img 
src="23_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado11.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5: </span><span  
class="content">Allen&#8217;s temporal operators and how to express them.</span></div><!--tex4ht:label?: x1-76001r5 -->
                                                                                            
                                                                                            
<!--l. 3841--><p class="indent" >   </div><hr class="endfigure">
<!--l. 3843--><p class="indent" >   These relationships express a temporal constraint between the whole life cycles or the active periods.
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.9   </span> <a 
 id="x1-770008.1.9"></a>Example of a temporal schema</h5>
<div class="center" 
>
<!--l. 3847--><p class="noindent" >
<!--l. 3848--><p class="noindent" ><img 
src="24_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado53.png" alt="PIC"  
>
</div>
<!--l. 3851--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">9   </span> <a 
 id="x1-780009"></a>Manipulating Temporal Databases with SQL-92</h3>
<!--l. 3853--><p class="noindent" >Data type for periods is not available in SQL-92. Thus, a period is simulated with two Date columns: fromDate and
toDate, indicating the beginning and end of the period, respectively. Some notes:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3857--><p class="noindent" >The special date &#8217;3000-01-01&#8217; denotes currently valid.
     </li>
     <li class="itemize">
     <!--l. 3858--><p class="noindent" >The periods are considered closed-open, [).
     </li>
     <li class="itemize">
     <!--l. 3859--><p class="noindent" >A table can be viewes as a compact representation of a sequence of snapshot tables, each one valid on a
     particular day.</li></ul>
<!--l. 3863--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.1   </span> <a 
 id="x1-790009.1"></a>Temporal statements</h4>
<!--l. 3865--><p class="noindent" >Temporal statement apply to queries, modifications, views and integrity constraints. They are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3868--><p class="noindent" ><span 
class="ecbx-1000">Current</span>: applies to the current point in time. Example: what is Bob&#8217;s current position?
     </li>
     <li class="itemize">
     <!--l. 3870--><p class="noindent" ><span 
class="ecbx-1000">Time-sliced</span>: applies to some point in time in the past or in the future. Example: what was Bob&#8217;s position
     on 1-1-2007?
     </li>
     <li class="itemize">
     <!--l. 3872--><p class="noindent" ><span 
class="ecbx-1000">Sequenced</span>: applies to each point in time. Example: what is Bob&#8217;s position history?
     </li>
     <li class="itemize">
     <!--l. 3874--><p class="noindent" ><span 
class="ecbx-1000">Non-sequenced</span>: applies to all points in time, ignoring the time-varying nature of tables. Example: when
     did Bob changed history?</li></ul>
                                                                                            
                                                                                            
<!--l. 3878--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.2   </span> <a 
 id="x1-800009.2"></a>Temporal keys</h4>
<!--l. 3880--><p class="noindent" >Imagine we have the relation <span 
class="ectt-1000">Incumbents(SSN,PCN,FromDate,ToDate) </span>and we want to enforce that each employee has
only one position at a point in time. If we use the key of the corresponding non-temporal table, (SSN,PCN), then we
would not be able to enter the same employee for different periods. Thus, we need to somehow include the dates in
the key. The options are: (SSN,PCN,FromDate), (SSN,PCN,ToDate) or (SSN,PCN,FromDate,ToDate).
None of them captures the constraint that we want to enforce, because there are overlapping periods
associated with the same SSN: we need a <span 
class="ecbx-1000">sequenced constraint</span>, applied at each point in time. All
constraints specified on a snapshot table have sequenced counterparts, specified on the analogous valid-time
table.
<!--l. 3893--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.2.1   </span> <a 
 id="x1-810009.2.1"></a>Sequenced primary key</h5>
   <div class="newtheorem">
<!--l. 3894--><p class="noindent" ><span class="head">
<a 
 id="x1-81001r1"></a>
<span 
class="ecbx-1000">Example 9.1.</span>  </span>Employees have only one position at a point in time.
   <!--l. 3897-->
<div class="lstlisting" id="listing-57"><span class="label"><a 
 id="x1-81002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Seq_Primary_Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">How</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">many</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">entries</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81006r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81007r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">The</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81008r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81009r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">after</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">conditions</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">searching</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">intersections</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81010r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81011r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81012r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">no</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">NULLS</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">values</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">SSN</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">PCN</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">can</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">be</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">inserted</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81013r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81014r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sequenced</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">primary</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">key</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">constraint</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81015r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-81016r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
   </div>
<!--l. 3914--><p class="indent" >
<!--l. 3916--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.3   </span> <a 
 id="x1-820009.3"></a>Handling Now</h4>
<!--l. 3918--><p class="noindent" >We have to decide how to timestamp current data. One alternative is to put NULL in the ToDate, which allows to
identify current records by checking: <span 
class="ectt-1000">WHERE ToDate IS NULL</span>. But it possesses some disadvantages:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3923--><p class="noindent" >Users get confused with a data of NULL.
     </li>
     <li class="itemize">
     <!--l. 3924--><p class="noindent" >In SQL many comparisons with a NULL return false, so we might exclude some rows that should not be
     excluded from the query.
     </li>
     <li class="itemize">
     <!--l. 3926--><p class="noindent" >Other uses or NULL are not available.</li></ul>
<!--l. 3928--><p class="noindent" >Another approach is to set the ToDate to the largest value in the timestamp domain: &#8217;3000-01-01&#8217;. The disadvantages of
this are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3931--><p class="noindent" >The DB states that something will be true in the far future.
     </li>
     <li class="itemize">
     <!--l. 3932--><p class="noindent" >&#8217;Now&#8217; and &#8217;Forever&#8217; are represented in the same way.</li></ul>
                                                                                            
                                                                                            
<!--l. 3935--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.4   </span> <a 
 id="x1-830009.4"></a>Duplicates</h4>
<!--l. 3937--><p class="noindent" >There are different kind of duplicates in temporal databases:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3939--><p class="noindent" ><span 
class="ecbx-1000">Value equivalent</span>: the values of the nontimestamp columns are equivalent. Example: all rows in Table
     <a 
href="#x1-83001r6">6<!--tex4ht:ref: tab:temp_dup --></a>.
     </li>
     <li class="itemize">
     <!--l. 3941--><p class="noindent" ><span 
class="ecbx-1000">Sequenced duplicates</span>: when in some instant, the rows are duplicate. Example: rows 1 and 2 in the
     table.
     </li>
     <li class="itemize">
     <!--l. 3943--><p class="noindent" ><span 
class="ecbx-1000">Current duplicates</span>: they are sequenced duplicates at the current instant. Example: rows 4 and 5 in the
     table.
     </li>
     <li class="itemize">
     <!--l. 3945--><p class="noindent" ><span 
class="ecbx-1000">Nonsequenced duplicates</span>: the values of all columns are identical. Example: rows 2 and 3 in the table.</li></ul>
<div class="table">
<!--l. 3949--><p class="indent" >   <a 
 id="x1-83001r6"></a><hr class="float"><div class="float" 
>
                                                                                            
                                                                                            
<div class="tabular"> <table id="TBL-60" class="tabular" 
 
><colgroup id="TBL-60-1g"><col 
id="TBL-60-1"></colgroup><colgroup id="TBL-60-2g"><col 
id="TBL-60-2"></colgroup><colgroup id="TBL-60-3g"><col 
id="TBL-60-3"></colgroup><colgroup id="TBL-60-4g"><col 
id="TBL-60-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-60-1-1"  
class="td11"></td>                  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Incumbents</div>                             </tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-2-1"  
class="td11"> SSN </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-2-2"  
class="td11"> PCN </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-2-3"  
class="td11"> FromDate </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-2-4"  
class="td11"> ToDate</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-3-1"  
class="td11"> 111223333  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-3-2"  
class="td11"> 120033  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-3-3"  
class="td11"> 1996-01-01  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-3-4"  
class="td11"> 1996-06-01  </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-4-1"  
class="td11"> 111223333 </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-4-2"  
class="td11"> 120033 </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-4-3"  
class="td11"> 1996-06-01 </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-4-4"  
class="td11"> 1996-10-01</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-5-1"  
class="td11"> 111223333  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-5-2"  
class="td11"> 120033  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-5-3"  
class="td11"> 1996-06-01  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-5-4"  
class="td11"> 1996-10-01  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-6-1"  
class="td11"> 111223333  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-6-2"  
class="td11"> 120033  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-6-3"  
class="td11"> 1996-10-01  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-6-4"  
class="td11">    Now      </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-7-1"  
class="td11"> 111223333  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-7-2"  
class="td11"> 120033  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-7-3"  
class="td11"> 1997-12-01  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-60-7-4"  
class="td11">    Now      </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-60-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-60-8-1"  
class="td11">           </td></tr></table></div>
 <div class="caption" 
><span class="id">Table&#x00A0;6: </span><span  
class="content">Temporal duplicates example.</span></div><!--tex4ht:label?: x1-83001r6 -->
                                                                                            
                                                                                            
   </div><hr class="endfloat" />
</div>
   <h5 class="subsubsectionHead"><span class="titlemark">9.4.1   </span> <a 
 id="x1-840009.4.1"></a>Preventing duplicates</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 3995--><p class="noindent" >To prevent value equivalent rows: we define a secondary key using UNIQUE(SSN,PCN).
     </li>
     <li class="itemize">
     <!--l. 3997--><p class="noindent" >To prevent nonsequenced duplicates: UNIQUE(SSN,PCN,FromDate,ToDate).
     </li>
     <li class="itemize">
     <!--l. 3998--><p class="noindent" >To prevent current duplicates: no employee can have two identical positions at the current time:
     <!--l. 4001-->
     <div class="lstlisting" id="listing-58"><span class="label"><a 
 id="x1-84001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Current_Dups</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Transaction</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">allows</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">current</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">duplicates</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4016--><p class="noindent" >To prevent current duplicates, assuming no future data, we notice that current data will have the same ToDate, so
     we set UNIQUE(SSN,PCN,ToDate).
     </li>
     <li class="itemize">
     <!--l. 4018--><p class="noindent" >To prevent sequenced duplicates, we do as with the trigger for sequenced primary keys, but disregarding NULL
     values (because now we are not making a key UNIQUE+NOTNULL, but only UNIQUE):
     <!--l. 4022-->
     <div class="lstlisting" id="listing-59"><span class="label"><a 
 id="x1-84013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Seq_Dup</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">How</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">many</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">entries</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84018r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">The</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84019r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">before</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84020r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">after</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">conditions</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">searching</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">intersections</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84021r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84022r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sequenced</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">primary</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">key</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">constraint</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84023r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84024r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4037--><p class="noindent" >To prevent sequenced duplicates, asumming only modifications to current data, we can use UNIQUE(SSN, PCN,
     ToDate).</li></ul>
<!--l. 4040--><p class="noindent" >Now, we want to enforce that each employee has at most one position. In a snapshot table, this would be equivalent to
UNIQUE(SSN), and now the sequenced constraint is: at any time each employee has at most one position, i.e., SSN is
sequenced unique:
   <!--l. 4045-->
<div class="lstlisting" id="listing-60"><span class="label"><a 
 id="x1-84025r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Seq_Unique</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84026r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84027r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84028r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84029r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84030r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84031r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84032r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84033r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84034r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84035r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Transaction</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">violates</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sequenced</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unique</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">constraint</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84036r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84037r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
<!--l. 4061--><p class="indent" >   We can also think about the nonsequenced constraint: an employee cannot have more than one position over two
identical periods, i.e. SSN is nonsequenced unique: UNIQUE(SSN,FromDate,ToDate).
<!--l. 4065--><p class="indent" >   Or current constraint: an employee has at most one position now, i.e. SSN is current unique:
   <!--l. 4068-->
<div class="lstlisting" id="listing-61"><span class="label"><a 
 id="x1-84038r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Current_Unique</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84039r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84040r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84041r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84042r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84043r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84044r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84045r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84046r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84047r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Transaction</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">allows</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">current</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">duplicates</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84048r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-84049r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
                                                                                            
                                                                                            
<!--l. 4084--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.5   </span> <a 
 id="x1-850009.5"></a>Referential integrity</h4>
<!--l. 4086--><p class="noindent" >We want to enforce that Incumbents.PCN is a foreign key for Position.PCN. There several possible cases, depending on
what tables are temporal.
<!--l. 4089--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.5.1   </span> <a 
 id="x1-860009.5.1"></a>Case 1: neither table is temporal</h5>
   <!--l. 4091-->
<div class="lstlisting" id="listing-62"><span class="label"><a 
 id="x1-86001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-86002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-86003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-86004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-86005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 4100--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.5.2   </span> <a 
 id="x1-870009.5.2"></a>Case 2: both tables are temporal</h5>
<!--l. 4102--><p class="noindent" >In this case, if we want the PCN to be a <span 
class="ecbx-1000">current foreign key</span>, the PCN of all current incumbents must be listed in the
current positions:
   <!--l. 4105-->
<div class="lstlisting" id="listing-63"><span class="label"><a 
 id="x1-87001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Current_RI</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">3000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">The</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">position</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">correct</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">3000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">And</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">active</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">current</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">referential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">integrity</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
<!--l. 4120--><p class="indent" >   Or it can be a <span 
class="ecbx-1000">sequenced foreign key</span>:
   <!--l. 4122-->
<div class="lstlisting" id="listing-64"><span class="label"><a 
 id="x1-87013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Seq_RI</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87018r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87019r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87020r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">These</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">search</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">s</span></span><span style="color:#009900"><span 
class="ectt-0800">.</span></span><span style="color:#009900"><span 
class="ectt-0800">t</span></span><span style="color:#009900"><span 
class="ectt-0800">.</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87021r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87022r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87023r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87024r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87025r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">These</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">search</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">s</span></span><span style="color:#009900"><span 
class="ectt-0800">.</span></span><span style="color:#009900"><span 
class="ectt-0800">t</span></span><span style="color:#009900"><span 
class="ectt-0800">.</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87026r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87027r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87028r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87029r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">ends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">middle</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87030r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87031r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87032r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87033r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87034r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">These</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">search</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">that</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">continues</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">RI</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">instead</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87035r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87036r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sequential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">referential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">integrity</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87037r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-87038r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
<!--l. 4152--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-880009.5.2"></a>Contiguous history</h5>
<!--l. 4154--><p class="noindent" >A contiguous history is such that there are no gaps in the history. Enforcing contiguous history is a nonsequenced
constraint, because it requires examining the table at multiple points of time.
   <!--l. 4158-->
<div class="lstlisting" id="listing-65"><span class="label"><a 
 id="x1-88001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Cont_History</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">If</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">separated</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P3</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">extends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">right</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P3</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">extends</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">left</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Transaction</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">violates</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">contiguous</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">history</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
<!--l. 4177--><p class="indent" >   We can also have the situation that Incumbents.PCN is a FK for Position.PCN and Position.PCN defines a
contiguous history. In this case, we can omit the part of searching for the P2 that extends a P that ends in the middle
of I.
   <!--l. 4182-->
<div class="lstlisting" id="listing-66"><span class="label"><a 
 id="x1-88017r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Seq_RI_CH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88018r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88019r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88020r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88021r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88022r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88023r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88024r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88025r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88026r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88027r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88028r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88029r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sequenced</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">referential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">integrity</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88030r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-88031r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
<!--l. 4201--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.5.3   </span> <a 
 id="x1-890009.5.3"></a>Case 3: Only the referenced table is temporal</h5>
<!--l. 4203--><p class="noindent" >Current FK:
   <!--l. 4205-->
<div class="lstlisting" id="listing-67"><span class="label"><a 
 id="x1-89001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRIGGER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Current_RI</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">IF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">3000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">P</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RAISERROR</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Violation</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">of</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">current</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">referential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">integrity</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,1,2)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ROLLBACK</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TRANSACTION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-89010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span></div>
                                                                                            
                                                                                            
<!--l. 4219--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.6   </span> <a 
 id="x1-900009.6"></a>Querying valid-time tables</h4>
<!--l. 4221--><p class="noindent" >We have the relations:
<div class="center" 
>
<!--l. 4222--><p class="noindent" >
<div class="tabular"> <table id="TBL-61" class="tabular" 
 
><colgroup id="TBL-61-1g"><col 
id="TBL-61-1"></colgroup><colgroup id="TBL-61-2g"><col 
id="TBL-61-2"></colgroup><colgroup id="TBL-61-3g"><col 
id="TBL-61-3"></colgroup><colgroup id="TBL-61-4g"><col 
id="TBL-61-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-61-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-61-1-1"  
class="td11"></td>                  <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Employee</div>                            
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-61-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-61-2-1"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-61-2-2"  
class="td11"> FirstName  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-61-2-3"  
class="td11"> LastName  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-61-2-4"  
class="td11"> BirthDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-61-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-61-3-1"  
class="td11">      </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-62" class="tabular" 
 
><colgroup id="TBL-62-1g"><col 
id="TBL-62-1"></colgroup><colgroup id="TBL-62-2g"><col 
id="TBL-62-2"></colgroup><colgroup id="TBL-62-3g"><col 
id="TBL-62-3"></colgroup><colgroup id="TBL-62-4g"><col 
id="TBL-62-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-62-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-62-1-1"  
class="td11"></td>              <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Incumbents</div>                     
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-62-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-62-2-1"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-62-2-2"  
class="td11"> PCN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-62-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-62-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-62-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-62-3-1"  
class="td11">      </td></tr></table>
</div>
</div>
<div class="center" 
>
<!--l. 4247--><p class="noindent" >
<div class="tabular"> <table id="TBL-63" class="tabular" 
 
><colgroup id="TBL-63-1g"><col 
id="TBL-63-1"></colgroup><colgroup id="TBL-63-2g"><col 
id="TBL-63-2"></colgroup><colgroup id="TBL-63-3g"><col 
id="TBL-63-3"></colgroup><colgroup id="TBL-63-4g"><col 
id="TBL-63-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-63-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-63-1-1"  
class="td11"></td>                 <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Salary</div>                           
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-63-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-63-2-1"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-63-2-2"  
class="td11"> Amount  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-63-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-63-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-63-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-63-3-1"  
class="td11">      </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-64" class="tabular" 
 
><colgroup id="TBL-64-1g"><col 
id="TBL-64-1"></colgroup><colgroup id="TBL-64-2g"><col 
id="TBL-64-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-64-1-"><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-64-1-1"  
class="td11">     <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Position</div>        
</td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-64-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-64-2-1"  
class="td11"> PCN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-64-2-2"  
class="td11"> JobTitle  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-64-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-64-3-1"  
class="td11">      </td></tr></table>
</div>
</div>
<!--l. 4270--><p class="indent" >   Say we want to obtain Bob&#8217;s current position. Then:
   <!--l. 4272-->
<div class="lstlisting" id="listing-68"><span class="label"><a 
 id="x1-90001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Option</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">JobTitle</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FirstName</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Bob</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">3000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90008r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Option</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">JobTitle</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FirstName</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Bob</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90014r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">This</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">one</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">more</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">portable</span></span></div>
<!--l. 4290--><p class="indent" >   And Bob&#8217;s current position and salary? Current joins:
   <!--l. 4292-->
<div class="lstlisting" id="listing-69"><span class="label"><a 
 id="x1-90016r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">JobTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90017r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90018r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FirstName</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Bob</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90019r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90020r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">I</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90021r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">S</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">current</span></span></div>
<!--l. 4301--><p class="indent" >   And if we want to get what employees have currently no position?
   <!--l. 4303-->
<div class="lstlisting" id="listing-70"><span class="label"><a 
 id="x1-90022r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FirstName</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90023r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">e</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90024r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90025r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90026r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-90027r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 4313--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.6.1   </span> <a 
 id="x1-910009.6.1"></a>Extracting prior states</h5>
<!--l. 4315--><p class="noindent" >A <span 
class="ecbx-1000">timeslice query </span>extracts a state at a particular point in time. They require an additional predicate
for each temporal tables: they are basically the same as checking the current state, but with a different
date.
<!--l. 4320--><p class="indent" >   For example: Bob&#8217;s position at the beginning of 1997?
   <!--l. 4322-->
<div class="lstlisting" id="listing-71"><span class="label"><a 
 id="x1-91001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">JobTitle</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-91002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Employee</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-91003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FirstName</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Bob</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-91004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">E</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-91005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-91006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1997-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1997-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
<!--l. 4332--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.6.2   </span> <a 
 id="x1-920009.6.2"></a>Sequenced queries</h5>
<!--l. 4334--><p class="noindent" >A <span 
class="ecbx-1000">sequenced query </span>is such that its result is a valid-time table. They use sequenced variants of basic
operations:
                                                                                            
                                                                                            
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 4337--><p class="noindent" ><span 
class="ecbx-1000">Sequenced selection</span>: no change:
     <!--l. 4339-->
     <div class="lstlisting" id="listing-72"><span class="label"><a 
 id="x1-92001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5000</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4345--><p class="noindent" ><span 
class="ecbx-1000">Sequenced projection</span>: include the timestamp columns in the select list, because if not we would obtain several
     values for the same employees:
     <!--l. 4349-->
     <div class="lstlisting" id="listing-73"><span class="label"><a 
 id="x1-92004r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92005r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span></div>
     
     <!--l. 4353--><p class="noindent" >If we want to remove the duplicates here, we need to <span 
class="ecbx-1000">coalesce </span>the results.
     <!--l. 4356-->
     <div class="lstlisting" id="listing-74"><span class="label"><a 
 id="x1-92006r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92007r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92008r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">left</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92009r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">And</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">they</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92010r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">This</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">forall</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">M</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">inside</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">,</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">can</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">be</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">extended</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">left</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92011r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92012r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">M</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">belongs</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">same</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92013r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">M</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">starts</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">F</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">L</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92014r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92015r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92016r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92017r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">M</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92018r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">This</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">period</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">maximal</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92019r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92020r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92021r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92022r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">F</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92023r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OR</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92024r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">L</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">T2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4378--><p class="noindent" ><span 
class="ecbx-1000">Sequenced sort</span>: in this case we require the result to be ordered at each point in time. This can be accomplished
     by appending the start and end time columns in the ORDEER BY:
     <!--l. 4382-->
     <div class="lstlisting" id="listing-75"><span class="label"><a 
 id="x1-92025r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92026r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92027r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ORDER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span></div>
     
     <!--l. 4388--><p class="noindent" >It can also be done by omitting the timestamp columns.
     </li>
     <li class="itemize">
     <!--l. 4389--><p class="noindent" ><span 
class="ecbx-1000">Sequenced union</span>: a UNION ALL (retaining duplicates) over temporal tables is automatically sequenced if the
     timestamp columns are kept:
     <!--l. 4393-->
     <div class="lstlisting" id="listing-76"><span class="label"><a 
 id="x1-92028r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92029r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92030r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">50000</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92031r4"></a><span 
class="ecrm-0500">4</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92032r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92033r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92034r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92035r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92036r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">10000</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4405--><p class="noindent" ><span 
class="ecbx-1000">Sequenced join</span>: imagine we want to determine the salary and position history for each employee.
     This implies a sequenced join between Salary and Incumbents. It is supposed that there are no
     duplicate rows in the tables: at each point in time an employee has one salary and one position. In
     SQL, a sequenced join requires four select statements and complex inequality predicates and the
     following code does not generate duplicates. This is why UNION ALL is used without problems,
     and being more efficient than UNION, which does a lot of work for removing non-ocurring
     duplicates<span class="footnote-mark"><a 
href="summary6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-92037f5"></a>  .
     <!--l. 4415-->
     <div class="lstlisting" id="listing-77"><span class="label"><a 
 id="x1-92038r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Usual</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">sequenced</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92039r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92040r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92041r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92042r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92043r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92044r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92045r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92046r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92047r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92048r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92049r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92050r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92051r14"></a><span 
class="ecrm-0500">14</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92052r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92053r16"></a><span 
class="ecrm-0500">16</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92054r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92055r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92056r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92057r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92058r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92059r22"></a><span 
class="ecrm-0500">22</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92060r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ALL</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92061r24"></a><span 
class="ecrm-0500">24</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92062r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92063r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92064r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92065r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span></div>
     
                                                                                            
                                                                                            
     <!--l. 4446--><p class="noindent" >This can also be done using CASE, which allows to write the query in a single statement: the first case simulates a
     maxDate function of the two arguments, the second one a minDate function. The condition in the WHERE
     ensures that the period of validity is well formed:
     <!--l. 4451-->
     <div class="lstlisting" id="listing-78"><span class="label"><a 
 id="x1-92066r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Sequenced</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">with</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">CASE</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92067r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92068r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92069r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92070r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92071r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92072r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92073r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92074r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92075r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92076r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
     
     <!--l. 4465--><p class="noindent" >Another way to do the sequenced join is using functions:
     <!--l. 4467-->
     <div class="lstlisting" id="listing-79"><span class="label"><a 
 id="x1-92077r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Sequenced</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">join</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">with</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">functions</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92078r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FUNCTION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92079r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURNS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92080r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92081r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92082r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92083r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92084r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FUNCTION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92085r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURNS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SMALLDATETIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92086r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BEGIN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92087r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RETURN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CASE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">THEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@two</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ELSE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@one</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92088r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92089r13"></a><span 
class="ecrm-0500">13</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92090r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92091r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92092r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92093r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4487--><p class="noindent" ><span 
class="ecbx-1000">Temporal difference</span>: the usual difference is implemented in SQL with EXCEPT, NOT EXISTS or NOT IN.
     For example, if we want to list the employees who are department heads (PCN=1234) but are not also professors
     (PCN=5555), we can do it as:
     <!--l. 4492-->
     <div class="lstlisting" id="listing-80"><span class="label"><a 
 id="x1-92094r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Nontemporal</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">veersion</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92095r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">using</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">NOT</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">EXISTS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92096r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92097r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92098r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92099r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92100r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92101r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92102r9"></a><span 
class="ecrm-0500">9</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92103r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">using</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">EXCEPT</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92104r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92105r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92106r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92107r14"></a><span 
class="ecrm-0500">14</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92108r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXCEPT</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92109r16"></a><span 
class="ecrm-0500">16</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92110r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92111r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92112r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span></div>
     
     <!--l. 4514--><p class="noindent" >But the sequenced difference is a bit more complex. There are four possible cases, depicted in Figure
     <a 
href="#x1-92113r6">6<!--tex4ht:ref: fig:Cases-for-temporal --></a>.
     <!--l. 4517--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-92113r6"></a> <img 
src="25_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_A___d_Databases_LectureNotes_source_temporal_12.png" alt="PIC"  
width="43" height="43" >
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;6: </span><span  
class="content">Cases for temporal difference.</span></div><!--tex4ht:label?: x1-92113r6 -->
     <!--l. 4519--><p class="noindent" ></div><hr class="endfigure">
     <!--l. 4521--><p class="noindent" >The SQL query is:
     <!--l. 4523-->
     <div class="lstlisting" id="listing-81"><span class="label"><a 
 id="x1-92114r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92115r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92116r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92117r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92118r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92119r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92120r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92121r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">that</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92122r9"></a><span 
class="ecrm-0500">9</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92123r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92124r11"></a><span 
class="ecrm-0500">11</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92125r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92126r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92127r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92128r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92129r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92130r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92131r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92132r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">we</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92133r20"></a><span 
class="ecrm-0500">20</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92134r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92135r22"></a><span 
class="ecrm-0500">22</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92136r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92137r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92138r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92139r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92140r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92141r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92142r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92143r30"></a><span 
class="ecrm-0500">30</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92144r31"></a><span 
class="ecrm-0500">31</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92145r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92146r33"></a><span 
class="ecrm-0500">33</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">B2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">B1</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">and</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">B2</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">temporary</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">contected</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92147r34"></a><span 
class="ecrm-0500">34</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92148r35"></a><span 
class="ecrm-0500">35</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92149r36"></a><span 
class="ecrm-0500">36</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92150r37"></a><span 
class="ecrm-0500">37</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92151r38"></a><span 
class="ecrm-0500">38</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92152r39"></a><span 
class="ecrm-0500">39</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1234</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92153r40"></a><span 
class="ecrm-0500">40</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92154r41"></a><span 
class="ecrm-0500">41</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92155r42"></a><span 
class="ecrm-0500">42</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5555</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-92156r43"></a><span 
class="ecrm-0500">43</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Case</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">4</span></span></div>
     
     </li></ul>
<!--l. 4571--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.6.3   </span> <a 
 id="x1-930009.6.3"></a>Nonsequenced queries</h5>
<!--l. 4573--><p class="noindent" >Nonsequenced operators are straightforward: they ignore the time-varying nature of the tables.
   <div class="newtheorem">
<!--l. 4575--><p class="noindent" ><span class="head">
<a 
 id="x1-93001r2"></a>
<span 
class="ecbx-1000">Example 9.2.</span>  </span>List all the salaries, past and present, of employees who had been lecturer at some time:
   <!--l. 4579-->
<div class="lstlisting" id="listing-82"><span class="label"><a 
 id="x1-93002r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93003r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Position</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93004r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93005r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">JobTitle</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Lecturer</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 4586--><p class="indent" >   When did employees receive raises?
   <!--l. 4588-->
<div class="lstlisting" id="listing-83"><span class="label"><a 
 id="x1-93006r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">RaiseDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93007r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93008r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 4594--><p class="indent" >   Remove <span 
class="ecbx-1000">nonsequenced duplicates </span>from Incumbents:
   <!--l. 4596-->
                                                                                            
                                                                                            
<div class="lstlisting" id="listing-84"><span class="label"><a 
 id="x1-93009r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93010r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span></div>
<!--l. 4601--><p class="indent" >   Remove <span 
class="ecbx-1000">value-equivalent rows </span>from Incumbents:
   <!--l. 4603-->
<div class="lstlisting" id="listing-85"><span class="label"><a 
 id="x1-93011r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93012r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span></div>
<!--l. 4608--><p class="indent" >   Remove <span 
class="ecbx-1000">current duplicates </span>from Incumbents:
   <!--l. 4610-->
<div class="lstlisting" id="listing-86"><span class="label"><a 
 id="x1-93013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PCN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Incumbents</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-93015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">3000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
   </div>
<!--l. 4615--><p class="indent" >
<!--l. 4617--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.6.4   </span> <a 
 id="x1-940009.6.4"></a>Sequenced aggregation function</h5>
<!--l. 4619--><p class="noindent" >Say we have two relations:
   <div class="tabular"> <table id="TBL-65" class="tabular" 
 
><colgroup id="TBL-65-1g"><col 
id="TBL-65-1"></colgroup><colgroup id="TBL-65-2g"><col 
id="TBL-65-2"></colgroup><colgroup id="TBL-65-3g"><col 
id="TBL-65-3"></colgroup><colgroup id="TBL-65-4g"><col 
id="TBL-65-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-65-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-65-1-1"  
class="td11"></td>                <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Affiliation</div>                          </tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-65-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-65-2-1"  
class="td11"> SSN </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-65-2-2"  
class="td11"> DNumber </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-65-2-3"  
class="td11"> FromDate </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-65-2-4"  
class="td11"> ToDate</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-65-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-65-3-1"  
class="td11">      </td> </tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-66" class="tabular" 
 
><colgroup id="TBL-66-1g"><col 
id="TBL-66-1"></colgroup><colgroup id="TBL-66-2g"><col 
id="TBL-66-2"></colgroup><colgroup id="TBL-66-3g"><col 
id="TBL-66-3"></colgroup><colgroup id="TBL-66-4g"><col 
id="TBL-66-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-66-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-66-1-1"  
class="td11"></td>                 <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Salary</div>                           
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-66-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-66-2-1"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-66-2-2"  
class="td11"> Amount  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-66-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-66-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-66-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-66-3-1"  
class="td11">      </td></tr></table>
</div>
<!--l. 4644--><p class="indent" >   And we want the maximum salary. The non-temporal version is straighforward:
   <!--l. 4646-->
<div class="lstlisting" id="listing-87"><span class="label"><a 
 id="x1-94001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span></div>
<!--l. 4651--><p class="indent" >   And the maximum salary by department:
   <!--l. 4653-->
<div class="lstlisting" id="listing-88"><span class="label"><a 
 id="x1-94003r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94004r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94005r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94006r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span></div>
<!--l. 4660--><p class="indent" >   But the temporal version is not that easy. We have to do as in this visual example:
<div class="center" 
>
<!--l. 4662--><p class="noindent" >
<!--l. 4663--><p class="noindent" ><img 
src="26_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado12.png" alt="PIC"  
>
</div>
<!--l. 4666--><p class="indent" >   The steps to follow are:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-94008x1">
     <!--l. 4668--><p class="noindent" >Compute the periods on which a maximum must be calculated.
     </li>
<li 
  class="enumerate" id="x1-94010x2">
     <!--l. 4669--><p class="noindent" >Compute the maximum for the periods.
     </li>
<li 
  class="enumerate" id="x1-94012x3">
     <!--l. 4670--><p class="noindent" >Coalesce the results (as we have already seen)</li></ol>
                                                                                            
                                                                                            
<!--l. 4672-->
<div class="lstlisting" id="listing-89"><span class="label"><a 
 id="x1-94013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">compute</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">periods</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94018r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94019r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94020r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94021r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94022r10"></a><span 
class="ecrm-0500">10</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94023r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalPeriods</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94024r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94025r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94026r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Get</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">all</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consecutive</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">combinations</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94027r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94028r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salchanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94029r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Ensure</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">they</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">consecutive</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94030r18"></a><span 
class="ecrm-0500">18</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94031r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94032r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempMax</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxSalary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94033r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">AMOUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94034r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SALARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalPeriods</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94035r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94036r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">I</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94037r25"></a><span 
class="ecrm-0500">25</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94038r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">COALESCE</span></span></div>
<!--l. 4701--><p class="indent" >   Now, we want to compute the history of maximum salary by deparment:
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-94040x1">
     <!--l. 4703--><p class="noindent" >Compute by department the periods on which a maximum must be calculated.
     </li>
<li 
  class="enumerate" id="x1-94042x2">
     <!--l. 4704--><p class="noindent" >Compute the maximum salary for these periods.
     </li>
<li 
  class="enumerate" id="x1-94044x3">
     <!--l. 4705--><p class="noindent" >Coalesce the results.</li></ol>
<!--l. 4707-->
<div class="lstlisting" id="listing-90"><span class="label"><a 
 id="x1-94045r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94046r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94047r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94048r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Salary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94049r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">:</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94050r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">S</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94051r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94052r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94053r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94054r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Sal</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94055r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94056r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94057r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Sal</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94058r14"></a><span 
class="ecrm-0500">14</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94059r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalPeriods</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94060r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94061r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94062r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94063r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94064r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94065r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94066r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94067r23"></a><span 
class="ecrm-0500">23</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94068r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94069r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempMaxDep</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">MaxSalary</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94070r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">MAX</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Amount</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94071r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Sal</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SalPeriods</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94072r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94073r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94074r30"></a><span 
class="ecrm-0500">30</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94075r31"></a><span 
class="ecrm-0500">31</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-94076r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">COALESCE</span></span></div>
<!--l. 4743--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">9.6.5   </span> <a 
 id="x1-950009.6.5"></a>Sequenced division</h5>
<!--l. 4745--><p class="noindent" >Now we have the tables:
   <div class="tabular"> <table id="TBL-67" class="tabular" 
 
><colgroup id="TBL-67-1g"><col 
id="TBL-67-1"></colgroup><colgroup id="TBL-67-2g"><col 
id="TBL-67-2"></colgroup><colgroup id="TBL-67-3g"><col 
id="TBL-67-3"></colgroup><colgroup id="TBL-67-4g"><col 
id="TBL-67-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-67-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-67-1-1"  
class="td11"></td>                <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Affiliation</div>                          </tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-67-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-67-2-1"  
class="td11"> SSN </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-67-2-2"  
class="td11"> DNumber </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-67-2-3"  
class="td11"> FromDate </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-67-2-4"  
class="td11"> ToDate</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-67-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-67-3-1"  
class="td11">      </td> </tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-68" class="tabular" 
 
><colgroup id="TBL-68-1g"><col 
id="TBL-68-1"></colgroup><colgroup id="TBL-68-2g"><col 
id="TBL-68-2"></colgroup><colgroup id="TBL-68-3g"><col 
id="TBL-68-3"></colgroup><colgroup id="TBL-68-4g"><col 
id="TBL-68-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-68-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-68-1-1"  
class="td11"></td>                   <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Controls</div>                              
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-68-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-68-2-1"  
class="td11"> PNumber  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-68-2-2"  
class="td11"> DNumber  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-68-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-68-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-68-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-68-3-1"  
class="td11">          </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-69" class="tabular" 
 
><colgroup id="TBL-69-1g"><col 
id="TBL-69-1"></colgroup><colgroup id="TBL-69-2g"><col 
id="TBL-69-2"></colgroup><colgroup id="TBL-69-3g"><col 
id="TBL-69-3"></colgroup><colgroup id="TBL-69-4g"><col 
id="TBL-69-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-69-1-"><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-69-1-1"  
class="td11"></td>                <div class="multicolumn"  style="white-space:nowrap; text-align:center;">WorksOn</div>                          
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-69-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-69-2-1"  
class="td11"> SSN  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-69-2-2"  
class="td11"> PNumber  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-69-2-3"  
class="td11"> FromDate  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-69-2-4"  
class="td11"> ToDate  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-69-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-69-3-1"  
class="td11">      </td></tr></table>
</div>
<!--l. 4781--><p class="indent" >   And say we want to get the employees that are working all projects of the department to which they are
affiliated.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 4784--><p class="noindent" >Nontemporal version:
     <!--l. 4786-->
     <div class="lstlisting" id="listing-91"><span class="label"><a 
 id="x1-95001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">There</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">are</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">no</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">projects</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">associated</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">to</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">dept</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">in</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">which</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">does</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">not</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">work</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Get</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">all</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">projects</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">controlled</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">by</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">dept</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Check</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">if</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">employee</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">works</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">on</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">it</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4797--><p class="noindent" >Sequenced division: Case1. Only WorksOn is temporal.
     <div class="center" 
>
<!--l. 4798--><p class="noindent" >
<!--l. 4799--><p class="noindent" ><img 
src="27_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado13.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
     <!--l. 4801--><p class="noindent" >
         <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-95010x1">
         <!--l. 4802--><p class="noindent" >Construct the periods on which the division must be computed.
         </li>
<li 
  class="enumerate" id="x1-95012x2">
         <!--l. 4803--><p class="noindent" >Compute the division.
         </li>
<li 
  class="enumerate" id="x1-95014x3">
         <!--l. 4804--><p class="noindent" >Coalesce.</li></ol>
     <!--l. 4806-->
     <div class="lstlisting" id="listing-92"><span class="label"><a 
 id="x1-95015r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95016r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC1</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95017r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95018r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95019r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSn</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95020r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95021r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC1</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95022r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95023r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95024r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95025r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95026r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95027r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95028r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95029r15"></a><span 
class="ecrm-0500">15</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95030r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95031r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempUnivQuantC1</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95032r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95033r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95034r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95035r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95036r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">CONTROLS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95037r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95038r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95039r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95040r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95041r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95042r28"></a><span 
class="ecrm-0500">28</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95043r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">COALESCE</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4838--><p class="noindent" >Sequenced division: Case 2. Only Controls and WorksOn are temporal. In this case, employees
     may work on projects controlled by departments different from the department to which they are
     affiliated.
     <div class="center" 
>
<!--l. 4841--><p class="noindent" >
<!--l. 4842--><p class="noindent" ><img 
src="28_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado14.png" alt="PIC"  
>
</div>
     <!--l. 4844--><p class="noindent" >
         <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-95045x1">
         <!--l. 4845--><p class="noindent" >Construct the periods on which the division must be computed.
         </li>
<li 
  class="enumerate" id="x1-95047x2">
         <!--l. 4846--><p class="noindent" >Compute the division of these periods.
         </li>
<li 
  class="enumerate" id="x1-95049x3">
         <!--l. 4847--><p class="noindent" >Coalesce.</li></ol>
     <!--l. 4849-->
     <div class="lstlisting" id="listing-93"><span class="label"><a 
 id="x1-95050r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95051r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC2</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95052r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95053r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95054r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95055r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95056r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95057r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliationn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95058r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95059r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95060r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95061r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95062r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95063r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95064r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95065r16"></a><span 
class="ecrm-0500">16</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95066r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC2</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95067r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95068r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95069r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95070r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95071r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChanges</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95072r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95073r24"></a><span 
class="ecrm-0500">24</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95074r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95075r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempUnivC2</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95076r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95077r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95078r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95079r30"></a><span 
class="ecrm-0500">30</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95080r31"></a><span 
class="ecrm-0500">31</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95081r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95082r33"></a><span 
class="ecrm-0500">33</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95083r34"></a><span 
class="ecrm-0500">34</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95084r35"></a><span 
class="ecrm-0500">35</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95085r36"></a><span 
class="ecrm-0500">36</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95086r37"></a><span 
class="ecrm-0500">37</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95087r38"></a><span 
class="ecrm-0500">38</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95088r39"></a><span 
class="ecrm-0500">39</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">COALESCE</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4891--><p class="noindent" >Sequenced division: Case 3. Only Affiliation and WorksOn are temporal. Again, employees may work in projects
     controlled by departments different from the department to which they are affiliated.
                                                                                            
                                                                                            
     <div class="center" 
>
<!--l. 4894--><p class="noindent" >
<!--l. 4895--><p class="noindent" ><img 
src="29_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado15.png" alt="PIC"  
>
</div>
     <!--l. 4898--><p class="noindent" >The steps are conceptually the same, so let&#8217;s go with SQL:
     <!--l. 4900-->
     <div class="lstlisting" id="listing-94"><span class="label"><a 
 id="x1-95089r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95090r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_WO</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95091r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95092r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95093r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">toDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95094r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95095r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC3</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95096r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_WO</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95097r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95098r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_WO</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95099r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95100r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95101r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95102r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95103r15"></a><span 
class="ecrm-0500">15</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95104r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC3</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95105r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95106r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95107r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95108r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95109r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95110r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95111r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95112r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95113r25"></a><span 
class="ecrm-0500">25</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95114r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95115r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempUnivQuantC3</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95116r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95117r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95118r30"></a><span 
class="ecrm-0500">30</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95119r31"></a><span 
class="ecrm-0500">31</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95120r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95121r33"></a><span 
class="ecrm-0500">33</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95122r34"></a><span 
class="ecrm-0500">34</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95123r35"></a><span 
class="ecrm-0500">35</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95124r36"></a><span 
class="ecrm-0500">36</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95125r37"></a><span 
class="ecrm-0500">37</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95126r38"></a><span 
class="ecrm-0500">38</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">3:</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">COALESCE</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 4941--><p class="noindent" >Sequenced division, Case 4. The three tables are temporal.
     <div class="center" 
>
<!--l. 4942--><p class="noindent" >
<!--l. 4943--><p class="noindent" ><img 
src="30_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado16.png" alt="PIC"  
>
</div>
     <!--l. 4946-->
     <div class="lstlisting" id="listing-95"><span class="label"><a 
 id="x1-95127r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95128r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95129r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95130r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95131r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95132r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95133r7"></a><span 
class="ecrm-0500">7</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95134r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont_WO</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95135r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95136r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95137r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95138r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">maxDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">minDate</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">A</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95139r13"></a><span 
class="ecrm-0500">13</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95140r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC4</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95141r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95142r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95143r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95144r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95145r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont_WO</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95146r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95147r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Aff_Cont_WO</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95148r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95149r23"></a><span 
class="ecrm-0500">23</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95150r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UNION</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95151r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Affiliation</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95152r26"></a><span 
class="ecrm-0500">26</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95153r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC4</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95154r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95155r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95156r30"></a><span 
class="ecrm-0500">30</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95157r31"></a><span 
class="ecrm-0500">31</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95158r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjChangesC4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95159r33"></a><span 
class="ecrm-0500">33</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95160r34"></a><span 
class="ecrm-0500">34</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P3</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Day</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95161r35"></a><span 
class="ecrm-0500">35</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95162r36"></a><span 
class="ecrm-0500">36</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Step</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95163r37"></a><span 
class="ecrm-0500">37</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VIEW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TempUnivQuantC4</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95164r38"></a><span 
class="ecrm-0500">38</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95165r39"></a><span 
class="ecrm-0500">39</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ProjPeriodsC4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95166r40"></a><span 
class="ecrm-0500">40</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95167r41"></a><span 
class="ecrm-0500">41</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Controls</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95168r42"></a><span 
class="ecrm-0500">42</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">DNumber</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95169r43"></a><span 
class="ecrm-0500">43</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95170r44"></a><span 
class="ecrm-0500">44</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">EXISTS</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">*</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95171r45"></a><span 
class="ecrm-0500">45</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WorksOn</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95172r46"></a><span 
class="ecrm-0500">46</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">C</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">PNumber</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SSN</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-95173r47"></a><span 
class="ecrm-0500">47</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">FromDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">P</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">W</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">ToDate</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
     
     </li></ul>
<!--l. 4998--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">10   </span> <a 
 id="x1-9600010"></a>Temporal Support in current DBMSs and SQL 2011</h3>
<!--l. 5000--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.1   </span> <a 
 id="x1-9700010.1"></a>Oracle</h4>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5002--><p class="noindent" >Oracle 9i included support for transaction time. <span 
class="ecbx-1000">Flashback queries </span>allow the application to access prior
     transaction-time states of their database: they are transaction timeslice queries. Database modifications
     and conventional queries are temporally upward compatible.
     </li>
     <li class="itemize">
     <!--l. 5006--><p class="noindent" >Oracle 10g extended flashback queries to retrieve all the versions of a row between two transaction times.
     It also allowed tables and databases to be rolled back to a previous transaction time, discarding changes
     after that time.
     </li>
     <li class="itemize">
     <!--l. 5010--><p class="noindent" >Oracle  10g  Workspace  Manager  includes  the  period  data  type,  valid-time  support,  transaction-time
     support, bitemporal support and support for sequenced primary keys, sequenced uniqueness, sequenced
     referential integrity and sequenced selection and projection.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 5014--><p class="noindent" >Oracle 11g does not rely on transient storage like the undo segments, it records changes in the Flashback
     Recovery Area. Valid-time queries were also enhanced.</li></ul>
<!--l. 5019--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.2   </span> <a 
 id="x1-9800010.2"></a>Teradata</h4>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5021--><p class="noindent" >Teradata Database 13.10 introduced the period data type, valid-time support, transaction-time support,
     timeslices,  temporal  upward  compatibility,  sequenced  primary  key  and  temporal  referential  integrity
     constraints, nonsequenced queries, and sequenced projection and selection.
     </li>
     <li class="itemize">
     <!--l. 5025--><p class="noindent" >Teradata Database 14 adds capabilities to create a global picture of an organization&#8217;s business at any
     point in time.</li></ul>
<!--l. 5029--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.3   </span> <a 
 id="x1-9900010.3"></a>DB2</h4>
<!--l. 5031--><p class="noindent" >IBM DB2 10 includes the period data type, valid-time support (termed business time), transaction-time support
(termed system time), timeslices, temporal upward compatibility, sequenced primary keys, and sequenced projection
and selection.
<!--l. 5036--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.4   </span> <a 
 id="x1-10000010.4"></a>SQL 2011</h4>
<!--l. 5038--><p class="noindent" >SQL2011 has temporal support:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5040--><p class="noindent" ><span 
class="ecbx-1000">Application-time period tables</span>: valid-time tables. They have sequenced primary and foreign keys,
     support single-table valid-time sequenced insertions, deletions and updates, and nonsequenced valid-time
     queries.
     <!--l. 5045--><p class="noindent" >They contain a PERIOD clause with an user-defined period name. Currently restricted to temporal periods
     only. They must contain two additional columns, to store the start time and the end time of a period
     associated with the row, whose values are set by the user. The user can also specify primary key/unique
     constraints to ensure that no two rows with the same key value have overlapping periods, as well as
     referential integrity constraints to ensure that the period of every child row is completely contained in the
     period of exactly one parent row or in the combined period of two or more consecutive parent rows.
     <!--l. 5055--><p class="noindent" >Queries, inserts, updates and deletes behave exactly like in regular tables. Additional syntax is provided
     on UPDATE and DELETE statements for partial period updates and deletes.
     <!--l. 5059--><p class="noindent" >We can <span 
class="ecbx-1000">create </span>an application-time period table as
     <!--l. 5061-->
     <div class="lstlisting" id="listing-96"><span class="label"><a 
 id="x1-100001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(50)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">PRIMARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(10)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">PRIMARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WITHOUT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OVERLAPS</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOREIGN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">departments</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_period</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
     
                                                                                            
                                                                                            
     <!--l. 5072--><p class="noindent" >The PERIOD clause automatically enforces the constraint end_date &#x003E; start_date. The name of the period can
     be any user-defined name. The period is closed-open, [).
     <!--l. 5076--><p class="noindent" >To <span 
class="ecbx-1000">insert </span>a row into an application-time period table, the user needs to provide the start and end time of the
     period for each row. The time values can be either in the past, current or future.
     <!--l. 5080-->
     <div class="lstlisting" id="listing-97"><span class="label"><a 
 id="x1-100009r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100010r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">J13</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1995-11-15</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1996-11-15</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100011r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Tracy</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">K25</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1996-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1997-11-15</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
     
     <!--l. 5086--><p class="noindent" >All rows canbe potentially <span 
class="ecbx-1000">updated</span>. Users are allowed to update the start and end columns of the period
     associated with each row and when a row is updated using the regular UPDATE statement, the regular semantics
     apply. Additional syntax is provided for UPDATE statements to specify the time period during which the
     update applies, and only rows that lie within the specified period are impacted in that case. This can
     lead to row splits, if the modification lies in the middle of the period of the row. Users are not
     allowed to update the start and end columns of the period associated with each row under this
     option.
     <!--l. 5097--><p class="noindent" >Also, all rows can be potentially <span 
class="ecbx-1000">deleted</span>. Again, normal semantics apply unless we use the syntax provided to
     specify the time period during which the delete applies, so only rows lying inside the indicated period are
     impacted. This can also lead to row splits.
     <!--l. 5102--><p class="noindent" >To <span 
class="ecbx-1000">query </span>a table, normal syntax applies. If we want to retrieve the current department of John:
     <!--l. 5105-->
     <div class="lstlisting" id="listing-98"><span class="label"><a 
 id="x1-100012r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100013r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100014r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100015r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CURRENT_DATE</span></span></div>
     
     <!--l. 5112--><p class="noindent" >Or if we want the number of different departments in which John worked since Jan 1 96:
     <!--l. 5115-->
     <div class="lstlisting" id="listing-99"><span class="label"><a 
 id="x1-100016r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100017r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100018r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100019r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;=</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1996-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1996-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
     
     <!--l. 5122--><p class="noindent" ><span 
class="ecbx-1000">Benefits </span>of application-time period tables:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 5124--><p class="noindent" >Most business data is time sensitive.
         </li>
         <li class="itemize">
         <!--l. 5125--><p class="noindent" >DB  systems  today  offer  no  support  for  associating  user-maintained  time  periods  with  rows  nor
         enforcing constraints such as &#8217;<span 
class="ecti-1000">an employee can be in only one department in any given period</span>&#8217;.
         </li>
         <li class="itemize">
         <!--l. 5128--><p class="noindent" >Updating/deleting a row for a part of its validity period.
         </li>
         <li class="itemize">
         <!--l. 5129--><p class="noindent" >Currently, applications take the responsibility for managing such requirements.
         </li>
         <li class="itemize">
         <!--l. 5131--><p class="noindent" >The major issues are the complexity of the code and its poor performance.
         </li>
         <li class="itemize">
         <!--l. 5132--><p class="noindent" >These table provide:
             <ul class="itemize3">
             <li class="itemize">
             <!--l. 5134--><p class="noindent" >Significant simplification of application code
                                                                                            
                                                                                            
             </li>
             <li class="itemize">
             <!--l. 5135--><p class="noindent" >Significant improvement in performance
             </li>
             <li class="itemize">
             <!--l. 5136--><p class="noindent" >Transparent to legacy applications</li></ul>
         </li></ul>
     </li>
     <li class="itemize">
     <!--l. 5139--><p class="noindent" ><span 
class="ecbx-1000">System-versioned tables</span>: transaction-time tables. They have transaction-time current primary and foreign
     keys, support transaction-time current insertions, deletions and updates, and transaction-time current and
     nonsequenced queries.
     <!--l. 5144--><p class="noindent" >These tables contain a PERIOD clause with a pre-defined period name (SYSTEM_TIME) and specify
     WITH SYSTEM VERSIONING. They must contain two additional columns, to store the start
     time and the end time of the SYSTEM_TIME period, whose values are set by the system, not the
     user. Unlike regular tables, system-versioned tables preserve the old versions of rows as the table is
     updated.
     <!--l. 5151--><p class="noindent" >Rows whose periods intersect the current time are called <span 
class="ecbx-1000">current system rows</span>, all others are called <span 
class="ecbx-1000">historical</span>
     <span 
class="ecbx-1000">system rows</span>. Only current system rows can be updated or deleted and the constraints are enforced only on
     current system rows.
     <!--l. 5156--><p class="noindent" >To <span 
class="ecbx-1000">create </span>a table:
     <!--l. 5158-->
     <div class="lstlisting" id="listing-100"><span class="label"><a 
 id="x1-100020r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employee</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100021r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(50)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">PRIMARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100022r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(10)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100023r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">system_start</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">(6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">GENERATED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ALWAYS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">START</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100024r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">system_end</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">(6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">GENERATED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ALWAYS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100025r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM_TIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">system_start</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">system_end</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100026r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOREIGN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">departments</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100027r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">VERSIONING</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
     
     <!--l. 5169--><p class="noindent" >The PERIOD clause automatically enforces the constraint system_end &#x003E; system_start and the name of the
     period must be SYSTEM_TIME. The period is closed, open [).
     <!--l. 5173--><p class="noindent" >When a row is <span 
class="ecbx-1000">inserted </span>into a system-versiones table, the SQL-implementation sets the start time to the
     transaction time and the end time to the largest timestamp value. All rows inserted in a transaction will get the
     same values for the start and end columns.
     <!--l. 5178--><p class="noindent" >When a row is <span 
class="ecbx-1000">updated </span>the SQL-implementation insert the &#8217;old&#8217; version of the row into the table before updating
     the row, setting its end time and the start time of the updated row to the transaction time. Users are not allowed
     to modify the start nor end time.
     <!--l. 5183--><p class="noindent" >When a row is <span 
class="ecbx-1000">deleted</span>, the SQL-implementation does not actually delete the row, but sets its end time to the
     transaction time.
     <!--l. 5186--><p class="noindent" >To <span 
class="ecbx-1000">query </span>a system-versiones table, existing syntax for querying regular tables is applicable. Additional syntax is
     provided for expressing queries involving system-versioned tables in a more succint manner:
     <!--l. 5190-->
     <div class="lstlisting" id="listing-101"><span class="label"><a 
 id="x1-100028r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM_TIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">datetime</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Ask</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">data</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">of</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">date</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">datetime</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100029r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM_TIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BETWEEN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">datetime</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">datetime</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Ask</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">for</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">data</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">between</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">the</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">two</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">given</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">datetimes</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100030r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM_TIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">datetime</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#000000"><span 
class="ectt-0800">datetime</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Same</span></span></div>
     
     <!--l. 5196--><p class="noindent" >If none of this clause are specified, the system queries only current system tables.
     <!--l. 5199--><p class="noindent" ><span 
class="ecbx-1000">Benefits </span>of system-versioned tables:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 5201--><p class="noindent" >Today&#8217;s DB systems focus mainly on managing current data, providing almnost no support for
         managing historical data, while some applications have an inherent need for preserving old data.
         Also, regulatory and compliance laws require keeping old data around for a certain period of time.
         Currently, applications take on this responsibility.
                                                                                            
                                                                                            
         </li>
         <li class="itemize">
         <!--l. 5206--><p class="noindent" >The major issues are as before: complexity of the code and poor performance.
         </li>
         <li class="itemize">
         <!--l. 5207--><p class="noindent" >System-versioned tables provide:
             <ul class="itemize3">
             <li class="itemize">
             <!--l. 5209--><p class="noindent" >Significant simplification of application code.
             </li>
             <li class="itemize">
             <!--l. 5210--><p class="noindent" >Significant improvement in performance.
             </li>
             <li class="itemize">
             <!--l. 5211--><p class="noindent" >Transparent to legacy applications.</li></ul>
         </li></ul>
     </li>
     <li class="itemize">
     <!--l. 5214--><p class="noindent" ><span 
class="ecbx-1000">System-versiones application-time period tables</span>: bitemporal tables. They support temporal queries and
     modifications of combinations of the valid-time and transaction-time variants. These tables support features of
     both application-time period tables and system-versioned tables.
     <!--l. 5220--><p class="noindent" >To <span 
class="ecbx-1000">create </span>a table:
     <!--l. 5222-->
     <div class="lstlisting" id="listing-102"><span class="label"><a 
 id="x1-100031r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100032r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(50)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">PRIMARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100033r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR</span></span><span style="color:#000000"><span 
class="ectt-0800">(10)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100034r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100035r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NOT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100036r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">system_start</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">(6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">GENERATED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ALWAYS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">START</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100037r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">System_end</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TIMESTAMP</span></span><span style="color:#000000"><span 
class="ectt-0800">(6)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">GENERATED</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ALWAYS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ROW</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">END</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100038r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">start_date</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">end_date</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100039r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM_TIME</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">system_start</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">system_end</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100040r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">PRIMARY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WITHOUT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">OVERLAPS</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100041r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FOREIGN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">KEY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">REFERENCES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">departments</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PERIOD</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_period</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100042r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">WITH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SYSTEM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">VERSIONING</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
     
     <!--l. 5237--><p class="noindent" >Say we want to make the following update: On 15/12/97, John is loaned to department M12 starting from
     01/01/98 to 01/07/98:
     <!--l. 5240-->
     <div class="lstlisting" id="listing-103"><span class="label"><a 
 id="x1-100043r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">UPDATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PORTION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100044r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1998-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1998-07-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100045r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SET</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">dept_id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">M12</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
     
     <!--l. 5246--><p class="noindent" >Or in 15/12/98, John is approved for a leave of absence from 1/1/99 to 1/1/2000:
     <!--l. 5249-->
     <div class="lstlisting" id="listing-104"><span class="label"><a 
 id="x1-100046r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DELETE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">employees</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100047r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">FOR</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">PORTION</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">OF</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_period</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">1999-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">2000-01-01</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-100048r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">emp_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">John</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
     
     </li></ul>
<!--l. 5256--><p class="noindent" >
                                                                                            
                                                                                            
   <h1 class="partHead"><span class="titlemark">Part&#x00A0;IV<br /></span><a 
 id="x1-101000IV"></a>Spatial Databases</h1>
   <h3 class="sectionHead"><span class="titlemark">11   </span> <a 
 id="x1-10200011"></a>Introduction</h3>
<!--l. 5262--><p class="noindent" >A <span 
class="ecbx-1000">spatial database </span>is a database that needs to store and query spatial objects, such as points (a house in a city), lines
(a road) or polygons (a country). Thus, a <span 
class="ecbx-1000">spatial DBMS </span>is a DBMS that manages data existing in some
space:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5267--><p class="noindent" >2D or 2.5D: integrated circuits (VLSI design) or geographic space (GIS, urban planning).
     </li>
     <li class="itemize">
     <!--l. 5269--><p class="noindent" >2.5D: elevation.
     </li>
     <li class="itemize">
     <!--l. 5270--><p class="noindent" >3D: medicine (brain models), biological research (moledule structures), architecture (CAD) or ground
     models (geology).</li></ul>
<!--l. 5273--><p class="noindent" >The supporting technology needs to be able to manage large collections of geometric objects, and major commercial and
open source DBMSs provide spatial support.
<!--l. 5277--><p class="indent" >   Spatial databases are important because queries to databases are posed in high level declarative manner, usually
with SQL, which is popular in the commercial DB world. Also, although the standard SQL operates
on relatively simple data types, additional spatial data types and operations can be defined in spatial
databases.
<!--l. 5283--><p class="indent" >   A <span 
class="ecbx-1000">geographic information system (GIS) </span>is a system designed to capture, store, manipulate, analyze, manage
and present geographically-referenced data, as well as non spatial data. It can be used to establish connections
between different elements using geography operations, such as the location, the proximity or the spatial
distribution. There are plenty of commercial and open source systems of this kind, but with limited temporal
support.
<!--l. 5291--><p class="indent" >   A GIS can be seen as a set of subsystems:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5293--><p class="noindent" >Data processing: data acquisition, input and store.
     </li>
     <li class="itemize">
     <!--l. 5294--><p class="noindent" >Data analysis: retrieval and analysis.
     </li>
     <li class="itemize">
     <!--l. 5295--><p class="noindent" >Information use: it is needed an interaction between GIS group and users to plan analytical procedures
     and data structures. The users of GIS are researches, planners or managers.
     </li>
     <li class="itemize">
     <!--l. 5298--><p class="noindent" >Management system: it has an organizational role, being a separate unit in a resource management. An
     agency offering spatial DB and analysis services.</li></ul>
<!--l. 5302--><p class="noindent" >There are many fields involved in the development of GIS: geography, cartography, remote sensing, photogrammetry,
geodesy, statistics, operations research, mathematics, civil engineering and computer science, with computer aided
design (CAD), computer graphics, AI and DBMS.
                                                                                            
                                                                                            
<!--l. 5307--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">11.1   </span> <a 
 id="x1-10300011.1"></a>GIS architectures</h4>
<!--l. 5309--><p class="noindent" >There are several possible architectures for a GIS:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5311--><p class="noindent" ><span 
class="ecbx-1000">Ad Hoc Systems</span>: they are developed for a specific problem. They are not modular, nor reusable nor
     extensible, nor friendly but are very efficient.
     <!--l. 5315--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-103001r7"></a>  <img 
src="31_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado17.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7: </span><span  
class="content">Ad Hoc GIS.</span></div><!--tex4ht:label?: x1-103001r7 -->
     <!--l. 5320--><p class="noindent" ></div><hr class="endfigure">
     </li>
     <li class="itemize">
     <!--l. 5322--><p class="noindent" ><span 
class="ecbx-1000">Loosely coupled approach</span>: structured information and geometry are stored at different places:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 5325--><p class="noindent" >There is a RDBMS for non spatial data.
         </li>
         <li class="itemize">
         <!--l. 5326--><p class="noindent" >There is a specific module for spatial data management.</li></ul>
     <!--l. 5328--><p class="noindent" >This allows for modularity, but there are two heterogeneous models in use. This makes it more difficult to model,
     integrate and use. Also, there is a partial loss of basic DBMS functionality (concurrency, optimization, recovery,
     querying).
     <!--l. 5333--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-103002r8"></a>  <img 
src="32_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado18.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;8: </span><span  
class="content">Loosely coupled GIS.</span></div><!--tex4ht:label?: x1-103002r8 -->
     <!--l. 5338--><p class="noindent" ></div><hr class="endfigure">
     </li>
     <li class="itemize">
     <!--l. 5340--><p class="noindent" ><span 
class="ecbx-1000">Integrated approach</span>: this approach is an extended relational system, which makes it modular, extensible,
     reusable and friendly.
     <!--l. 5344--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-103003r9"></a>  <img 
src="33_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado19.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;9: </span><span  
class="content">Integrated GIS.</span></div><!--tex4ht:label?: x1-103003r9 -->
     <!--l. 5349--><p class="noindent" ></div><hr class="endfigure">
     </li></ul>
<!--l. 5353--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">12   </span> <a 
 id="x1-10400012"></a>Georeferences and Coordinate Systems</h3>
                                                                                            
                                                                                            
<!--l. 5355--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">12.1   </span> <a 
 id="x1-10500012.1"></a>Projected coordinate systems</h4>
<!--l. 5357--><p class="noindent" >Going from 3D to 2D for Earth representation always involves a projection, so information on the projection is essential
for applications analyzing spatial relationships and the choice of the projection used can influence the results.
Also, the Earth is a complex surface whose shape and dimensions cannot be described with mathematical
formulas. Two main reference surfaces are used to approximate the shape of the Earth: the <span 
class="ecbx-1000">ellipsoid </span>and the
<span 
class="ecbx-1000">geoid</span>.
<!--l. 5365--><p class="indent" >   The <span 
class="ecbx-1000">geoid </span>is a reference model for the physical surface of the Earth. It is defined as the equipotential
surface of the Earth&#8217;s gravity field which best fits the global mean sea level and extended through the
continents. It is used in geodesy but it is not very practical to produce maps. Also, since its mathematical
description is unknown, it is impossible to identify mathematical relationships for moving from the Earth to a
map.
<!--l. 5373--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-105001r10"></a>
                                                                                            
                                                                                            
<!--l. 5375--><p class="noindent" ><img 
src="34_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado20.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;10: </span><span  
class="content">The geoid.</span></div><!--tex4ht:label?: x1-105001r10 -->
                                                                                            
                                                                                            
<!--l. 5378--><p class="indent" >   </div><hr class="endfigure">
<!--l. 5380--><p class="indent" >   An <span 
class="ecbx-1000">ellipsoid </span>is a mathematically defined surface that approximates the geoid. It is the 3-dimensional version of an
ellipse.
<!--l. 5383--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-105002r11"></a>
                                                                                            
                                                                                            
<!--l. 5385--><p class="noindent" ><img 
src="35_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado21.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;11: </span><span  
class="content">An ellipse (left) and how it can approximate locally a complex shape (right).</span></div><!--tex4ht:label?: x1-105002r11 -->
                                                                                            
                                                                                            
<!--l. 5389--><p class="indent" >   </div><hr class="endfigure">
<!--l. 5391--><p class="indent" >   The <span 
class="ecbx-1000">flattening </span>measures how much the symmetry axis is compressed relative to the equatorial radius, it is
computed by
   <div class="math-display" >
<img 
src="summary78x.png" alt="f = a---b.
      a
" class="math-display" ></div>
<!--l. 5396--><p class="indent" >   For the Earth, <span 
class="cmmi-10">f </span><span 
class="cmsy-10">~</span><img 
src="summary79x.png" alt="1--
300"  class="frac" align="middle">: the difference of the major and minor semi-axis is approximately 21 km. The ellopsoid is
thus used to measure locations, using the latitude and the longitude, for points of interest. These locations on the
ellipsoid are then projected onto a mapping plane. Note that different regions of the world use a different reference
ellipsoid that minimize the differences between the geoid and the ellipsoid. For Belgium, the ellipsoid is GRS80 or
WGS84, with <span 
class="cmmi-10">a </span><span 
class="cmr-10">= 6378137</span><span 
class="cmmi-10">&#x00A0;m </span>and <span 
class="cmmi-10">f </span><span 
class="cmr-10">=</span> <img 
src="summary80x.png" alt="---1--
298.2572"  class="frac" align="middle">.
<!--l. 5405--><p class="indent" >   This is done because the physical Earth has excursions of +8km and -11km, so the geoid&#8217;s total variation goes from
-107m to +85m compared to a perfect ellipsoid.
   <h5 class="subsubsectionHead"><span class="titlemark">12.1.1   </span> <a 
 id="x1-10600012.1.1"></a>Latitude and longitude</h5>
<!--l. 5411--><p class="noindent" >Latitude and longitude are measures of the angles (in degrees) from the center of the Earth to a point
on the Earth&#8217;s surface. The <span 
class="ecbx-1000">latitude </span>measures angles in the North-South direction, with the equator
being at 0<span 
class="tcrm-1000">º</span>. The <span 
class="ecbx-1000">longitude </span>measures angles in the East-West direction, with the prime meridian at
0<span 
class="tcrm-1000">º</span>.
<!--l. 5417--><p class="indent" >   Note that they are not uniform units of distance, because the degrees change differently depending on where in the
map we look at. Only along the equator the distance represented by one degree of longitude approximates the distance
represented by one degree of latitude.
<!--l. 5422--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-106001r12"></a>
                                                                                            
                                                                                            
<!--l. 5424--><p class="noindent" ><img 
src="36_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado22.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;12: </span><span  
class="content">The latitude and the longitude.</span></div><!--tex4ht:label?: x1-106001r12 -->
                                                                                            
                                                                                            
<!--l. 5427--><p class="indent" >   </div><hr class="endfigure">
<!--l. 5429--><p class="indent" >   To produce a map, the curved surface of the Earth, approximated by an ellipsoid is transformed into the flat plane
of the map by means of a map projection. A point on the reference surface of the Earth with coordinates <img 
src="summary81x.png" alt="(&#x03D5;,&#x03BB; )"  class="left" align="middle"> is
transformed into Cartesian coordinates <img 
src="summary82x.png" alt="(x,y)"  class="left" align="middle"> representing the positions on the map plane. Each projection causes
deformations in one or another way.
<!--l. 5437--><p class="indent" >   Map projections can be categorized in four ways: shape used, angle, fit and properties.
   <h5 class="subsubsectionHead"><span class="titlemark">12.1.2   </span> <a 
 id="x1-10700012.1.2"></a>Shape of projection surface</h5>
<!--l. 5442--><p class="noindent" >Different shapes can be used for projection, commonly either a flat plane, a cylinder or a cone. Note that cylinders and
cones are flat shapes, but they can be rolled flat without introducing additional distorsion.
<!--l. 5447--><p class="indent" >   According to this categorization, the projection can be:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5449--><p class="noindent" >Cylindrical: coordinates projected onto a cylinder. These work best for rectangular areas.
     </li>
     <li class="itemize">
     <!--l. 5451--><p class="noindent" >Conical: coordinates projected onto a cone. These work best for triangle shaped areas.
     </li>
     <li class="itemize">
     <!--l. 5453--><p class="noindent" >Azimuthal: coordinates projected directly onto a flat planar surface. These work best for circular areas.</li></ul>
<!--l. 5456--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-107001r13"></a><img 
src="37_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado23.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;13: </span><span  
class="content">Shapes of projection surface.</span></div><!--tex4ht:label?: x1-107001r13 -->
<!--l. 5461--><p class="indent" >   </div><hr class="endfigure">
<!--l. 5464--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">12.1.3   </span> <a 
 id="x1-10800012.1.3"></a>Angle</h5>
<!--l. 5466--><p class="noindent" >The angle referes to the alignment of the projection surface, measured as the angle between the main axis of the Earth
and the main symmetry axis of the projection surface:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5470--><p class="noindent" >Normal: the two axes are parallel.
     </li>
     <li class="itemize">
     <!--l. 5471--><p class="noindent" >Transverse: the two axes are perpendicular.
     </li>
     <li class="itemize">
     <!--l. 5472--><p class="noindent" >Oblique: the two axes are at some other angle.</li></ul>
<!--l. 5474--><p class="noindent" >Ideally the plane of projection is aligned as closely as possible with the main axis of the area to be mapped, minimizing
distorsion and scale errors.
<!--l. 5478--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-108001r14"></a>
                                                                                            
                                                                                            
<!--l. 5480--><p class="noindent" ><img 
src="38_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado24.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;14: </span><span  
class="content">Angle of projection.</span></div><!--tex4ht:label?: x1-108001r14 -->
                                                                                            
                                                                                            
<!--l. 5483--><p class="indent" >   </div><hr class="endfigure">
   <h5 class="subsubsectionHead"><span class="titlemark">12.1.4   </span> <a 
 id="x1-10900012.1.4"></a>Fit</h5>
<!--l. 5488--><p class="noindent" >The fit is a measure of how closely the projection surface fits the surface of the Earth:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5491--><p class="noindent" >Tangent: the projection surface touches the surface of the Earth.
     </li>
     <li class="itemize">
     <!--l. 5492--><p class="noindent" >Secan: the projection surface slices through the Earth.</li></ul>
<!--l. 5494--><p class="noindent" >Distorsion occurs whenever the projection surface is not touching or intersecting the surface of the Earth. Secant
projections usually reduce scale errors, because the two surface intersect in more places and the overall
fits tends to be better. A globe is the only way to represent the entire Earth without significant scale
errors.
<!--l. 5500--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-109001r15"></a>
                                                                                            
                                                                                            
<!--l. 5502--><p class="noindent" ><img 
src="39_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado25.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;15: </span><span  
class="content">Fit of projection.</span></div><!--tex4ht:label?: x1-109001r15 -->
                                                                                            
                                                                                            
<!--l. 5505--><p class="indent" >   </div><hr class="endfigure">
   <h5 class="subsubsectionHead"><span class="titlemark">12.1.5   </span> <a 
 id="x1-11000012.1.5"></a>Geometric deformations</h5>
<!--l. 5510--><p class="noindent" >With different projections, different measures are preseved:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5512--><p class="noindent" >Conformal: preserve shapes and angles. Recommended for navigational charts and topographic maps.
     </li>
     <li class="itemize">
     <!--l. 5514--><p class="noindent" >Equal area: preserve areas in correct relative size. Best suited for thematic mapping.
     </li>
     <li class="itemize">
     <!--l. 5516--><p class="noindent" >Equidistant: preserve distance (only possible at certain locations or in certain directions). Best suited
     when measuring distance from a point.
     </li>
     <li class="itemize">
     <!--l. 5519--><p class="noindent" >True-direction: preserve accurate directions.</li></ul>
<!--l. 5521--><p class="noindent" >It is impossible to construct a map that is equal-area and conformal.
<!--l. 5523--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">13   </span> <a 
 id="x1-11100013"></a>Conceptual Modelling for Spatial Databases</h3>
<!--l. 5525--><p class="noindent" >The data modeling of spatial features requires for multiple views of space (discrete and continuous; 2D, 2.5D
and 3D), multiple representation of the data, at different scales and from different viewpoints, several
spatial abstract data types (point, line, area, set of points,...) and explicit spatial relationships (crossing,
adjacency,...).
<!--l. 5531--><p class="indent" >   Let&#8217;s see this requirements in depth. First, we have <span 
class="ecbx-1000">interaction requirements</span>:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5534--><p class="noindent" >Visual interactions: map displays, information visualizations and graphical queries on maps.
     </li>
     <li class="itemize">
     <!--l. 5536--><p class="noindent" >Flexible, context-dependent interactions.
     </li>
     <li class="itemize">
     <!--l. 5537--><p class="noindent" >Multiple user profiles (a highway can have constructors, car drivers, hikers,...)
     </li>
     <li class="itemize">
     <!--l. 5539--><p class="noindent" >Multiple instantiations (a building may be a school and a church).</li></ul>
<!--l. 5541--><p class="noindent" ><span 
class="ecbx-1000">Practical requirements</span>:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5543--><p class="noindent" >Huge dataset: collecting new data is expensive, so reusing highly heterogeneous datasets is a must... but
     it is very complex. The integration requires understanding, so a conceptual model is important.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 5546--><p class="noindent" >Integration of DB with different space/time granularity.
     </li>
     <li class="itemize">
     <!--l. 5547--><p class="noindent" >Coexistence with non-spatial and non-temporal data.
     </li>
     <li class="itemize">
     <!--l. 5548--><p class="noindent" >Reengineering of legacy applications.
     </li>
     <li class="itemize">
     <!--l. 5549--><p class="noindent" >Interoperability.</li></ul>
<!--l. 5551--><p class="noindent" >Thus, <span 
class="ecbx-1000">conceptual modelling </span>is important because it focuses on the application, it is technology independent, which
increases portability and durability. It is user oriented and uses a formal unambiguous specification, with the support of
visual interfaces for data definition and manipulation. It is the best vehicle for information exchange and
integration.
<!--l. 5558--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">13.1   </span> <a 
 id="x1-11200013.1"></a>The Spatiotemporal conceptual manifesto</h4>
<!--l. 5560--><p class="noindent" >It has a good expressive power, with a simple data model, with few clean concepts and standard, well-known semantics.
There are no artificial constructs and space, time and data structures are treated as orthogonal. It provieds a clean,
visual notation and intuitive icons and symbols, providing a formal definition and an associated query
language.
<!--l. 5566--><p class="indent" >   As with temporal DB, in spatial DB there are multiple ways to model the reality, each with its own characteristics.
For example:
<div class="center" 
>
<!--l. 5568--><p class="noindent" >
<!--l. 5569--><p class="noindent" ><img 
src="40_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado26.png" alt="PIC"  
>
</div>
<!--l. 5572--><p class="indent" >   And there is also a MADS Spatial Type Hierarchy:
<!--l. 5574--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                            
                                                                                            
<a 
 id="x1-112001r16"></a>
                                                                                            
                                                                                            
<!--l. 5576--><p class="noindent" ><img 
src="41_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado27.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16: </span><span  
class="content">MADS Spatial Type Hierarchy.</span></div><!--tex4ht:label?: x1-112001r16 -->
                                                                                            
                                                                                            
<!--l. 5579--><p class="indent" >   </div><hr class="endfigure">
<!--l. 5581--><p class="indent" >   We need to keep in mind that the types are <span 
class="ecbx-1000">topologically closed</span>: all geometries include their boundary.
<!--l. 5584--><p class="indent" >   Geo, SimpleGeo and ComplexGeo are abstract classes.
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.1   </span> <a 
 id="x1-11300013.1.1"></a>MADS Spatial datatypes</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5588--><p class="noindent" ><span 
class="ecbx-1000">Point</span>: its boundary is the empty set.
     </li>
     <li class="itemize">
     <!--l. 5589--><p class="noindent" ><span 
class="ecbx-1000">Line</span>: it can be of several types:
     <div class="center" 
>
<!--l. 5590--><p class="noindent" >
<!--l. 5591--><p class="noindent" ><img 
src="42_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado28.png" alt="PIC"  
>
</div>
     <!--l. 5594--><p class="noindent" >Its boundary is composed of the extreme points, if any.
     </li>
     <li class="itemize">
     <!--l. 5595--><p class="noindent" ><span 
class="ecbx-1000">Surface</span>: it is define by 1 exterior boundary and 0 or more interior boundaries, defining its holes:
     <div class="center" 
>
<!--l. 5597--><p class="noindent" >
<!--l. 5598--><p class="noindent" ><img 
src="43_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado29.png" alt="PIC"  
>
</div>
     <!--l. 5601--><p class="noindent" >The following are not surfaces:
     <div class="center" 
>
<!--l. 5602--><p class="noindent" >
<!--l. 5603--><p class="noindent" ><img 
src="44_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado30.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5605--><p class="noindent" ><span 
class="ecbx-1000">Complex geometries</span>: a complex geometry is a geometry composed of several sub-geometries. Its boundary is
     defined recursively as the spatial union of:
         <ul class="itemize2">
         <li class="itemize">
         <!--l. 5609--><p class="noindent" >The boundaries of its components that do not intersect with other components.
         </li>
         <li class="itemize">
         <!--l. 5611--><p class="noindent" >The intersecting boundaries that do not lie in the interior of their union.</li></ul>
                                                                                            
                                                                                            
     <!--l. 5614--><p class="noindent" >If we have two geometries, <span 
class="cmmi-10">a </span>and <span 
class="cmmi-10">b</span>, then
<div class="math-display" >
<img 
src="summary83x.png" alt="B (a&#x222A; b) = [B (a)- b]&#x222A;[B (b) - a]&#x222A; [(B (a)&#x2229; b)&#x222A; (B (b)&#x2229; a)- I(a&#x222A; b)],
" class="math-display" ></div>
     <!--l. 5618--><p class="noindent" >where <span 
class="cmmi-10">B</span><img 
src="summary84x.png" alt="(x)"  class="left" align="middle"> is the boundary of <span 
class="cmmi-10">x </span>and <span 
class="cmmi-10">I</span><img 
src="summary85x.png" alt="(x)"  class="left" align="middle"> is the interior of <span 
class="cmmi-10">x</span>. A sample classification of different cases is the
     following:
     <div class="center" 
>
<!--l. 5621--><p class="noindent" >
<!--l. 5622--><p class="noindent" ><img 
src="45_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado31.png" alt="PIC"  
>
</div>
     </li></ul>
<!--l. 5626--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.2   </span> <a 
 id="x1-11400013.1.2"></a>Topological predicates</h5>
<!--l. 5628--><p class="noindent" >A topological predicate specifies how two geometries relate to each other. It is based on the definition of their boundary
<span 
class="cmmi-10">B</span><img 
src="summary86x.png" alt="(x)"  class="left" align="middle">, interior <span 
class="cmmi-10">I</span><img 
src="summary87x.png" alt="(x)"  class="left" align="middle">, and exterior <span 
class="cmmi-10">E</span><img 
src="summary88x.png" alt="(x)"  class="left" align="middle">, and their dimension <span 
class="cmmi-10">Dim</span><img 
src="summary89x.png" alt="(x)"  class="left" align="middle">, which can be -1,0,1 or 2 (-1 is for the empty set).
The <span 
class="ecbx-1000">dimensionally extended 9-intersection matrix (DE-9IM) </span>is a matrix used for defining predicates. It is based
in the following template:
<div class="center" 
>
<!--l. 5635--><p class="noindent" >
<div class="tabular"> <table id="TBL-70" class="tabular" 
 
><colgroup id="TBL-70-1g"><col 
id="TBL-70-1"></colgroup><colgroup id="TBL-70-2g"><col 
id="TBL-70-2"></colgroup><colgroup id="TBL-70-3g"><col 
id="TBL-70-3"></colgroup><colgroup id="TBL-70-4g"><col 
id="TBL-70-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-70-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-70-1-1"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-1-2"  
class="td11">      Interior         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-1-3"  
class="td11">     Boundary        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-1-4"  
class="td11">      Exterior         </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-70-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-70-2-1"  
class="td11">  Interior   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-2-2"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary90x.png" alt="(I(a)&#x2229; I(b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-2-3"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary91x.png" alt="(I (a)&#x2229; B (b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-2-4"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary92x.png" alt="(I(a)&#x2229; E (b))"  class="left" align="middle">  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-70-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-70-3-1"  
class="td11"> Boundary  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-3-2"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary93x.png" alt="(B (a) &#x2229;I (b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-3-3"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary94x.png" alt="(B (a)&#x2229;B (b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-3-4"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary95x.png" alt="(B (a)&#x2229; E (b))"  class="left" align="middle">  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-70-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-70-4-1"  
class="td11">  Exterior   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-4-2"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary96x.png" alt="(E (a) &#x2229;I (b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-4-3"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary97x.png" alt="(E (a)&#x2229;B (b))"  class="left" align="middle">  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-70-4-4"  
class="td11"> <span 
class="cmmi-10">Dim</span><img 
src="summary98x.png" alt="(E(a)&#x2229; E (b))"  class="left" align="middle">  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-70-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-70-5-1"  
class="td11">          </td></tr></table></div>
</div>
<!--l. 5661--><p class="indent" >   It is coded using a dense notation with a string of 9 characters, to represent the cells of the matrix. The possible
characters are:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5664--><p class="noindent" ><span 
class="ecbx-1000">T</span>: non-empty intersection.
     </li>
     <li class="itemize">
     <!--l. 5665--><p class="noindent" ><span 
class="ecbx-1000">F</span>: empty intersection.
     </li>
     <li class="itemize">
     <!--l. 5666--><p class="noindent" ><span 
class="ecbx-1000">0</span>: intersection is a point.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 5667--><p class="noindent" ><span 
class="ecbx-1000">1</span>: intersection is a line.
     </li>
     <li class="itemize">
     <!--l. 5668--><p class="noindent" ><span 
class="ecbx-1000">2</span>: intersection is a surface.
     </li>
     <li class="itemize">
     <!--l. 5669--><p class="noindent" ><span 
class="ecbx-1000">*</span>: it is irrelevant.</li></ul>
<div class="newtheorem">
<!--l. 5671--><p class="noindent" ><span class="head">
<a 
 id="x1-114001r1"></a>
<span 
class="ecbx-1000">Example 13.1.</span>  </span><span 
class="cmmi-10">Disjoint</span><img 
src="summary99x.png" alt="(a,b)"  class="left" align="middle"> is true if their intersection is empty. So, it is
   <div class="math-display" >
<img 
src="summary100x.png" alt="Disjoint (a,b) = [I(a)&#x2229; I(b) = &#x2205;]&#x2227;[I(a)&#x2229; B (b) = &#x2205;]&#x2227; [B (a)&#x2229; I(b) = &#x2205;]&#x2227; [B (a)&#x2229; B (b) = &#x2205;].
" class="math-display" ></div>
<!--l. 5677--><p class="indent" >   Then, it can be coded as &#8217;FF*FF****&#8217;.
<!--l. 5679--><p class="indent" >   Let&#8217;s see some predicates:
</div>
<!--l. 5680--><p class="indent" >
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5682--><p class="noindent" ><span 
class="cmmi-10">Meets</span><img 
src="summary101x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary102x.png" alt="[I(a)&#x2229; I(b) = &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary103x.png" alt="[a &#x2229;b &#x2044;= &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary104x.png" alt="[Dim  (a &#x2229;b) = 0]"  class="left" align="middle">. Some geometries that satisfy
     it:
     <div class="center" 
>
<!--l. 5684--><p class="noindent" >
<!--l. 5685--><p class="noindent" ><img 
src="46_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado32.png" alt="PIC"  
>
</div>
     <!--l. 5688--><p class="noindent" >And some that don&#8217;t:
     <div class="center" 
>
<!--l. 5689--><p class="noindent" >
<!--l. 5690--><p class="noindent" ><img 
src="47_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado33.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 5692--><p class="noindent" ><span 
class="cmmi-10">Adjacent</span><img 
src="summary105x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary106x.png" alt="[I(a)&#x2229; I(b) = &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary107x.png" alt="[a &#x2229; b &#x2044;= &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary108x.png" alt="[Dim  (a &#x2229; b) = 1]"  class="left" align="middle"><span 
class="cmmi-10">. </span>Some geometries that satisfy
     it:
     <div class="center" 
>
<!--l. 5694--><p class="noindent" >
<!--l. 5695--><p class="noindent" ><img 
src="48_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado34.png" alt="PIC"  
>
</div>
     <!--l. 5698--><p class="noindent" >And an example that doesn&#8217;t:
     <div class="center" 
>
<!--l. 5699--><p class="noindent" >
<!--l. 5700--><p class="noindent" ><img 
src="49_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado35.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5702--><p class="noindent" ><span 
class="cmmi-10">Touches</span><img 
src="summary109x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary110x.png" alt="[I (a) &#x2229;I (b) = &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary111x.png" alt="[a&#x2229; b &#x2044;= &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">Meets</span><img 
src="summary112x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x2228; </span><span 
class="cmmi-10">Adjacent</span><img 
src="summary113x.png" alt="(a,b)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 5703--><p class="noindent" ><span 
class="cmmi-10">Crosses</span><img 
src="summary114x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary115x.png" alt="[Dim (I(a)&#x2229; I(b)) &#x003C; max {Dim (I(a)),Dim (I (b))}]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary116x.png" alt="[a &#x2229;b &#x2044;= a]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary117x.png" alt="[a&#x2229; b &#x2044;= b]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary118x.png" alt="[a&#x2229; b &#x2044;= &#x2205;]"  class="left" align="middle">.
     Some geometries that satisfy it:
     <div class="center" 
>
<!--l. 5705--><p class="noindent" >
<!--l. 5706--><p class="noindent" ><img 
src="50_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado36.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5708--><p class="noindent" ><span 
class="cmmi-10">Overlaps</span><img 
src="summary119x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary120x.png" alt="[Dim (I(a)) = Dim (I(b)) = Dim (I(a)&#x2229; I(b))]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary121x.png" alt="[a&#x2229; b &#x2044;= a]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary122x.png" alt="[a &#x2229; b &#x2044;= b]"  class="left" align="middle">. Some geometries
     that satisfy it:
     <div class="center" 
>
<!--l. 5710--><p class="noindent" >
<!--l. 5711--><p class="noindent" ><img 
src="51_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado37.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5713--><p class="noindent" ><span 
class="cmmi-10">Contains</span><img 
src="summary123x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">Within</span><img 
src="summary124x.png" alt="(b,a)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary125x.png" alt="[I(a)&#x2229; I(a) &#x2044;= &#x2205;]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary126x.png" alt="[a&#x2229; b = b]"  class="left" align="middle">. Some geometries that satisfy
     it:
                                                                                            
                                                                                            
     <div class="center" 
>
<!--l. 5715--><p class="noindent" >
<!--l. 5716--><p class="noindent" ><img 
src="52_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado38.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5718--><p class="noindent" ><span 
class="cmmi-10">Disjoint</span><img 
src="summary127x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">a </span><span 
class="cmsy-10">&#x2229; </span><span 
class="cmmi-10">b </span><span 
class="cmr-10">= </span><span 
class="cmsy-10">&#x2205;</span><span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">Intersects</span><img 
src="summary128x.png" alt="(E (a),b)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 5719--><p class="noindent" ><span 
class="cmmi-10">Equals</span><img 
src="summary129x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary130x.png" alt="[a &#x2229;b = a]"  class="left" align="middle"> <span 
class="cmsy-10">&#x2227;</span><img 
src="summary131x.png" alt="[a &#x2229;b = b]"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span><img 
src="summary132x.png" alt="(a- b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x222A;</span><img 
src="summary133x.png" alt="(b- a)"  class="left" align="middle"> <span 
class="cmr-10">= </span><span 
class="cmsy-10">&#x2205;</span>.
     </li>
     <li class="itemize">
     <!--l. 5720--><p class="noindent" ><span 
class="cmmi-10">Covers</span><img 
src="summary134x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">a </span><span 
class="cmsy-10">&#x2229; </span><span 
class="cmmi-10">b </span><span 
class="cmr-10">= </span><span 
class="cmmi-10">b</span> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">b </span><span 
class="cmsy-10">- </span><span 
class="cmmi-10">a </span><span 
class="cmr-10">= </span><span 
class="cmsy-10">&#x2205; </span>(same as <span 
class="cmmi-10">contains</span><img 
src="summary135x.png" alt="(a,b)"  class="left" align="middle"> but it can have empty interior).
     </li>
     <li class="itemize">
     <!--l. 5722--><p class="noindent" ><span 
class="cmmi-10">Encloses</span><img 
src="summary136x.png" alt="(a,b)"  class="left" align="middle"> <span 
class="cmsy-10">&#x21D0;&#x21D2;</span> <span 
class="cmmi-10">Surrounded</span><img 
src="summary137x.png" alt="(b,a)"  class="left" align="middle">: the definition is involved, depending of whether <span 
class="cmmi-10">a </span>is a (set of) line(s) or a
     (set of) surface(s). Some examples that verify it:
     <div class="center" 
>
<!--l. 5725--><p class="noindent" >
<!--l. 5726--><p class="noindent" ><img 
src="53_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado39.png" alt="PIC"  
>
</div>
     </li></ul>
<!--l. 5730--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.3   </span> <a 
 id="x1-11500013.1.3"></a>Spatial objects</h5>
<!--l. 5732--><p class="noindent" >Objects can be defined as spatial:
<div class="center" 
>
<!--l. 5733--><p class="noindent" >
<div class="tabular"> <table id="TBL-71" class="tabular" 
 
><colgroup id="TBL-71-1g"><col 
id="TBL-71-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-71-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-71-1-1"  
class="td11"> Country <img 
src="54_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado40.png" alt="PIC"  
>  </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-71-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-71-2-1"  
class="td11">     name       </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-71-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-71-3-1"  
class="td11">  population    </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-71-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-71-4-1"  
class="td11">              </td></tr></table></div>
</div>
<!--l. 5746--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.4   </span> <a 
 id="x1-11600013.1.4"></a>Spatial attributes</h5>
<!--l. 5748--><p class="noindent" >Both non-spatial and spatial objects types can have spatial attributes. The domain of a spatial attribute is a spatial
type, and can be multi-values. A spatial attribute of a spatial object type may induce a toplogical constraint
(e.g. the capital of a country is located within the geometry of the country), but is is not necessarilly
the case: it depends on application semantics and the application schema must explicitly state these
constraints.
                                                                                            
                                                                                            
<div class="center" 
>
<!--l. 5755--><p class="noindent" >
<div class="tabular"> <table id="TBL-72" class="tabular" 
 
><colgroup id="TBL-72-1g"><col 
id="TBL-72-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-72-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-72-1-1"  
class="td11">   Client     </td></tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-72-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-72-2-1"  
class="td11"> name</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-72-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-72-3-1"  
class="td11">   address     </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-72-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-72-4-1"  
class="td11"> location<img 
src="55_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado41.png" alt="PIC"  
>  </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-72-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-72-5-1"  
class="td11">            </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-73" class="tabular" 
 
><colgroup id="TBL-73-1g"><col 
id="TBL-73-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-1-1"  
class="td11">  Country <img 
src="54_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado40.png" alt="PIC"  
>   </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-2-1"  
class="td11">     name        </td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-3-1"  
class="td11"> population</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-4-1"  
class="td11">   capital<img 
src="55_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado41.png" alt="PIC"  
>     </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-5-1"  
class="td11"> rivers(1,n) <img 
src="56_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado42.png" alt="PIC"  
>  </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-73-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-73-6-1"  
class="td11">               </td></tr></table>
</div><!--tex4ht:inline--><div class="tabular"> <table id="TBL-74" class="tabular" 
 
><colgroup id="TBL-74-1g"><col 
id="TBL-74-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-74-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-74-1-1"  
class="td11">    Road<img 
src="56_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado42.png" alt="PIC"  
>       </td></tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-74-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-74-2-1"  
class="td11"> name</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-74-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-74-3-1"  
class="td11">    responsible      </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-74-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-74-4-1"  
class="td11"> stations(1,n) <img 
src="55_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado41.png" alt="PIC"  
>  </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-74-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-74-5-1"  
class="td11">                 </td></tr></table></div>
</div>
<!--l. 5796--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-11700013.1.4"></a>Spatial complex attributes</h5>
<!--l. 5798--><p class="noindent" >Spatial attributes can be a component of a complex and/or multivalued attribute. It is usual to keep both thematic
(alphanumeric) and location data for attributes, as a capital, for example. This allows to print both the name and the
location in a map. However, in real maps the toponyms have also a location: there are precise cartographic rules for
placing them, so it is a semi-automatic process.
<div class="center" 
>
<!--l. 5804--><p class="noindent" >
<div class="tabular"> <table id="TBL-75" class="tabular" 
 
><colgroup id="TBL-75-1g"><col 
id="TBL-75-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-1-1"  
class="td11">                                                Country <img 
src="54_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado40.png" alt="PIC"  
>                                                                           </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-2-1"  
class="td11">                                                   name                                                                                 </td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-3-1"  
class="td11"> population</td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-4-1"  
class="td11"> capital<!--tex4ht:inline--><div class="tabular"> <table id="TBL-76" class="tabular" 
 
><colgroup id="TBL-76-1g"><col 
id="TBL-76-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-76-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-76-1-1"  
class="td11">  name    </td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-76-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-76-2-1"  
class="td11">location<img 
src="55_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado41.png" alt="PIC"  
></td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-76-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-76-3-1"  
class="td11">          </td></tr></table>                                                                                       </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-5-1"  
class="td11"> provinces(1,n) <!--tex4ht:inline--><div class="tabular"> <table id="TBL-77" class="tabular" 
 
><colgroup id="TBL-77-1g"><col 
id="TBL-77-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-77-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-77-1-1"  
class="td11">   name    </td></tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-77-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-77-2-1"  
class="td11">location <img 
src="54_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado40.png" alt="PIC"  
></td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-77-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-77-3-1"  
class="td11">           </td></tr></table>                                                                                </div> </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-75-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-75-6-1"  
class="td11">                                                                                                           </td></tr></table></div>
</div>
<!--l. 5835--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.5   </span> <a 
 id="x1-11800013.1.5"></a>Spatial objects VS spatial attributes</h5>
<!--l. 5837--><p class="noindent" >Representing a concept as a spatial object or as a spatial attribute depends on the application and it is determined by
the relative importance of the concept. This has implications in the way of accessing the instances of the concept. For
example, buildings:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5842--><p class="noindent" >As spatial objects: the application can access a building one by one.
     </li>
     <li class="itemize">
     <!--l. 5843--><p class="noindent" >As spatial attributes: the access to a building must be made through the land plot containing it.</li></ul>
<div class="center" 
>
<!--l. 5846--><p class="noindent" >
<!--l. 5847--><p class="noindent" ><img 
src="57_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado43.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
<!--l. 5850--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.6   </span> <a 
 id="x1-11900013.1.6"></a>Generalization: inheriting spatiality.</h5>
<!--l. 5852--><p class="noindent" >Spaciality is inherited through generalization, based on the well-known <span 
class="ecbx-1000">substitutability principle </span>in OOP. For simple
inheritance it is not necessary to re-state the geometry in the subtype and, as usual, spatiality can be added to a
subtype, so that only instances of the subtype have associated spaciality.
<!--l. 5858--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-12000013.1.6"></a>Refining/redefining spatiality</h5>
<!--l. 5860--><p class="noindent" >This arises when a spaciality is re-stated in a subtype:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5862--><p class="noindent" ><span 
class="ecbx-1000">Refinement</span>: it restricts the inherited property. The value remains the same in the supertype and the
     subtype.
     <div class="center" 
>
<!--l. 5864--><p class="noindent" >
<!--l. 5865--><p class="noindent" ><img 
src="58_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado44.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5867--><p class="noindent" ><span 
class="ecbx-1000">Redefinition</span>: it keeps substitutability with respect to typing and allows dynamic binding.
     <div class="center" 
>
<!--l. 5869--><p class="noindent" >
<!--l. 5870--><p class="noindent" ><img 
src="59_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado45.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 5872--><p class="noindent" ><span 
class="ecbx-1000">Overloading</span>: relaxes substitutability, inhibiting dynamic binding.
     <div class="center" 
>
<!--l. 5874--><p class="noindent" >
<!--l. 5875--><p class="noindent" ><img 
src="60_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado46.png" alt="PIC"  
>
</div>
     </li></ul>
<!--l. 5879--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-12100013.1.6"></a>Multiple inheritance</h5>
<!--l. 5881--><p class="noindent" >Spatiality is inherited from several supertypes, and this creates an ambiguity when referring to the spatiality of the
subtype. Several policies have been proposed for solving this issue in the OO community, and the most
general policy is: <span 
class="ecti-1000">all inherited properties are available in the subtype, is the user who must disambiguate in</span>
<span 
class="ecti-1000">queries</span>.
                                                                                            
                                                                                            
<div class="center" 
>
<!--l. 5886--><p class="noindent" >
<!--l. 5887--><p class="noindent" ><img 
src="61_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado47.png" alt="PIC"  
>
</div>
<!--l. 5890--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.7   </span> <a 
 id="x1-12200013.1.7"></a>Spatial relationships</h5>
<!--l. 5892--><p class="noindent" >Spatiality can also be defined for relationships, and it is orthogonal to the fact that linked object types are spatial. If a
spatial relationship relates spatial types, spatial constraints may restrict the geometries.
<div class="center" 
>
<!--l. 5895--><p class="noindent" >
<!--l. 5896--><p class="noindent" ><img 
src="62_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado48.png" alt="PIC"  
>
</div>
<!--l. 5899--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-12300013.1.7"></a>Topological relationships</h5>
<!--l. 5901--><p class="noindent" >They are specified on a relationship type that links at least two spatial types, and constraint the spatiality of the
instances of the related types. Many topological constraints can be defined using the DE-9IM. The conceptual model
depicts only the most general ones. These are:
<div class="center" 
>
<!--l. 5906--><p class="noindent" >
<!--l. 5907--><p class="noindent" ><img 
src="63_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado49.png" alt="PIC"  
>
</div>
<!--l. 5910--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.8   </span> <a 
 id="x1-12400013.1.8"></a>Spatial aggregation</h5>
<!--l. 5912--><p class="noindent" >Traditional aggregation relatiomnships can link spatial types. Usually, aggregation has exclusive semantics, stated by
cardinalities in the component role. Also, the spatiality of the aggregation is often partitioned into the spatiality of the
components.
<div class="center" 
>
<!--l. 5916--><p class="noindent" >
<!--l. 5917--><p class="noindent" ><img 
src="64_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado50.png" alt="PIC"  
>
</div>
<!--l. 5920--><p class="indent" >   Note that it is not the case for the second example, where the spaciality of Antena corresponds to its coverage, so
the same location can be covered by several antennas. Spaciality of the aggregation is the <span 
class="ecbx-1000">spatial union </span>of the
spaciality of the antennas.
<!--l. 5925--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">13.1.9   </span> <a 
 id="x1-12500013.1.9"></a>Space and time varying attributes</h5>
<!--l. 5927--><p class="noindent" >They are also referred to as <span 
class="ecbx-1000">continuous fields</span>, and allow to represent phenomena that change in space and/or
time, such as elevation (to each point there is an associated real number), population (to each point
there is an associated integer) or temperature (to each point in space there is an associated real number,
which evolves over time). At the <span 
class="ecbx-1000">conceptual level</span>, it can be represented as a continuous function, so
operators for manipulating fields can be defined. At the <span 
class="ecbx-1000">logical level </span>it can be implemented in several
ways:
                                                                                            
                                                                                            
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5937--><p class="noindent" ><span 
class="ecbx-1000">Raster</span>: discretize the space into regular cells and assign a value to each cell.
     </li>
     <li class="itemize">
     <!--l. 5939--><p class="noindent" ><span 
class="ecbx-1000">TIN</span>: keep values at particular locations and use interpolation for calculating the value at any point.</li></ul>
<div class="center" 
>
<!--l. 5942--><p class="noindent" >
<!--l. 5943--><p class="noindent" ><img 
src="65_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado51.png" alt="PIC"  
>
</div>
<!--l. 5947--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">14   </span> <a 
 id="x1-12600014"></a>Logical Modelling for Spatial Databases</h3>
<!--l. 5949--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">14.1   </span> <a 
 id="x1-12700014.1"></a>Representation models</h4>
<!--l. 5951--><p class="noindent" >This model try to represent an infinite sets of points of the Euclidean space in a computer. There two alternative
representations:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 5954--><p class="noindent" ><span 
class="ecbx-1000">Object-based model </span>(vector): describes the spatial extent of relevant objects with a set of points. It uses
     pints, lines and surfaces for describing spaciality and the choice of geometric types is arbitrary, varying
     across systems.
     </li>
     <li class="itemize">
     <!--l. 5958--><p class="noindent" ><span 
class="ecbx-1000">Field-based model </span>(raster): each point in space is associated with one or several values, defined as
     continuous functions.</li></ul>
<!--l. 5962--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">14.1.1   </span> <a 
 id="x1-12800014.1.1"></a>Raster model: tesselation</h5>
<!--l. 5964--><p class="noindent" >Tesselation is the decomposition of the plane into polygonal units, which might be regular or irregular, depending on
whether the polygonal units are of equal size:
<div class="center" 
>
<!--l. 5967--><p class="noindent" >
<!--l. 5968--><p class="noindent" ><img 
src="66_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado54.png" alt="PIC"  
>
</div>
<!--l. 5971--><p class="indent" >   Regular tesselation is used for remote sensing data, while irregular tesselation is used for zoning in social,
demographic or economic data. A spatial Object is represented by the smallest subset of pixels that contains
it.
<div class="center" 
>
<!--l. 5975--><p class="noindent" >
<!--l. 5976--><p class="noindent" ><img 
src="67_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado55.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
<!--l. 5979--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">14.2   </span> <a 
 id="x1-12900014.2"></a>Digital Elevation Models (DEMs)</h4>
<!--l. 5981--><p class="noindent" >They provide a digital (finite) representation of an abstract model of space. DEMs are useful to represent a natural
phenomenon that is a continuous function of the 2D space. They are based on a finite collection of sample values, and
the rest are obtained by interpolation.
<!--l. 5986--><p class="indent" >   <span 
class="ecbx-1000">Triangulated irregular networks </span>(TINs) are based on a triangular partition of the 2D space:
<div class="center" 
>
<!--l. 5988--><p class="noindent" >
<!--l. 5989--><p class="noindent" ><img 
src="68_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado56.png" alt="PIC"  
>
</div>
<!--l. 5992--><p class="indent" >   No assumption is made on the distribution and location of the vertices of the triangles and the elevation value is
recorded at each vertex. The value for the rest of the points is interpolated using linear interpolation of the 3 vertices of
the triangle that contains the point.
<!--l. 5998--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">14.3   </span> <a 
 id="x1-13000014.3"></a>Representing the geometry of a collection of objects</h4>
<!--l. 6000--><p class="noindent" >There are three comonly used rperesentations: spaghetti, network and topological, which mainly differ in the expression
of topological relationships among the component objects.
<!--l. 6004--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">14.3.1   </span> <a 
 id="x1-13100014.3.1"></a>Spaghetti model</h5>
<!--l. 6006--><p class="noindent" >The geometry of any object is described independently of the rest, so no topology is stored in the model: the topological
relationships must be computed on demand. This implies representation redundancy, but enables heterogeneous
representations mixing points, polylines and regions without restrictions.
<!--l. 6012--><p class="indent" >   Advantages:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6014--><p class="noindent" >Simplicity.
     </li>
     <li class="itemize">
     <!--l. 6015--><p class="noindent" >Provides the end user with easy input of new objects into the collection.</li></ul>
<!--l. 6017--><p class="noindent" >Drawbacks:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6019--><p class="noindent" >Lack of explicit information about topological relationships among spatial objects.
     </li>
     <li class="itemize">
     <!--l. 6021--><p class="noindent" >Redundancy: problem with large datasets and source of inconsistency.</li></ul>
<div class="center" 
>
<!--l. 6023--><p class="noindent" >
<!--l. 6024--><p class="noindent" ><img 
src="69_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado57.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
<!--l. 6027--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">14.3.2   </span> <a 
 id="x1-13200014.3.2"></a>Network model</h5>
<!--l. 6029--><p class="noindent" >It is destined for network or graph based applications. The topological relationships among points and polylines are
stored:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6032--><p class="noindent" ><span 
class="ecbx-1000">Nodes</span>: distinguished points that connect a list of arcs.
     </li>
     <li class="itemize">
     <!--l. 6033--><p class="noindent" ><span 
class="ecbx-1000">Arcs</span>: polyline that starts at a node and ends at a node.</li></ul>
<!--l. 6035--><p class="noindent" >Nodes allow efficient line connectivity test and network computations. There are two types of points: regular points and
nodes.
<!--l. 6038--><p class="indent" >   Depending on the implementation, the network is planar or nonplanar:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6040--><p class="noindent" >Planar network: each edge intersection is recorded as a node, even if it does not correspond to a real-world
     entity.
     </li>
     <li class="itemize">
     <!--l. 6042--><p class="noindent" >Nonplanar network: edges may cross without producing an intersection.</li></ul>
<div class="center" 
>
<!--l. 6044--><p class="noindent" >
<!--l. 6045--><p class="noindent" ><img 
src="70_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado58.png" alt="PIC"  
>
</div>
<!--l. 6048--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">14.3.3   </span> <a 
 id="x1-13300014.3.3"></a>Topological model</h5>
<!--l. 6050--><p class="noindent" >It is similar to the network model, except that the network is plannar. It induces a planar subdivision into adjacent
polygons, some of which may not correspond to actual geographic objects:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6054--><p class="noindent" ><span 
class="ecbx-1000">Node</span>: represented by a point and the list of arcs starting/ending at it. And <span 
class="ecbx-1000">isolated point </span>(empty list
     of arcs) identifies the location of point features, such as towers, point of interest,...
     </li>
     <li class="itemize">
     <!--l. 6057--><p class="noindent" ><span 
class="ecbx-1000">Arc</span>: features its ending points, list of vertices and two polygons having the arc as a common boundary.
     </li>
     <li class="itemize">
     <!--l. 6059--><p class="noindent" ><span 
class="ecbx-1000">Polygon</span>: represented by a list of arcs, each arc being shared with a neighbor polygon.
     </li>
     <li class="itemize">
     <!--l. 6061--><p class="noindent" ><span 
class="ecbx-1000">Region</span>: represented by one or more adjacent polygons.</li></ul>
                                                                                            
                                                                                            
<!--l. 6063--><p class="noindent" >There is no redundancy: each point/line is stored only once.
<!--l. 6065--><p class="indent" >   Advantages: efficient computation of topological queries, and up-to-date consistency.
<!--l. 6068--><p class="indent" >   Drawbacks: some DB objects have no semantics in real world, and the xomplexity of the structure may slow down
some operations.
<div class="center" 
>
<!--l. 6070--><p class="noindent" >
<!--l. 6071--><p class="noindent" ><img 
src="71_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado59.png" alt="PIC"  
>
</div>
<!--l. 6074--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">15   </span> <a 
 id="x1-13400015"></a>SQL/MM</h3>
<!--l. 6076--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">15.1   </span> <a 
 id="x1-13500015.1"></a>SQL/MM Spatial: Geometry Type Hierarchy</h4>
<div class="center" 
>
<!--l. 6077--><p class="noindent" >
<!--l. 6078--><p class="noindent" ><img 
src="72_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado60.png" alt="PIC"  
>
</div>
<!--l. 6081--><p class="noindent" >ST_Geometry, ST_Curve and ST_Surface are not instantiable types.
<!--l. 6083--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.1   </span> <a 
 id="x1-13600015.1.1"></a>ST_Geometry</h5>
<!--l. 6085--><p class="noindent" >Represents 0D, 1D and 2D geometries that exist in 2D, 3D or 4D. Geometries in <span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmr-7">2</span></sup> have points with <img 
src="summary138x.png" alt="(x,y)"  class="left" align="middle"> coordinate
values, in <span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmr-7">3</span></sup> it is <img 
src="summary139x.png" alt="(x,y,z)"  class="left" align="middle"> or <img 
src="summary140x.png" alt="(x,y,m)"  class="left" align="middle"> and in <span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmr-7">4</span></sup> it is <img 
src="summary141x.png" alt="(x,y,z,m )"  class="left" align="middle">.
<!--l. 6090--><p class="indent" >   The <span 
class="cmmi-10">z </span>usually represents altitude.
<!--l. 6092--><p class="indent" >   The <span 
class="cmmi-10">m </span>usually represents a measurement: it is key to support linear networking applications, such as street routing,
transportation or pipelining.
<!--l. 6096--><p class="indent" >   Geometry values are topolofically closed, i.e., they include their boundary.
<!--l. 6099--><p class="indent" >   All locations in a geometry are in the same spatial reference system (SRS), and geometric calculations are done in
the SRS of the first geometry in the parameter list of a routine. The return value is also in the SRS of the first
parameter.
<!--l. 6104--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.2   </span> <a 
 id="x1-13700015.1.2"></a>Methods</h5>
<!--l. 6106--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-13800015.1.2"></a>Metadata</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6108--><p class="noindent" >ST_Dimension: returns the dimension of a geometry.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 6109--><p class="noindent" >ST_CoordDim: returns the coordinate dimension of a geometry.
     </li>
     <li class="itemize">
     <!--l. 6110--><p class="noindent" >ST_GeometryType: returns the type of the geometry as a CHARACTER VARYING value.
     </li>
     <li class="itemize">
     <!--l. 6112--><p class="noindent" >ST_SRID: observes and mutates the spatial reference system identifier of a geometry.
     </li>
     <li class="itemize">
     <!--l. 6114--><p class="noindent" >ST_Transform: returns the geometry in the specified SRS.
     </li>
     <li class="itemize">
     <!--l. 6115--><p class="noindent" >ST_IsEmpty: tests if a geometry corresponds to the empty set.
     </li>
     <li class="itemize">
     <!--l. 6116--><p class="noindent" >ST_IsSimple: tests if a geometry has no anomalous geometric points.
     <div class="center" 
>
<!--l. 6117--><p class="noindent" >
<!--l. 6118--><p class="noindent" ><img 
src="73_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado61.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 6120--><p class="noindent" >ST_IsValid: tests if a geometry is well formed.
     <div class="center" 
>
<!--l. 6121--><p class="noindent" >
<!--l. 6122--><p class="noindent" ><img 
src="74_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado62.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 6124--><p class="noindent" >ST_Is3D: tests whether a geometry has <span 
class="cmmi-10">z </span>coordinate.
     </li>
     <li class="itemize">
     <!--l. 6125--><p class="noindent" >ST_IsMeasured: tests whether a geometry has <span 
class="cmmi-10">m </span>coordinate.</li></ul>
                                                                                            
                                                                                            
<!--l. 6128--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-13900015.1.2"></a>Spatial analysis</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6130--><p class="noindent" >ST_Boundary: returns the boundary of a geometry.
     </li>
     <li class="itemize">
     <!--l. 6131--><p class="noindent" >ST_Envelope: returns the bounding rectangle of a geometry.
     <div class="center" 
>
<!--l. 6132--><p class="noindent" >
<!--l. 6133--><p class="noindent" ><img 
src="75_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado63.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 6135--><p class="noindent" >ST_ConvexHull: returns the convex hull of a geometry.
     <div class="center" 
>
<!--l. 6136--><p class="noindent" >
<!--l. 6137--><p class="noindent" ><img 
src="76_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado64.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 6139--><p class="noindent" >ST_Buffer: returns the geometry that represents all points whose distance from any point of a geometry is less
     than or equal to a specified value.
     <div class="center" 
>
<!--l. 6142--><p class="noindent" >
<!--l. 6143--><p class="noindent" ><img 
src="77_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado65.png" alt="PIC"  
>
</div>
     </li>
     <li class="itemize">
     <!--l. 6145--><p class="noindent" >ST_Union: returns the geometry that represents the point set union of two geometries.
     </li>
     <li class="itemize">
     <!--l. 6147--><p class="noindent" >ST_Intersection: returns the geometry that represent the point set intersection of two geometries.
     </li>
     <li class="itemize">
     <!--l. 6149--><p class="noindent" >ST_Difference: returns the geometry that represents the point set difference of two geometries.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 6151--><p class="noindent" >ST_SymDifference: returns the geometry that represents the point set symmetric difference of two
     geometries.
     </li>
     <li class="itemize">
     <!--l. 6153--><p class="noindent" >ST_Distance: returns the distance between two geometries.</li></ul>
<!--l. 6156--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-14000015.1.2"></a>Input/Output</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6158--><p class="noindent" >ST_WTKToSQL: returns the geometry for the specified well-known text representation.
     </li>
     <li class="itemize">
     <!--l. 6160--><p class="noindent" >ST_AsText: returns the well-known text representation for the specified geometry.
     </li>
     <li class="itemize">
     <!--l. 6162--><p class="noindent" >ST_WKBToSQL: returns the geometry for the specified well-known binary representation.
     </li>
     <li class="itemize">
     <!--l. 6164--><p class="noindent" >ST_AsBinary: returns the well-known binary representation for the specified geometry.
     </li>
     <li class="itemize">
     <!--l. 6166--><p class="noindent" >ST_GMLToSQL: returns the geometry for the specified GML representation.
     </li>
     <li class="itemize">
     <!--l. 6167--><p class="noindent" >ST_AsGML: returns the GML representation for the specified geometry.
     </li>
     <li class="itemize">
     <!--l. 6168--><p class="noindent" >ST_GeomFromText: returns a geometry, which is transformed from a CHARACTER LARGE OBJECT
     value that represents its well-known text representation.
     </li>
     <li class="itemize">
     <!--l. 6170--><p class="noindent" >ST_GeomFromWKB: returns a geometry, which is transformed from a BINARY LARGE OBJECT value
     that represents its well-known binary representation.
     </li>
     <li class="itemize">
     <!--l. 6172--><p class="noindent" >ST_GeomFromGML: returns a geometry, which is transformed from a CHARACTER LARGE OBJECT
     value that represents its GML representation.</li></ul>
                                                                                            
                                                                                            
<!--l. 6176--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-14100015.1.2"></a>Boundary, Interior, Exterior</h5>
<!--l. 6178--><p class="noindent" >Boundary of a geometry: set of geometries of the next lower dimension.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6180--><p class="noindent" >ST_Point or ST_MultiPoint: empty set.
     </li>
     <li class="itemize">
     <!--l. 6181--><p class="noindent" >ST_Curve: start and end ST_Point values if nonclosed, empty set if closed.
     </li>
     <li class="itemize">
     <!--l. 6183--><p class="noindent" >ST_MultiCurve: ST_Point values that in the boundaries of an odd number of its element ST_Curve
     values.
     </li>
     <li class="itemize">
     <!--l. 6185--><p class="noindent" >ST_Polygon: its set of linear rings.
     </li>
     <li class="itemize">
     <!--l. 6186--><p class="noindent" >ST_Multipolygon: set of linear rings of its ST_Polygon values.
     </li>
     <li class="itemize">
     <!--l. 6187--><p class="noindent" >Arbitrary collection of geometries whose interiors are disjoint: geometries drawn from the boundaries of
     the element geometries by application of the mod 2 union rule.
     </li>
     <li class="itemize">
     <!--l. 6190--><p class="noindent" >The domain of geometries considered consists of those values that are topologically closed.</li></ul>
<!--l. 6193--><p class="noindent" >Interior of a geometry: points that are left when the boundary is removed.
<!--l. 6196--><p class="indent" >   Exterior of a geometry: points not in the interior or boundary.
<!--l. 6198--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-14200015.1.2"></a>Spatial relationships</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6200--><p class="noindent" >ST_Equals: tests if a geometry is spatially equal to another geometry.
     </li>
     <li class="itemize">
     <!--l. 6201--><p class="noindent" >ST_Disjoint: tests if a geometry is spatially disjoint from another geometry.
     </li>
     <li class="itemize">
     <!--l. 6203--><p class="noindent" >ST_Intersects: tests if a geometry spatially intersects another geometry.
     </li>
     <li class="itemize">
     <!--l. 6204--><p class="noindent" >ST_Touches: tests if a geometry spatially touches another geometry.
                                                                                            
                                                                                            
     </li>
     <li class="itemize">
     <!--l. 6205--><p class="noindent" >ST_Crosses: tests if a geometry spatially crosses another geometry.
     </li>
     <li class="itemize">
     <!--l. 6206--><p class="noindent" >ST_Within: tests if a geometry is spatially within another geometry.
     </li>
     <li class="itemize">
     <!--l. 6207--><p class="noindent" >ST_Contains: tests if a geometry spatially contains another geometry.
     </li>
     <li class="itemize">
     <!--l. 6208--><p class="noindent" >ST_Overlaps: tests if a geometry spatially overlaps another geometry.
     </li>
     <li class="itemize">
     <!--l. 6209--><p class="noindent" >ST_Relate:  tests  if  a  geometry  is  spatially  related  to  another  geometry  by  testing  for  intersections
     between  their  interior,  boundary  and  exterior  as  specified  by  the  intersection  matrix.  For  example:
     a.ST_Disjoint(b)=a.ST_Relate(b,&#8217;FF*FF****&#8217;).</li></ul>
<!--l. 6214--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.3   </span> <a 
 id="x1-14300015.1.3"></a>Example of conceptual schema</h5>
<div class="center" 
>
<!--l. 6215--><p class="noindent" >
<!--l. 6216--><p class="noindent" ><img 
src="78_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado52.png" alt="PIC"  
>
</div>
<!--l. 6219--><p class="noindent" >To create the tables:
   <!--l. 6221-->
<div class="lstlisting" id="listing-105"><span class="label"><a 
 id="x1-143001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Country</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">country_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_MultiPolygon</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143006r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_MultiPolygon</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143012r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143013r13"></a><span 
class="ecrm-0500">13</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Country</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143014r14"></a><span 
class="ecrm-0500">14</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143015r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143016r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143017r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143018r18"></a><span 
class="ecrm-0500">18</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143019r19"></a><span 
class="ecrm-0500">19</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">population</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143020r20"></a><span 
class="ecrm-0500">20</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_MultiPolygon</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143021r21"></a><span 
class="ecrm-0500">21</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">county_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143022r22"></a><span 
class="ecrm-0500">22</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143023r23"></a><span 
class="ecrm-0500">23</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143024r24"></a><span 
class="ecrm-0500">24</span></span><span style="color:#009900"><span 
class="ectt-0800">/*</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Table</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Highway</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">is</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">NOT</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">spatial</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">*/</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143025r25"></a><span 
class="ecrm-0500">25</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143026r26"></a><span 
class="ecrm-0500">26</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143027r27"></a><span 
class="ecrm-0500">27</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(4)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143028r28"></a><span 
class="ecrm-0500">28</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_type</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(2)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143029r29"></a><span 
class="ecrm-0500">29</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143030r30"></a><span 
class="ecrm-0500">30</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143031r31"></a><span 
class="ecrm-0500">31</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143032r32"></a><span 
class="ecrm-0500">32</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143033r33"></a><span 
class="ecrm-0500">33</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">section_number</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143034r34"></a><span 
class="ecrm-0500">34</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143035r35"></a><span 
class="ecrm-0500">35</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143036r36"></a><span 
class="ecrm-0500">36</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143037r37"></a><span 
class="ecrm-0500">37</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143038r38"></a><span 
class="ecrm-0500">38</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143039r39"></a><span 
class="ecrm-0500">39</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143040r40"></a><span 
class="ecrm-0500">40</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143041r41"></a><span 
class="ecrm-0500">41</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">section_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(4)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143042r42"></a><span 
class="ecrm-0500">42</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">number_lanes</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143043r43"></a><span 
class="ecrm-0500">43</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">city_start</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143044r44"></a><span 
class="ecrm-0500">44</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">city_end</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143045r45"></a><span 
class="ecrm-0500">45</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Line</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143046r46"></a><span 
class="ecrm-0500">46</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143047r47"></a><span 
class="ecrm-0500">47</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">city_start</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">City</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143048r48"></a><span 
class="ecrm-0500">48</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Foreign</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">city_end</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">References</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">City</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143049r49"></a><span 
class="ecrm-0500">49</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143050r50"></a><span 
class="ecrm-0500">50</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">City</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143051r51"></a><span 
class="ecrm-0500">51</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">city_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143052r52"></a><span 
class="ecrm-0500">52</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">population</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">integer</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143053r53"></a><span 
class="ecrm-0500">53</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_MultiPolygon</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143054r54"></a><span 
class="ecrm-0500">54</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">city_name</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143055r55"></a><span 
class="ecrm-0500">55</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143056r56"></a><span 
class="ecrm-0500">56</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Create</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Table</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">LandUse</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143057r57"></a><span 
class="ecrm-0500">57</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">region_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143058r58"></a><span 
class="ecrm-0500">58</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">land_use_type</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">varchar</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143059r59"></a><span 
class="ecrm-0500">59</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Polygon</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-143060r60"></a><span 
class="ecrm-0500">60</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Primary</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">Key</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">region_name</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6285--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.4   </span> <a 
 id="x1-14400015.1.4"></a>Reference queries: alphanumerical criteria</h5>
<!--l. 6287--><p class="noindent" >Number of inhabitants in the county of San Francisco:
   <!--l. 6289-->
<div class="lstlisting" id="listing-106"><span class="label"><a 
 id="x1-144001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">population</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">San</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Francisco</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
<!--l. 6295--><p class="indent" >   List of the counties of the state of California:
   <!--l. 6297-->
<div class="lstlisting" id="listing-107"><span class="label"><a 
 id="x1-144004r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144005r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144006r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144007r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">California</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
<!--l. 6304--><p class="indent" >   Number of inhabitants in the US:
   <!--l. 6306-->
<div class="lstlisting" id="listing-108"><span class="label"><a 
 id="x1-144008r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">sum</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">population</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144009r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Country</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144010r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">country_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">USA</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144011r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">country_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144012r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span></div>
                                                                                            
                                                                                            
<!--l. 6314--><p class="indent" >   Number of lanes in the first section of Interstate 99:
   <!--l. 6316-->
<div class="lstlisting" id="listing-109"><span class="label"><a 
 id="x1-144013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">number_lanes</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">I99</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144018r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_number</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1</span></span></div>
<!--l. 6325--><p class="indent" >   Name of all sections that constitute Interstate 99:
   <!--l. 6327-->
<div class="lstlisting" id="listing-110"><span class="label"><a 
 id="x1-144019r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144020r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144021r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">I99</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144022r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-144023r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span></div>
<!--l. 6336--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.5   </span> <a 
 id="x1-14500015.1.5"></a>Reference queries: spatial criteria</h5>
<!--l. 6338--><p class="noindent" >Counties adjacent to the county of San Francisco in the same state:
   <!--l. 6340-->
<div class="lstlisting" id="listing-111"><span class="label"><a 
 id="x1-145001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">San</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Francisco</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Touches</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6348--><p class="indent" >   Display of the state of California (supposing that the State table is non spatial):
   <!--l. 6351-->
<div class="lstlisting" id="listing-112"><span class="label"><a 
 id="x1-145006r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Union</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145007r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145008r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145009r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">California</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span></div>
<!--l. 6358--><p class="indent" >   Counties larger than the largest county in California:
   <!--l. 6360-->
<div class="lstlisting" id="listing-113"><span class="label"><a 
 id="x1-145010r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145011r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145012r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Area</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">max</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Area</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145013r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145014r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145015r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">California</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6369--><p class="indent" >   Length of Interstate 99:
   <!--l. 6371-->
<div class="lstlisting" id="listing-114"><span class="label"><a 
 id="x1-145016r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">sum</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Length</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145017r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145018r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">I99</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145019r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145020r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span></div>
<!--l. 6379--><p class="indent" >   All highways going through the state of California:
   <!--l. 6381-->
<div class="lstlisting" id="listing-115"><span class="label"><a 
 id="x1-145021r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">distinct</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145022r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">State</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145023r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">California</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145024r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145025r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145026r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Overlaps</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6390--><p class="indent" >   Display all residential areas in the county of San Jose:
   <!--l. 6392-->
<div class="lstlisting" id="listing-116"><span class="label"><a 
 id="x1-145027r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Intersection</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145028r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">LandUse</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145029r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">San</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Jose</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145030r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">land_use_type</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">residential</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">area</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145031r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Overlaps</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6400--><p class="indent" >   Overlay the map of administrative units and land use:
   <!--l. 6402-->
<div class="lstlisting" id="listing-117"><span class="label"><a 
 id="x1-145032r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">land_use_type</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Intersection</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145033r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">LandUse</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-145034r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Overlaps</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">l</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6409--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">15.1.6   </span> <a 
 id="x1-14600015.1.6"></a>Reference queries: interactive queries</h5>
<!--l. 6411--><p class="noindent" >Description of the county pointed to on the screen:
   <!--l. 6413-->
<div class="lstlisting" id="listing-118"><span class="label"><a 
 id="x1-146001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">population</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Contains</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@point</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6419--><p class="indent" >   Counties that intersect a given rectangle on the screen:
   <!--l. 6421-->
                                                                                            
                                                                                            
<div class="lstlisting" id="listing-119"><span class="label"><a 
 id="x1-146004r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">county_name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146005r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146006r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Overlaps</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@rectangle</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6427--><p class="indent" >   Part of counties that are withini a given rectangle on the screen (clipping):
   <!--l. 6430-->
<div class="lstlisting" id="listing-120"><span class="label"><a 
 id="x1-146007r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Intersection</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@rectangle</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146008r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">County</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146009r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Overlaps</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@rectangle</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6436--><p class="indent" >   Description of the highway section pointed to on the screen:
   <!--l. 6438-->
<div class="lstlisting" id="listing-121"><span class="label"><a 
 id="x1-146010r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">section_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">number_lanes</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146011r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146012r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Contains</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@point</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6444--><p class="indent" >   Description of the highways of which a section is pointed to on the screen:
   <!--l. 6447-->
<div class="lstlisting" id="listing-122"><span class="label"><a 
 id="x1-146013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">select</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_type</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">from</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Highway</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">HighwaySection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Section</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">where</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">highway_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">h2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">section_code</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-146017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">and</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">ST_Contains</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">@point</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span></div>
<!--l. 6456--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">16   </span> <a 
 id="x1-14700016"></a>Representative Systems</h3>
<!--l. 6458--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">16.1   </span> <a 
 id="x1-14800016.1"></a>Oracle Locator</h4>
<!--l. 6460--><p class="noindent" >Included in all editions of the DB, with all functions required for standard GIS tools and all geometric
objects (Points, lines and polygons in 2D, 3D and 4D). It uses indexing with quadtrees and rtrees and
supports geometric queries, proximity search, distance calculation, multiple projection and conversion of
projections.
<!--l. 6466--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.1   </span> <a 
 id="x1-14900016.1.1"></a>Oracle Spatial</h5>
<!--l. 6468--><p class="noindent" >It is an option or Oracle DB Enterprise edition, which extends the locator with geometric transformations, spatial
aggregations, dynamic segmentation, measures, network modelling, topology, raster, geocoder, spatial data mining, 3D
types and Web Services.
<!--l. 6473--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.2   </span> <a 
 id="x1-15000016.1.2"></a>Oracle Network Model</h5>
<!--l. 6475--><p class="noindent" >It is a data model for representing networks in the database. It maintains connectivity and attributes
at the link and node levels. It is used for networks management and as a navigation engine for route
calculation.
<!--l. 6479--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.3   </span> <a 
 id="x1-15100016.1.3"></a>Oracle Topological Model</h5>
<!--l. 6481--><p class="noindent" >It persists the storage of the topology with nodes, arcs and faces, and the topological relations, allowing for advanced
consistency checks. The data model allows to define objects through topological primitives and adds the type
SDO_TOPO_GEOMETRY. It coexists with traditional spatial data.
<!--l. 6487--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.4   </span> <a 
 id="x1-15200016.1.4"></a>Oracle Geo Raster</h5>
<!--l. 6489--><p class="noindent" >It adds the new data type SDO_GEORASTER, providing an open, general purpose raster data model, with storage
and indexing of raster data, as well as the ability to query an analyze raster data.
                                                                                            
                                                                                            
<!--l. 6493--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.5   </span> <a 
 id="x1-15300016.1.5"></a>Oracle geocoding</h5>
<!--l. 6495--><p class="noindent" >Generates latitude/longitude points from address. It is an international addressing standardization, working with
formatted and unformatted addresses. Its tolerance parameters support fuzzy matching.
<!--l. 6499--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.6   </span> <a 
 id="x1-15400016.1.6"></a>Oracle MapViewer</h5>
<!--l. 6501--><p class="noindent" >It is supplied with all versions of Oracle Application Server, providing XML, Java and JS interfaces. It is a tool for map
definition, for maps described in the database, thematic maps.
<!--l. 6505--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.7   </span> <a 
 id="x1-15500016.1.7"></a>Oracle: geometry type</h5>
<!--l. 6507--><p class="noindent" >To create a spatial table in Oracle:
   <!--l. 6509-->
<div class="lstlisting" id="listing-123"><span class="label"><a 
 id="x1-155001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Cells</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-155002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Cell_id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-155003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Cell_name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR2</span></span><span style="color:#000000"><span 
class="ectt-0800">(32)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-155004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Cell_type</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-155005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Location</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-155006r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Covered_area</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6519--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.8   </span> <a 
 id="x1-15600016.1.8"></a>Oracle: geometrical primitives</h5>
<div class="center" 
>
<!--l. 6520--><p class="noindent" >
<!--l. 6521--><p class="noindent" ><img 
src="79_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado66.png" alt="PIC"  
>
</div>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6524--><p class="noindent" >Point: represents point objects in 2, 3 or 4 dimensions.
     </li>
     <li class="itemize">
     <!--l. 6525--><p class="noindent" >Line: represents linear objects and is formed of straight lines or arcs. A closed line does not delineate a
     surface and self-crossing lines are allowed. They are encoded as a list of points <img 
src="summary142x.png" alt="(x1,y1,...,xn,yn)"  class="left" align="middle">.
     </li>
     <li class="itemize">
     <!--l. 6528--><p class="noindent" >Polygon: represents surface objects. The contour must be closed and the interior can contain one or more
     holes. The boundary cannot intersect and it is formed by straight lines or arcs (or a combination). Some
     specific forms as rectangles and circles can be expressed more efficiently.</li></ul>
<!--l. 6534--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.9   </span> <a 
 id="x1-15700016.1.9"></a>Oracle: element</h5>
<!--l. 6536--><p class="noindent" >An element is the basic component of geometric objects. The type of an element can be point, line or polygons. Fromed
of an ordered sequence of points.
                                                                                            
                                                                                            
<!--l. 6540--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.10   </span> <a 
 id="x1-15800016.1.10"></a>Oracle: geometry</h5>
<!--l. 6542--><p class="noindent" >Represents a spatial object and is composed of an ordered list of elements, which may be homogeneous or
heterogeneous.
<!--l. 6545--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.11   </span> <a 
 id="x1-15900016.1.11"></a>Oracle: layer</h5>
<!--l. 6547--><p class="noindent" >Represents a geometrical column in a table. In general, it contains objects of the same nature.
<!--l. 6550--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.12   </span> <a 
 id="x1-16000016.1.12"></a>SDO_GEOMETRY type</h5>
<!--l. 6552--><p class="noindent" >Structure:
   <!--l. 6554-->
<div class="lstlisting" id="listing-124"><span class="label"><a 
 id="x1-160001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GTYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_SRID</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_POINT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_POINT_TYPE</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ELEM_INFO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ELEM_INFO_ARRAY</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ORDINATES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ORDINATE_ARRAY</span></span></div>
<!--l. 6562--><p class="indent" >   Example:
   <!--l. 6564-->
<div class="lstlisting" id="listing-125"><span class="label"><a 
 id="x1-160006r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">states</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160007r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VARCHAR2</span></span><span style="color:#000000"><span 
class="ectt-0800">(30)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160008r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">totpop</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span style="color:#000000"><span 
class="ectt-0800">(9)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160009r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6571--><p class="indent" >   <span 
class="ecbx-1000">SDO_GTYPE</span>
<!--l. 6573--><p class="indent" >   Define the nature of the geometric shape contained in the object.
<div class="center" 
>
<!--l. 6574--><p class="noindent" >
<!--l. 6575--><p class="noindent" ><img 
src="80_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado71.png" alt="PIC"  
>
</div>
<!--l. 6578--><p class="indent" >   <span 
class="ecbx-1000">SDO_SRID</span>
<!--l. 6580--><p class="indent" >   SRID = Spatial Reference System ID. It specifies the coordinate system of the object. The list of possible values is
in the table MDSYS.CS:SRS. A common value is 8307: which is &#8217;Longitude/Latitude WGS84&#8217;, used by the GPS
system. All geometries of a layer must have the same SRID. Layers may have different SRIDs. Automatic conversion for
spatial queries.
<!--l. 6587--><p class="indent" >   <span 
class="ecbx-1000">SDO_POINT</span>
<!--l. 6589--><p class="indent" >   Structure
   <!--l. 6591-->
<div class="lstlisting" id="listing-126"><span class="label"><a 
 id="x1-160010r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#000000"><span 
class="ectt-0800">x</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160011r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">y</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160012r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">z</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NUMBER</span></span></div>
<!--l. 6597--><p class="indent" >   Example
   <!--l. 6599-->
<div class="lstlisting" id="listing-127"><span class="label"><a 
 id="x1-160013r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TELEPHONE_POLES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160014r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160015r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160016r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">2001,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160017r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_POINT_TYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(-75.2,43.7,</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160018r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160019r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6609--><p class="indent" >   <span 
class="ecbx-1000">SDO_ORDINATES</span>
<!--l. 6611--><p class="indent" >   Object type SDO_ORDINATE_ARRAY which is VARRAY (1048576) OF NUMBER. It stores the coordinates of
lines and polygons.
<div class="center" 
>
<!--l. 6613--><p class="noindent" >
<!--l. 6614--><p class="noindent" ><img 
src="81_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado73.png" alt="PIC"  
>
</div>
                                                                                            
                                                                                            
<!--l. 6617--><p class="indent" >   <span 
class="ecbx-1000">SDO_ELEM_INFO</span>
<!--l. 6619--><p class="indent" >   Object type SDO_ELEM_INFO_ARRAY which is VARRAY (1048576) OF NUMBER. It specifies the
nature of the elements and describes the various components of a complex object. There three entries per
element:
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6623--><p class="noindent" ><span 
class="ecbx-1000">Ordinate offset</span>: position of the first number for this element in the array SDO_ORDINATES.
     </li>
     <li class="itemize">
     <!--l. 6625--><p class="noindent" ><span 
class="ecbx-1000">Element type</span>: type of the element.
     </li>
     <li class="itemize">
     <!--l. 6626--><p class="noindent" ><span 
class="ecbx-1000">Interpretation</span>: straight line, arc,..</li></ul>
<div class="center" 
>
<!--l. 6628--><p class="noindent" >
<!--l. 6629--><p class="noindent" ><img 
src="82_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado72.png" alt="PIC"  
>
</div>
<!--l. 6632--><p class="indent" >   Examples of geometries:
<!--l. 6634--><p class="indent" >   Line:
<!--l. 6636--><p class="indent" >   <img 
src="83_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado74.png" alt="PIC"  
>
<!--l. 6638--><p class="indent" >   Polygon:
<!--l. 6640--><p class="indent" >   <img 
src="84_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado75.png" alt="PIC"  
>
<!--l. 6642--><p class="indent" >   Multipoint:
<!--l. 6644--><p class="indent" >   <img 
src="85_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado76.png" alt="PIC"  
>
<!--l. 6646--><p class="indent" >   <span 
class="ecbx-1000">Constructing a line</span>
   <!--l. 6648-->
<div class="lstlisting" id="listing-128"><span class="label"><a 
 id="x1-160020r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">LINES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160021r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute_1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute_n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160022r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160023r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">2002,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160024r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ELEM_INFO_ARRAY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(1,2,1)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160025r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ORDINATE_ARRAY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160026r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">10,10,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">20,25,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">30,10,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">40,10)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160027r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6659--><p class="indent" >   <span 
class="ecbx-1000">Metadata</span>
<!--l. 6661--><p class="indent" >   Defines the boundaries of a layer, i.e., minimum and amximium coordinates for each dimension. Sets the tolerance of
a layer, i.e., the maximum distance between two points for them to be considered different. And defines the coordinate
system for a layer.
<!--l. 6666--><p class="indent" >   Example:
   <!--l. 6668-->
<div class="lstlisting" id="listing-129"><span class="label"><a 
 id="x1-160028r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">USER_SDO_GEOM_METADATA</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">TABLE_NAME</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">COLUMN_NAME</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">DIMINFO</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SRID</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160029r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">ROADS</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">GEOMETRY</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160030r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_DIM_ARRAY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160031r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_DIM_ELEMENT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Long</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-180,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">180,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.5)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160032r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_DIM_ELEMENT</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Lat</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">-90,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">90,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.5)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6676--><p class="indent" >   <span 
class="ecbx-1000">Constructing geometries</span>
   <!--l. 6678-->
<div class="lstlisting" id="listing-130"><span class="label"><a 
 id="x1-160033r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Standard</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">constructor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160034r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TELEPHONE_POLES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160035r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160036r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">2001,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160037r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_POINT_TYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(-75.2,43.7,</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160038r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160039r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160040r8"></a><span 
class="ecrm-0500">8</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160041r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Well</span></span><span style="color:#009900"><span 
class="ectt-0800">-</span></span><span style="color:#009900"><span 
class="ectt-0800">Known</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Text</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">(</span></span><span style="color:#009900"><span 
class="ectt-0800">WKT</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">constructor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160042r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TELEPHONE_POLES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160043r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">POINT</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">(-75.2</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">43.7)</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,8307)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160044r12"></a><span 
class="ecrm-0500">12</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160045r13"></a><span 
class="ecrm-0500">13</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160046r14"></a><span 
class="ecrm-0500">14</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Well</span></span><span style="color:#009900"><span 
class="ectt-0800">-</span></span><span style="color:#009900"><span 
class="ectt-0800">Known</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">Binary</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">(</span></span><span style="color:#009900"><span 
class="ectt-0800">WKB</span></span><span style="color:#009900"><span 
class="ectt-0800">)</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">constructor</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160047r15"></a><span 
class="ecrm-0500">15</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INSERT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INTO</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">TELEPHONE_POLES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">col</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">VALUES</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-1,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">...,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">attribute</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">n</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160048r16"></a><span 
class="ecrm-0500">16</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(:</span></span><span style="color:#000000"><span 
class="ectt-0800">my_blob</span></span><span style="color:#000000"><span 
class="ectt-0800">,8307)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-160049r17"></a><span 
class="ecrm-0500">17</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6699--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.13   </span> <a 
 id="x1-16100016.1.13"></a>Oracle: Spatial indexes</h5>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6701--><p class="noindent" ><span 
class="ecbx-1000">R-tree indexing</span>: tree rectangles that provide indexing in 2 or 3 dimensions. It is based on the <span 
class="ecbx-1000">Minimum</span>
     <span 
class="ecbx-1000">Bounding Rectangle </span>(MBR) of objects.
                                                                                            
                                                                                            
     <div class="center" 
>
<!--l. 6704--><p class="noindent" >
<!--l. 6705--><p class="noindent" ><img 
src="86_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado67.png" alt="PIC"  
>
</div>
     <!--l. 6708--><p class="noindent" >To create an index:
     <!--l. 6710-->
     <div class="lstlisting" id="listing-131"><span class="label"><a 
 id="x1-161001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">CREATE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INDEX</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Customer_Idx</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ON</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">Customers</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">Location</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-161002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">INDEXTYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">IS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">MDSYS</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">SPATIAL_INDEX</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
     
     <!--l. 6715--><p class="noindent" >The CREATE INDEX statement may have additional parameters. To delete the index:
     <!--l. 6718-->
     <div class="lstlisting" id="listing-132"><span class="label"><a 
 id="x1-161003r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DROP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">INDEX</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003C;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">index</span></span><span style="color:#000000"><span 
class="ectt-0800">-</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x003E;;</span></span></div>
     
     </li>
     <li class="itemize">
     <!--l. 6722--><p class="noindent" >Quad-tree indexing: use a regular grid. It is not maintained in oracle now.</li></ul>
<!--l. 6725--><p class="noindent" >A spatial index must exists before we can ask spatial queries on a table.
<!--l. 6728--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.14   </span> <a 
 id="x1-16200016.1.14"></a>Oracle: query execution model</h5>
<div class="center" 
>
<!--l. 6729--><p class="noindent" >
<!--l. 6730--><p class="noindent" ><img 
src="87_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado68.png" alt="PIC"  
>
</div>
<!--l. 6733--><p class="noindent" >But it can be optimized:
<div class="center" 
>
<!--l. 6734--><p class="noindent" >
<!--l. 6735--><p class="noindent" ><img 
src="88_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado69.png" alt="PIC"  
>
</div>
<!--l. 6738--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">16.1.15   </span> <a 
 id="x1-16300016.1.15"></a>Oracle: writing spatial queries</h5>
<!--l. 6740--><p class="noindent" >They contain a sptail predicate, and are expressed through specific SQL operators: SDO_RELATE, SDO_INSIDE,
SDO_TOUCH, SDO_WITHIN_DISTANCE, SDO_NN. The spatial index must exists, otherwise we will get an error
message.
<!--l. 6745--><p class="indent" >   <span 
class="ecbx-1000">Topological predicates</span>
<!--l. 6747--><p class="indent" >   They select objects by their topological relationship with another object: SDO_INSIDE, SDO_CONTAINS,
SDO_COVERS, SDO_COVEREDBY, SDO_OVERLAPS, SDO_TOUCH, SDO_EQUAL, SDO_ANYINTERACT.
<!--l. 6751--><p class="indent" >   The SDO_RELATE is a generic operator for which we can specify a mask, that can be &#8217;INSIDE&#8217;, &#8217;CONTAINS&#8217;,
&#8217;TOUCH&#8217;,... or a combination as &#8217;INSIDE+CONTAINS&#8217;
<!--l. 6755--><p class="indent" >   <span 
class="ecbx-1000">Sample queries</span>
<!--l. 6757--><p class="indent" >   Which parks are entirely contianed in the state of Wyoming:
   <!--l. 6759-->
                                                                                            
                                                                                            
<div class="lstlisting" id="listing-133"><span class="label"><a 
 id="x1-163001r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">way</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163002r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163003r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_parks</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_states</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163004r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Wyoming</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163005r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_INSIDE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163006r6"></a><span 
class="ecrm-0500">6</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163007r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#009900"><span 
class="ectt-0800">--</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">way</span></span><span style="color:#009900"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#009900"><span 
class="ectt-0800">2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163008r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163009r9"></a><span 
class="ecrm-0500">9</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_parks</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_states</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163010r10"></a><span 
class="ecrm-0500">10</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Wyoming</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163011r11"></a><span 
class="ecrm-0500">11</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_RELATE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">MASK</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">INSIDE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6773--><p class="indent" >   Which states contain all or part of Yellowstone Park:
   <!--l. 6775-->
<div class="lstlisting" id="listing-134"><span class="label"><a 
 id="x1-163012r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163013r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_states</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_parks</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163014r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ANYINTERACT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163015r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Yellowstone</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">NP</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6782--><p class="indent" >   In which competing jurisdictions is my client:
   <!--l. 6784-->
<div class="lstlisting" id="listing-135"><span class="label"><a 
 id="x1-163016r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163017r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">competitors_sales_regions</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163018r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">5514</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_CONTAINS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6790--><p class="indent" >   Find all counties around Passaic County:
   <!--l. 6792-->
<div class="lstlisting" id="listing-136"><span class="label"><a 
 id="x1-163019r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state_abrv</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163020r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_counties</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_counties</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163021r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">New</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Jersey</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">county</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Passaic</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163022r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_TOUCH</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c1</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c2</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6799--><p class="indent" >   <span 
class="ecbx-1000">Queries with a constant window</span>
<!--l. 6801--><p class="indent" >   Find all customers of type Platinum in a rectangular area: <!--l. 6802-->
<div class="lstlisting" id="listing-137"><span class="label"><a 
 id="x1-163023r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">category</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163024r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163025r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_INSIDE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163026r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geometry</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(2003,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">null</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163027r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_elem_info_array</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(1,1003,3)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163028r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_ordinate_array</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(-122.413,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">37.785,-122.403,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">37.792)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163029r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163030r8"></a><span 
class="ecrm-0500">8</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">PLATINUM</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6813--><p class="indent" >   In which competitor sales territories is located a geographical point:
   <!--l. 6815-->
<div class="lstlisting" id="listing-138"><span class="label"><a 
 id="x1-163031r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163032r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">competitors_sales_regions</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163033r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_CONTAINS</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163034r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_GEOMETRY</span></span><span style="color:#000000"><span 
class="ectt-0800">(2001,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8307,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163035r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_POINT_TYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">(-122.41762,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">37.7675089,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163036r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">NULL</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163037r7"></a><span 
class="ecrm-0500">7</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6825--><p class="indent" >   <span 
class="ecbx-1000">Queries based on distance</span>
<!--l. 6827--><p class="indent" >   These are used to select objects according to distance from another point. Distance can be expressed in any unit of
distance and if no unit is specified, the distance is expressed in the unit of the coordinate system. For longitude/latitude
data, these are meters. The function used is SDO_WITHIN_DISTANCE.
<!--l. 6833--><p class="indent" >   Which agencies are less than 1km form this client:
   <!--l. 6835-->
<div class="lstlisting" id="listing-139"><span class="label"><a 
 id="x1-163038r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">phone_number</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163039r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">branches</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163040r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8314</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163041r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_WITHIN_DISTANCE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">distance</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unit</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">km</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6842--><p class="indent" >   How many customers in each category are located within 1/4 mile of my office number 77:
   <!--l. 6845-->
<div class="lstlisting" id="listing-140"><span class="label"><a 
 id="x1-163042r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(*)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163043r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">branches</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163044r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">=77</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163045r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_WITHIN_DISTANCE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">DISTANCE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=0.25</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">UNIT</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">MILE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163046r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6853--><p class="indent" >   <span 
class="ecbx-1000">Research based on proximity</span>
<!--l. 6855--><p class="indent" >   These select the N closest objects of another objects: SDO_NN. ROWNUM can be used to limit result.
SDO_NN_DISTANCE is used to categorize answers by distance.
<!--l. 6859--><p class="indent" >   What is the nearest office to this client?
   <!--l. 6861-->
<div class="lstlisting" id="listing-141"><span class="label"><a 
 id="x1-163047r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">phone_number</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163048r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">branches</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163049r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">8314</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163050r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_NN</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sdo_num_res</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=1</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6868--><p class="indent" >   What are my five customers closest to this competitor:
   <!--l. 6870-->
<div class="lstlisting" id="listing-142"><span class="label"><a 
 id="x1-163051r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163052r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">competitors</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163053r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">=1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163054r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_NN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">SDO_NUM_RES</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=5</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6877--><p class="indent" >   This only works if no other selection criterion is present.
<!--l. 6879--><p class="indent" >   What are my five customers closest to this competitor, and give the distance:
   <!--l. 6882-->
<div class="lstlisting" id="listing-143"><span class="label"><a 
 id="x1-163055r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_NN_DISTANCE</span></span><span style="color:#000000"><span 
class="ectt-0800">(1)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">distance</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163056r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">competitors</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163057r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">=1</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163058r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_NN</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">co</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">SDO_NUM_RES</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=5</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">1)</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163059r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ORDER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">distance</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
                                                                                            
                                                                                            
<!--l. 6890--><p class="indent" >   If we want to add more filters, we cannot use the SDO_NN function, because it is evaluated first. We have to do the
trick with SDO_DISTANCE+ORDER BY+ROWNUM.
<!--l. 6894--><p class="indent" >   <span 
class="ecbx-1000">Spatial Join</span>
<!--l. 6896--><p class="indent" >   It is used to find correlations between two tables, based on topology or distance. It compares all objects in a table
with all those of another table, so it requires a R-Tree on each table. Technically implemented as a function that returns
a table: the SDO_JOIN.
<!--l. 6901--><p class="indent" >   Associate with each GOLD customer the sales territory in which is is located:
   <!--l. 6904-->
<div class="lstlisting" id="listing-144"><span class="label"><a 
 id="x1-163060r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163061r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sales_regions</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">customers</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">location</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sales_regions</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">geom</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">mask</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">inside</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163062r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163063r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163064r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">GOLD</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163065r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">ORDER</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6913--><p class="indent" >   Find all gold customers who are less than 500 meters from one of our branches in San Francisco:
   <!--l. 6916-->
<div class="lstlisting" id="listing-145"><span class="label"><a 
 id="x1-163066r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">DISTINCT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">id</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163067r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">branches</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">TABLE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_JOIN</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">CUSTOMERS</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">LOCATION</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">BRANCHES</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">LOCATION</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">DISTANCE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=500</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">UNIT</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">METER</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163068r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid1</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163069r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">j</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid2</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">rowid</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163070r5"></a><span 
class="ecrm-0500">5</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">c</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">customer_grade</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">GOLD</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163071r6"></a><span 
class="ecrm-0500">6</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">city</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">SAN</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">FRANCISCO</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6925--><p class="indent" >   <span 
class="ecbx-1000">Spatial functions</span>
<div class="center" 
>
<!--l. 6926--><p class="noindent" >
<!--l. 6927--><p class="noindent" ><img 
src="89_home_runner_work_BDMA_Notes_BDMA_Notes_ULB_Advanced_Databases_LectureNotes_source_pegado70.png" alt="PIC"  
>
</div>
<!--l. 6930--><p class="indent" >   Objects must be in the same coordinate system.
<!--l. 6932--><p class="indent" >   What is the total area of Yellowstone National Park:
   <!--l. 6934-->
<div class="lstlisting" id="listing-146"><span class="label"><a 
 id="x1-163072r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geom</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_area</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,0.005,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unit</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sq_km</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163073r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_parks</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163074r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Yellowstone</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">NP</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6940--><p class="indent" >   What is the length of the Mississippi riveer:
   <!--l. 6942-->
<div class="lstlisting" id="listing-147"><span class="label"><a 
 id="x1-163075r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geom</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_length</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,0.005,</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unit</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">km</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163076r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_rivers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163077r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Mississippi</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6948--><p class="indent" >   What is the distance between Los Angeles and San Francisco:
   <!--l. 6950-->
<div class="lstlisting" id="listing-148"><span class="label"><a 
 id="x1-163078r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geom</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_distance</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.005,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unit</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">mile</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163079r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_cities</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_cities</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163080r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">a</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">city</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Los</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Angeles</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163081r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">b</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">city</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">San</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Francisco</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6957--><p class="indent" >   <span 
class="ecbx-1000">Generating objects</span>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6959--><p class="noindent" >SDO_BUFFER(g,size) generates a buffer of the size chosen.
     </li>
     <li class="itemize">
     <!--l. 6960--><p class="noindent" >SDO_CENTROID(g) calculates the center of gravity of a polygon.
     </li>
     <li class="itemize">
     <!--l. 6961--><p class="noindent" >SDO_CONVEXHULL(g): generates the convex hull of the object.
     </li>
     <li class="itemize">
     <!--l. 6962--><p class="noindent" >SDO_MBR(g) generates the bulk of the rectangle object.</li></ul>
<!--l. 6964--><p class="noindent" ><span 
class="ecbx-1000">Combining objects</span>
                                                                                            
                                                                                            
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6966--><p class="noindent" >SDO_UNION(g1,g2)
     </li>
     <li class="itemize">
     <!--l. 6967--><p class="noindent" >SDO_INTERSECTION(g1,g2)
     </li>
     <li class="itemize">
     <!--l. 6968--><p class="noindent" >SDO_DIFFERENCE(g1,g2)
     </li>
     <li class="itemize">
     <!--l. 6969--><p class="noindent" >SDO_XOR(g1,g2) is the symmetric difference.</li></ul>
<!--l. 6971--><p class="noindent" >What is the area occupied by the Yellowstone Park in the state it occupies:
   <!--l. 6974-->
<div class="lstlisting" id="listing-149"><span class="label"><a 
 id="x1-163082r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">state</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geom</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_area</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_geom</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">sdo_intersection</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">0.5)</span></span><span style="color:#000000"><span 
class="ectt-0800">,0.5,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">unit</span></span><span style="color:#9400D1"><span 
class="ectt-0800">=</span></span><span style="color:#9400D1"><span 
class="ectt-0800">sq_km</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">area</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163083r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_states</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">us_parks</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163084r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_ANYINTERACT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">s</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">geom</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">TRUE</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163085r4"></a><span 
class="ecrm-0500">4</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">AND</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">p</span></span><span style="color:#000000"><span 
class="ectt-0800">.</span></span><span style="color:#000000"><span 
class="ectt-0800">name</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">Yellowstone</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">NP</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6981--><p class="indent" >   <span 
class="ecbx-1000">Spatial aggregation</span>
<!--l. 6983--><p class="indent" >   Aggregate functions operate on the set of objects.
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 6985--><p class="noindent" >SDO_AGGR_MBR: returns the rectangle of space around a set of objects.
     </li>
     <li class="itemize">
     <!--l. 6986--><p class="noindent" >SDO_AGGR_UNION: computes the union of a set of geometric objects.
     </li>
     <li class="itemize">
     <!--l. 6987--><p class="noindent" >SDO_AGGR_CENTROID: calculates the centroid of a set of objects.
     </li>
     <li class="itemize">
     <!--l. 6988--><p class="noindent" >SDO_AGGR_CONVEXHULL: calculates the convex hull around a set of objects.</li></ul>
<!--l. 6991--><p class="noindent" >Find the focal point of all our customers in Daly City:
   <!--l. 6993-->
<div class="lstlisting" id="listing-150"><span class="label"><a 
 id="x1-163086r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_AGGR_CENTROID</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SDOAGGRTYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,0.5)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">center</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163087r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163088r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">WHERE</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">city</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">=</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">DALY</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#9400D1"><span 
class="ectt-0800">CITY</span></span><span style="color:#9400D1"><span 
class="ectt-0800">&#8217;</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 6999--><p class="indent" >   Calculate the number of customer in each zip code, and calculate the focal point for these clients:
   <!--l. 7002-->
<div class="lstlisting" id="listing-151"><span class="label"><a 
 id="x1-163089r1"></a><span 
class="ecrm-0500">1</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">SELECT</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">COUNT</span></span><span style="color:#000000"><span 
class="ectt-0800">(*)</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">postal_code</span></span><span style="color:#000000"><span 
class="ectt-0800">,</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">SDO_AGGR_CENTROID</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">SDOAGGRTYPE</span></span><span style="color:#000000"><span 
class="ectt-0800">(</span></span><span style="color:#000000"><span 
class="ectt-0800">location</span></span><span style="color:#000000"><span 
class="ectt-0800">,0.5)</span></span><span style="color:#000000"><span 
class="ectt-0800">)</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">center</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163090r2"></a><span 
class="ecrm-0500">2</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">FROM</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">customers</span></span><span 
class="ectt-0800">&#x00A0;</span><br /> 
<span class="label"><a 
 id="x1-163091r3"></a><span 
class="ecrm-0500">3</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">GROUP</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#FF00FF"><span 
class="ectt-0800">BY</span></span><span style="color:#000000"><span 
class="ectt-0800">&#x00A0;</span></span><span style="color:#000000"><span 
class="ectt-0800">postal_code</span></span><span style="color:#000000"><span 
class="ectt-0800">;</span></span></div>
<!--l. 7008--><p class="indent" >
                                                                                            
                                                                                            
   <h3 class="likesectionHead"><a 
 id="x1-16400016.1.15"></a>References</h3>
<!--l. 1--><p class="noindent" >
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XZimanyi2022"></a>Esteban Zimanyi. Infoh415 advanced databases. Lecture Notes.
</p>
   </div>
    
</body></html> 

                                                                                            
                                                                                            
                                                                                            


